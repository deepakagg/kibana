var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["security-configuration"]=function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var executeModules=data[2];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}deferredModules.push.apply(deferredModules,executeModules||[]);return checkDeferredModules()}function checkDeferredModules(){var result;for(var i=0;i<deferredModules.length;i++){var deferredModule=deferredModules[i];var fulfilled=true;for(var j=1;j<deferredModule.length;j++){var depId=deferredModule[j];if(installedChunks[depId]!==0)fulfilled=false}if(fulfilled){deferredModules.splice(i--,1);result=__webpack_require__(__webpack_require__.s=deferredModule[0])}}return result}var installedModules={};var installedChunks={336:0};var deferredModules=[];function jsonpScriptSrc(chunkId){return __webpack_require__.p+""+({2:"icon.alert-js",3:"icon.apm_trace-js",4:"icon.app_add_data-js",5:"icon.app_advanced_settings-js",6:"icon.app_apm-js",7:"icon.app_auditbeat-js",8:"icon.app_canvas-js",9:"icon.app_code-js",10:"icon.app_console-js",11:"icon.app_cross_cluster_replication-js",12:"icon.app_dashboard-js",13:"icon.app_devtools-js",14:"icon.app_discover-js",15:"icon.app_ems-js",16:"icon.app_filebeat-js",17:"icon.app_gis-js",18:"icon.app_graph-js",19:"icon.app_grok-js",20:"icon.app_heartbeat-js",21:"icon.app_index_management-js",22:"icon.app_index_pattern-js",23:"icon.app_index_rollup-js",24:"icon.app_infra-js",25:"icon.app_logging-js",26:"icon.app_management-js",27:"icon.app_metricbeat-js",28:"icon.app_ml-js",29:"icon.app_monitoring-js",30:"icon.app_notebook-js",31:"icon.app_packetbeat-js",32:"icon.app_pipeline-js",33:"icon.app_reporting-js",34:"icon.app_saved_objects-js",35:"icon.app_search_profiler-js",36:"icon.app_security-js",37:"icon.app_security_analytics-js",38:"icon.app_spaces-js",39:"icon.app_sql-js",40:"icon.app_timelion-js",41:"icon.app_upgrade_assistant-js",42:"icon.app_uptime-js",43:"icon.app_users_roles-js",44:"icon.app_visualize-js",45:"icon.app_watches-js",46:"icon.apps-js",47:"icon.arrow_down-js",48:"icon.arrow_left-js",49:"icon.arrow_right-js",50:"icon.arrow_up-js",51:"icon.asterisk-js",52:"icon.beaker-js",53:"icon.bell-js",54:"icon.bolt-js",55:"icon.boxes_horizontal-js",56:"icon.boxes_vertical-js",57:"icon.branch-js",58:"icon.broom-js",59:"icon.brush-js",60:"icon.bug-js",61:"icon.bullseye-js",62:"icon.calendar-js",63:"icon.check-js",64:"icon.checkInCircleFilled-js",65:"icon.clock-js",66:"icon.cloudDrizzle-js",67:"icon.cloudStormy-js",68:"icon.cloudSunny-js",69:"icon.compute-js",70:"icon.console-js",71:"icon.controls_horizontal-js",72:"icon.controls_vertical-js",73:"icon.copy-js",74:"icon.copy_clipboard-js",75:"icon.cross-js",76:"icon.crossInACircleFilled-js",77:"icon.crosshairs-js",78:"icon.cut-js",79:"icon.database-js",80:"icon.document-js",81:"icon.documentEdit-js",82:"icon.documents-js",83:"icon.dot-js",84:"icon.editorDistributeHorizontal-js",85:"icon.editorDistributeVertical-js",86:"icon.editorItemAlignBottom-js",87:"icon.editorItemAlignCenter-js",88:"icon.editorItemAlignLeft-js",89:"icon.editorItemAlignMiddle-js",90:"icon.editorItemAlignRight-js",91:"icon.editorItemAlignTop-js",92:"icon.editorPositionBottomLeft-js",93:"icon.editorPositionBottomRight-js",94:"icon.editorPositionTopLeft-js",95:"icon.editorPositionTopRight-js",96:"icon.editor_align_center-js",97:"icon.editor_align_left-js",98:"icon.editor_align_right-js",99:"icon.editor_bold-js",100:"icon.editor_code_block-js",101:"icon.editor_comment-js",102:"icon.editor_heading-js",103:"icon.editor_italic-js",104:"icon.editor_link-js",105:"icon.editor_ordered_list-js",106:"icon.editor_redo-js",107:"icon.editor_strike-js",108:"icon.editor_table-js",109:"icon.editor_underline-js",110:"icon.editor_undo-js",111:"icon.editor_unordered_list-js",112:"icon.email-js",113:"icon.exit-js",114:"icon.expand-js",115:"icon.export-js",116:"icon.eye-js",117:"icon.eye_closed-js",118:"icon.faceNeutral-js",119:"icon.face_happy-js",120:"icon.face_neutral-js",121:"icon.face_sad-js",122:"icon.filter-js",123:"icon.flag-js",124:"icon.folder_closed-js",125:"icon.folder_open-js",126:"icon.full_screen-js",127:"icon.gear-js",128:"icon.glasses-js",129:"icon.globe-js",130:"icon.grab-js",131:"icon.grab_horizontal-js",132:"icon.grid-js",133:"icon.heart-js",134:"icon.heatmap-js",135:"icon.help-js",136:"icon.iInCircle-js",137:"icon.import-js",138:"icon.index_close-js",139:"icon.index_edit-js",140:"icon.index_flush-js",141:"icon.index_mapping-js",142:"icon.index_open-js",143:"icon.index_settings-js",144:"icon.inputOutput-js",145:"icon.inspect-js",146:"icon.invert-js",147:"icon.kql_field-js",148:"icon.kql_function-js",149:"icon.kql_operand-js",150:"icon.kql_selector-js",151:"icon.kql_value-js",152:"icon.link-js",153:"icon.list-js",154:"icon.list_add-js",155:"icon.lock-js",156:"icon.lockOpen-js",157:"icon.logo_aerospike-js",158:"icon.logo_apache-js",159:"icon.logo_apm-js",160:"icon.logo_app_search-js",161:"icon.logo_aws-js",162:"icon.logo_aws_mono-js",163:"icon.logo_azure-js",164:"icon.logo_azure_mono-js",165:"icon.logo_beats-js",166:"icon.logo_business_analytics-js",167:"icon.logo_cloud-js",168:"icon.logo_cloud_ece-js",169:"icon.logo_code-js",170:"icon.logo_codesandbox-js",171:"icon.logo_couchbase-js",172:"icon.logo_docker-js",173:"icon.logo_dropwizard-js",174:"icon.logo_elastic-js",175:"icon.logo_elastic_stack-js",176:"icon.logo_elasticsearch-js",177:"icon.logo_enterprise_search-js",178:"icon.logo_etcd-js",179:"icon.logo_gcp-js",180:"icon.logo_gcp_mono-js",181:"icon.logo_github-js",182:"icon.logo_gmail-js",183:"icon.logo_ibm-js",184:"icon.logo_ibm_mono-js",185:"icon.logo_kafka-js",186:"icon.logo_kibana-js",187:"icon.logo_kubernetes-js",188:"icon.logo_logging-js",189:"icon.logo_logstash-js",190:"icon.logo_maps-js",191:"icon.logo_memcached-js",192:"icon.logo_metrics-js",193:"icon.logo_mongodb-js",194:"icon.logo_mysql-js",195:"icon.logo_nginx-js",196:"icon.logo_osquery-js",197:"icon.logo_php-js",198:"icon.logo_postgres-js",199:"icon.logo_prometheus-js",200:"icon.logo_rabbitmq-js",201:"icon.logo_redis-js",202:"icon.logo_security-js",203:"icon.logo_site_search-js",204:"icon.logo_sketch-js",205:"icon.logo_slack-js",206:"icon.logo_uptime-js",207:"icon.logo_webhook-js",208:"icon.logo_windows-js",209:"icon.logstash_filter-js",210:"icon.logstash_if-js",211:"icon.logstash_input-js",212:"icon.logstash_output-js",213:"icon.logstash_queue-js",214:"icon.magnet-js",215:"icon.magnifyWithMinus-js",216:"icon.magnifyWithPlus-js",217:"icon.map_marker-js",218:"icon.memory-js",219:"icon.menuLeft-js",220:"icon.menuRight-js",221:"icon.merge-js",222:"icon.minus_in_circle-js",223:"icon.minus_in_circle_filled-js",224:"icon.ml_create_advanced_job-js",225:"icon.ml_create_multi_metric_job-js",226:"icon.ml_create_population_job-js",227:"icon.ml_create_single_metric_job-js",228:"icon.ml_data_visualizer-js",229:"icon.moon-js",230:"icon.node-js",231:"icon.number-js",232:"icon.offline-js",233:"icon.online-js",234:"icon.paint-js",235:"icon.pause-js",236:"icon.pencil-js",237:"icon.pin-js",238:"icon.pin_filled-js",239:"icon.play-js",240:"icon.plus_in_circle-js",241:"icon.plus_in_circle_filled-js",242:"icon.popout-js",243:"icon.question_in_circle-js",244:"icon.refresh-js",245:"icon.save-js",246:"icon.scale-js",247:"icon.search-js",248:"icon.shard-js",249:"icon.share-js",250:"icon.snowflake-js",251:"icon.sortLeft-js",252:"icon.sortRight-js",253:"icon.sort_down-js",254:"icon.sort_up-js",255:"icon.sortable-js",256:"icon.starPlusEmpty-js",257:"icon.starPlusFilled-js",258:"icon.star_empty-js",259:"icon.star_empty_space-js",260:"icon.star_filled-js",261:"icon.star_filled_space-js",262:"icon.star_minus_empty-js",263:"icon.star_minus_filled-js",264:"icon.stats-js",265:"icon.stop-js",266:"icon.stop_filled-js",267:"icon.stop_slash-js",268:"icon.storage-js",269:"icon.string-js",270:"icon.submodule-js",271:"icon.swatch_input-js",272:"icon.symlink-js",273:"icon.tableOfContents-js",274:"icon.tag-js",275:"icon.tear-js",276:"icon.temperature-js",277:"icon.tokens-tokenAnnotation-js",278:"icon.tokens-tokenArray-js",279:"icon.tokens-tokenBoolean-js",280:"icon.tokens-tokenClass-js",281:"icon.tokens-tokenConstant-js",282:"icon.tokens-tokenElement-js",283:"icon.tokens-tokenEnum-js",284:"icon.tokens-tokenEnumMember-js",285:"icon.tokens-tokenEvent-js",286:"icon.tokens-tokenException-js",287:"icon.tokens-tokenField-js",288:"icon.tokens-tokenFile-js",289:"icon.tokens-tokenFunction-js",290:"icon.tokens-tokenInterface-js",291:"icon.tokens-tokenKey-js",292:"icon.tokens-tokenMethod-js",293:"icon.tokens-tokenModule-js",294:"icon.tokens-tokenNamespace-js",295:"icon.tokens-tokenNull-js",296:"icon.tokens-tokenNumber-js",297:"icon.tokens-tokenObject-js",298:"icon.tokens-tokenOperator-js",299:"icon.tokens-tokenPackage-js",300:"icon.tokens-tokenParameter-js",301:"icon.tokens-tokenProperty-js",302:"icon.tokens-tokenRepo-js",303:"icon.tokens-tokenString-js",304:"icon.tokens-tokenStruct-js",305:"icon.tokens-tokenSymbol-js",306:"icon.tokens-tokenVariable-js",307:"icon.training-js",308:"icon.trash-js",309:"icon.user-js",310:"icon.vector-js",311:"icon.videoPlayer-js",312:"icon.vis_area-js",313:"icon.vis_bar_horizontal-js",314:"icon.vis_bar_vertical-js",315:"icon.vis_controls-js",316:"icon.vis_gauge-js",317:"icon.vis_goal-js",318:"icon.vis_heatmap-js",319:"icon.vis_line-js",320:"icon.vis_map_coordinate-js",321:"icon.vis_map_region-js",322:"icon.vis_metric-js",323:"icon.vis_pie-js",324:"icon.vis_table-js",325:"icon.vis_tag_cloud-js",326:"icon.vis_text-js",327:"icon.vis_timelion-js",328:"icon.vis_vega-js",329:"icon.vis_visual_builder-js",330:"icon.wrench-js",343:"vendors~icon.logo_ceph-js",344:"vendors~icon.logo_golang-js",345:"vendors~icon.logo_haproxy-js"}[chunkId]||chunkId)+".bundle.js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise(function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]});promises.push(installedChunkData[2]=promise);var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;var error=new Error("Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")");error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout(function(){onScriptComplete({type:"timeout",target:script})},12e4);script.onerror=script.onload=onScriptComplete;head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([2679,0]);return checkDeferredModules()}({1028:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);var _client=_interopRequireDefault(__webpack_require__(272));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/opendistro_security/configuration",[]).service("backendTenants",function(backendAPI,Promise,$http,kbnUrl){var _this=this;var RESOURCE="tenants";this.title={singular:"tenant",plural:"tenants"};this.newLabel="Tenant name";this.list=function(){return backendAPI.list(RESOURCE)};this.listSilent=function(){return backendAPI.listSilent(RESOURCE)};this.get=function(id){return backendAPI.get(RESOURCE,id)};this.save=function(actiongroupname,data){var data=_this.preSave(data);return backendAPI.save(RESOURCE,actiongroupname,data)};this.delete=function(id){return backendAPI.delete(RESOURCE,id)};this.listAutocomplete=function(names){return backendAPI.listAutocomplete(names)};this.emptyModel=function(){var tenant={};tenant.description="";return tenant};this.preSave=function(tenant){delete tenant.hidden;delete tenant.reserved;delete tenant.static;return tenant};this.postFetch=function(tenant){return tenant}})},2679:function(module,exports,__webpack_require__){"use strict";__webpack_require__(104);__webpack_require__(105);__webpack_require__(106);__webpack_require__(107);__webpack_require__(108);__webpack_require__(109);__webpack_require__(110);__webpack_require__(111);__webpack_require__(112);__webpack_require__(113);__webpack_require__(114);__webpack_require__(115);__webpack_require__(116);__webpack_require__(117);__webpack_require__(118);__webpack_require__(119);__webpack_require__(120);__webpack_require__(121);__webpack_require__(122);__webpack_require__(123);__webpack_require__(124);__webpack_require__(125);__webpack_require__(126);__webpack_require__(127);__webpack_require__(128);__webpack_require__(129);__webpack_require__(130);__webpack_require__(131);__webpack_require__(132);__webpack_require__(133);__webpack_require__(134);__webpack_require__(135);__webpack_require__(136);__webpack_require__(137);__webpack_require__(138);__webpack_require__(139);__webpack_require__(140);__webpack_require__(141);__webpack_require__(142);__webpack_require__(143);__webpack_require__(144);__webpack_require__(145);__webpack_require__(146);__webpack_require__(147);__webpack_require__(148);__webpack_require__(149);__webpack_require__(150);__webpack_require__(151);__webpack_require__(152);__webpack_require__(153);__webpack_require__(154);__webpack_require__(155);__webpack_require__(156);__webpack_require__(157);__webpack_require__(158);__webpack_require__(159);__webpack_require__(160);__webpack_require__(161);__webpack_require__(162);__webpack_require__(163);__webpack_require__(164);__webpack_require__(165);__webpack_require__(166);__webpack_require__(167);__webpack_require__(168);__webpack_require__(169);__webpack_require__(170);__webpack_require__(171);__webpack_require__(172);__webpack_require__(173);__webpack_require__(174);__webpack_require__(175);__webpack_require__(176);__webpack_require__(177);__webpack_require__(178);__webpack_require__(179);__webpack_require__(180);__webpack_require__(181);__webpack_require__(182);__webpack_require__(183);__webpack_require__(184);__webpack_require__(185);__webpack_require__(186);__webpack_require__(187);__webpack_require__(188);__webpack_require__(189);__webpack_require__(190);__webpack_require__(191);__webpack_require__(192);__webpack_require__(193);__webpack_require__(194);__webpack_require__(195);__webpack_require__(196);__webpack_require__(197);__webpack_require__(198);__webpack_require__(199);__webpack_require__(200);__webpack_require__(201);__webpack_require__(202);__webpack_require__(203);__webpack_require__(204);__webpack_require__(205);__webpack_require__(206);__webpack_require__(207);__webpack_require__(208);__webpack_require__(209);__webpack_require__(210);__webpack_require__(211);__webpack_require__(212);__webpack_require__(213);__webpack_require__(214);__webpack_require__(215);__webpack_require__(216);__webpack_require__(217);__webpack_require__(218);__webpack_require__(219);__webpack_require__(220);__webpack_require__(221);__webpack_require__(222);__webpack_require__(223);__webpack_require__(224);__webpack_require__(225);__webpack_require__(226);__webpack_require__(227);__webpack_require__(228);__webpack_require__(229);__webpack_require__(230);__webpack_require__(231);__webpack_require__(232);__webpack_require__(233);__webpack_require__(234);var _i18n=__webpack_require__(5);var _kibanaCore__=__webpack_require__(83);__webpack_require__.nc=window.__kbnNonce__;var injectedMetadata=JSON.parse(document.querySelector("kbn-injected-metadata").getAttribute("data"));_i18n.i18n.load(injectedMetadata.i18n.translationsUrl).catch(function(e){return e}).then(function(i18nError){var coreSystem=new _kibanaCore__.CoreSystem({injectedMetadata:injectedMetadata,rootDomElement:document.body,browserSupportsCsp:!window.__kbnCspNotEnforced__,requireLegacyFiles:function requireLegacyFiles(){__webpack_require__(2680)}});coreSystem.setup().then(function(coreSetup){if(i18nError){coreSetup.fatalErrors.add(i18nError)}return coreSystem.start()})})},2680:function(module,exports,__webpack_require__){"use strict";var _chrome=_interopRequireDefault(__webpack_require__(11));var _routes=_interopRequireDefault(__webpack_require__(19));var _modules=__webpack_require__(8);var _kbn_href=__webpack_require__(591);var _internalusers=_interopRequireDefault(__webpack_require__(2681));var _actiongroups=_interopRequireDefault(__webpack_require__(2711));var _rolesmapping=_interopRequireDefault(__webpack_require__(2720));var _roles=_interopRequireDefault(__webpack_require__(2725));var _tenants=_interopRequireDefault(__webpack_require__(2730));var _securityconfiguration=_interopRequireDefault(__webpack_require__(2734));__webpack_require__(63);__webpack_require__(2738);__webpack_require__(271);__webpack_require__(594);var _configuration_controller=_interopRequireDefault(__webpack_require__(2739));var _configuration2=_interopRequireDefault(__webpack_require__(2740));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_kbn_href.kbnUrlDirective)("kbnSrc");_routes.default.enable();_routes.default.when("/",{template:_configuration2.default})},2681:function(module,exports,__webpack_require__){"use strict";var _angular=_interopRequireDefault(__webpack_require__(18));var _routes=_interopRequireDefault(__webpack_require__(19));var _index=_interopRequireDefault(__webpack_require__(2682));var _edit=_interopRequireDefault(__webpack_require__(2683));__webpack_require__(2684);__webpack_require__(273);__webpack_require__(63);__webpack_require__(271);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes.default.when("/internalusers",{template:_index.default}).when("/internalusers/edit/:resourcename",{template:_edit.default}).when("/internalusers/clone/:resourcename",{template:_edit.default}).when("/internalusers/new",{template:_edit.default})},2682:function(module,exports){module.exports='<div ng-controller="securityBaseController">\n    <div class="security app-container ng-scope" id="section-editor" ng-controller="securityInternalUsersController">\n\n        <securityc-list-header></securityc-list-header>\n\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12">\n\n                    <div style="margin-bottom: 10px;">\n                        <div style="display: inline;">\n                            <span class="kuiInfoButton help" tooltip="The Internal User Database is an authentication backend that stores users and their backend roles directly in Elasticsearch. You can then map these users and/or their backend roles to Open Distro Security Roles to assign permissions. Use the Internal User Database if you don\'t have any external authentication system like LDAP or JWT in place.">\n                                <svg class="euiIcon euiIcon--large" focusable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="help-a" d="M13.6 12.186l-1.357-1.358c-.025-.025-.058-.034-.084-.056.53-.794.84-1.746.84-2.773a4.977 4.977 0 0 0-.84-2.772c.026-.02.059-.03.084-.056L13.6 3.813a6.96 6.96 0 0 1 0 8.373zM8 15A6.956 6.956 0 0 1 3.814 13.6l1.358-1.358c.025-.025.034-.057.055-.084C6.02 12.688 6.974 13 8 13a4.978 4.978 0 0 0 2.773-.84c.02.026.03.058.056.083l1.357 1.358A6.956 6.956 0 0 1 8 15zm-5.601-2.813a6.963 6.963 0 0 1 0-8.373l1.359 1.358c.024.025.057.035.084.056A4.97 4.97 0 0 0 3 8c0 1.027.31 1.98.842 2.773-.027.022-.06.031-.084.056l-1.36 1.358zm5.6-.187A4 4 0 1 1 8 4a4 4 0 0 1 0 8zM8 1c1.573 0 3.019.525 4.187 1.4l-1.357 1.358c-.025.025-.035.057-.056.084A4.979 4.979 0 0 0 8 3a4.979 4.979 0 0 0-2.773.842c-.021-.027-.03-.059-.055-.084L3.814 2.4A6.957 6.957 0 0 1 8 1zm0-1a8.001 8.001 0 1 0 .003 16.002A8.001 8.001 0 0 0 8 0z"></path></defs><use xlink:href="#help-a" fill-rule="evenodd"></use></svg>\n                            </span>\n                        </div>\n                        <h3 class="indexheading euiTitle euiTitle--medium" style="display: inline;">Internal Users Database</h3>\n                    </div>\n\n                    <div class="kuiControlledTable">\n\n                        <securityc-filter-bar></securityc-filter-bar>\n\n                        \x3c!-- Table --\x3e\n                        <table class="kuiTable" ng-show="(resourcenames | filter:query).length">\n                            <thead>\n                                <tr>\n\n                                    <th class="kuiTableHeaderCell" ng-click="onSortChange(\'resourcename\')">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Username\n                                        </span>\n                                        <span ng-show="sortTable.byKey === \'resourcename\'"\n                                              class="kuiIcon"\n                                              ng-class="{\'fa-long-arrow-down\': sortTable.descending, \'fa-long-arrow-up\': ! sortTable.descending}">\n                                        </span>\n                                    </th>\n\n                                    <th class="kuiTableHeaderCell">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Backend Roles\n                                        </span>\n                                    </th>\n\n                                    <th class="kuiTableHeaderCell kuiTableHeaderCell">\n                                    </th>\n\n                                </tr>\n                            </thead>\n\n                            <tbody>\n                                <tr ng-repeat="username in resourcenames | filter:query | orderBy:\'toString()\':sortTable.descending" class="kuiTableRow">\n\n                                    <td class="kuiTableRowCell">\n                                        <div class="kuiTableRowCell__liner">\n                                            <a class="kuiLink" ng-click="edit(username)" title="{{username}}" id="{{username}}">\n                                                {{username}}\n                                            </a>\n                                            <div ng-if="resources[username].reserved">\n                                                <span class="euiBadge euiBadge--default">\n                                                  <span class="euiBadge__content">\n                                                        <span class="euiIcon euiIcon--small euiBadge__icon kuiIcon fa-lock"></span>\n                                                    <span class="euiBadge__text">reserved</span>\n                                                  </span>\n                                                </span>\n                                            </div>\n                                            <div ng-if="username == currentuser">\n                                                <span class="euiBadge euiBadge--default">\n                                                  <span class="euiBadge__content">\n                                                        <span class="euiIcon euiIcon--small euiBadge__icon kuiIcon fa-lock"></span>\n                                                    <span class="euiBadge__text">Current user</span>\n                                                  </span>\n                                                </span>\n                                            </div>\n                                        </div>\n                                    </td>\n\n                                    <td class="kuiTableRowCell">\n                                        <div class="kuiTableRowCell__liner">\n                                            <span title="{{role}}" ng-repeat="role in resources[username].backend_roles">{{role}}<br/></span>\n                                        </div>\n                                    </td>\n\n                                    <td class="kuiTableRowCell actions">\n                                        <div class="kuiTableRowCell__liner">\n                                            <a tooltip="Edit" ng-click="edit(username)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                                <span class="kuiButton__icon kuiIcon fa-edit"></span>\n                                            </a>\n                                            <a tooltip="Clone" ng-click="clone(username)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                                <span class="kuiButton__icon kuiIcon fa-copy"></span>\n                                            </a>\n                                            <button tooltip="Delete" type="button" ng-disabled="!endpointAndMethodEnabled(\'INTERNALUSERS\', \'DELETE\') || resources[username].readonly || username == currentuser" ng-click="confirmDelete(username)" class="kuiButton kuiButton--danger kuiButton--iconText" id="opendistro_security.button.internalusers.delete.{{username}}">\n                                                <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                            </button>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <securityc-confirmation-modal ng-if="displayModal === true"\n            header="Confirm Delete"\n            body="Do you really want to delete \'{{deleteModalResourceName}}\'"\n            on-close="closeDeleteModal"\n            on-confirm="delete">\n        </securityc-confirmation-modal>\n\n    </div>\n</div>\n'},2683:function(module,exports){module.exports='<div ng-controller="securityBaseController">\n    <div class="security app-container ng-scope" id="section-editor" ng-controller="securityEditInternalUsersController">\n\n        <securityc-edit-header></securityc-edit-header>\n\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12">\n                    <div class="">\n                        <form class="editResourceForm" name="objectForm" id="object-form" method="post" ng-submit="saveObject($event)" novalidate>\n\n                            <securityc-error-message></securityc-error-message>\n\n                            <securityc-form-resource-name></securityc-form-resource-name>\n\n                            <securityc-form-new-resource-field></securityc-form-new-resource-field>\n\n                            <div class="form-group">\n                                <label for="object-form-password">Password <span ng-if="!isNew" class="labelhint">(leave empty to keep current password)</span></label>\n                                <input\n                                        id="object-form-password"\n                                        type="password"\n                                        autocomplete="new-password"\n                                        ng-model="resource.password"\n                                        class="form-control"\n                                        >\n                            </div>\n                            <div class="form-group">\n                                <label for="object-form-password-confirmation">Repeat password <span ng-if="!isNew" class="labelhint">(leave empty to keep current password)</span></label>\n                                <span ng-if="objectForm.passwordConfirmation.$error.match" class="fieldError">Passwords must match.</span>\n                                <input\n                                        id="object-form-password-confirmation"\n                                        name="passwordConfirmation"\n                                        type="password"\n                                        autocomplete="new-password"\n                                        ng-model="resource.passwordConfirmation"\n                                        class="form-control"\n                                        match="resource.password"\n                                        />\n                            </div>\n\n                            \x3c!-- Backend Roles --\x3e\n                            <table class="kuiTable tableIndexGroups" securityc-form-focus-added-field>\n                                <thead>\n                                    <tr>\n                                        <th class="kuiTableHeaderCell tableHeaderCellIndexGroups sevenwidth">\n                                            <span class="kuiTableHeaderCell__liner">\n                                                Backend Roles\n                                            </span>\n                                        </th>\n\n                                        <th class="kuiTableHeaderCell">\n                                        </th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <tr class="kuiTableRow" ng-if="resource.backend_roles.length == 0">\n                                        <td colspan="2" class="kuiTableRowCell">\n                                            <div class="kuiPanel kuiPanel--centered kuiPanel--noborder">\n                                                <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                                                    <div class="kuiEmptyTablePrompt__message ng-binding">No backend roles found</div>\n                                                </div>\n                                            </div>\n                                        </td>\n                                    </tr>\n                                    <tr class="kuiTableRow" data-ng-repeat="role in resource.backend_roles track by $index">\n                                        <td class="kuiTableRowCell cellAlignTop">\n                                            <fieldset class="marginbottom--small" id="object-form-backendroles-{{resource.backend_roles[$index]}}">\n                                                <input type="text" class="kuiTextInput fullwidth" ng-model="resource.backend_roles[$index]" name="" id="opendistro_security.input.backendroles.{{resource.backend_roles[$index]}}">\n                                            </fieldset>\n                                        </td>\n                                        <td class="kuiTableRowCell cellAlignTop actions">\n                                            <a ng-click="confirmRemoveArrayEntry(resource.backend_roles, role)" class="kuiButton kuiButton--danger kuiButton--iconText" id="opendistro_security.button.backendroles.delete.{{resource.backend_roles[$index]}}">\n                                                <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                            </a>\n                                        </td>\n                                    </tr>\n                                    <tr class="kuiTableRow">\n                                        <td class="kuiTableRowCell cellAlignTop actions"></td>\n                                        <td class="kuiTableRowCell cellAlignTop actions">\n                                            <button type="button"\n                                                    id="opendistro_security.button.backendroles.add"\n                                                    ng-click="addArrayEntry(resource, \'backend_roles\', \'\')"\n                                                    ng-disabled="lastArrayEntryEmpty(resource.backend_roles)"\n                                                    class="kuiButton kuiButton--primary kuiButton--iconText ">\n                                                <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                                                Add backend role\n                                            </button>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n\n                            \x3c!-- User attributes --\x3e\n                            <table class="kuiTable tableIndexGroups" securityc-form-focus-added-field>\n                                <thead>\n                                <tr>\n                                    <th colspan="2" class="kuiTableHeaderCell tableHeaderCellIndexGroups sevenwidth">\n                                            <span class="kuiTableHeaderCell__liner">\n                                                User attributes\n                                            </span>\n                                    </th>\n\n                                    <th class="kuiTableHeaderCell">\n                                    </th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                <tr class="kuiTableRow" ng-show="!resource.attributesArray.length">\n                                    <td colspan="3" class="kuiTableRowCell">\n                                        <div class="kuiPanel kuiPanel--centered kuiPanel--noborder">\n                                            <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                                                <div class="kuiEmptyTablePrompt__message ng-binding">No user attributes found</div>\n                                            </div>\n                                        </div>\n                                    </td>\n                                </tr>\n                                <tr class="kuiTableRow" data-ng-repeat="attribute in sortObjectArray(resource.attributesArray,\'key\') track by $index">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <fieldset class="marginbottom--small" id="object-form-user-attributes-key-{{resource.attributesArray[$index].key}}">\n                                            <input type="text" class="kuiTextInput fullwidth" ng-model="resource.attributesArray[$index].key" name="" id="opendistro_security.input.userattributes.key.{{resource.attributesArray[$index].key}}">\n                                        </fieldset>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <fieldset class="marginbottom--small" id="object-form-user-attributes-value-{{resource.attributesArray[$index].value}}">\n                                            <input type="text" class="kuiTextInput fullwidth" ng-model="resource.attributesArray[$index].value" name="" id="opendistro_security.input.userattributes.value.{{resource.attributesArray[$index].value}}">\n                                        </fieldset>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop actions">\n                                        <a ng-click="confirmRemoveFromObjectArray(resource.attributesArray, $index, resource.attributesArray[$index].key)" class="kuiButton kuiButton--danger kuiButton--iconText" id="opendistro_security.button.userattributes.delete.{{resource.attributesArray[$index].key}}">\n                                            <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                        </a>\n                                    </td>\n                                </tr>\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop actions" colspan="2"></td>\n                                    <td class="kuiTableRowCell cellAlignTop actions">\n                                        <button type="button"\n                                                id="opendistro_security.button.userattributes.add"\n                                                ng-click="addToObjectArray(resource.attributesArray, {key: \'\', value: \'\'})"\n                                                ng-disabled="lastArrayEntryEmpty(resource.attributesArray)"\n                                                class="kuiButton kuiButton--primary kuiButton--iconText ">\n                                            <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                                            Add attribute\n                                        </button>\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n\n                            <div class="formsubmit">\n                                <button id="opendistro_security.button.submit" ng-disabled="!endpointAndMethodEnabled(\'INTERNALUSERS\', \'PUT\') || resource.reserved" class="kuiButton kuiButton--primary kuiButton--text" type="submit">Submit</button>\n                                <button id="opendistro_security.button.cancel" class="kuiButton kuiButton--basic kuiButton--text" type="submit" ng-click="cancel()">Cancel</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <securityc-confirmation-modal ng-if="deleteFromEditModal.displayModal"\n            header="{{deleteFromEditModal.header}}"\n            body="{{deleteFromEditModal.body}}"\n            params="deleteFromEditModal.params"\n            on-confirm="deleteFromEditModal.onConfirm"\n            on-close="deleteFromEditModal.onClose"\n        ></securityc-confirmation-modal>\n    </div>\n</div>\n'},2684:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);__webpack_require__(2685);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.controller("securityInternalUsersController",function($scope,$element,$route,createNotifier,backendInternalUsers,kbnUrl){$scope.endpoint="INTERNALUSERS";$scope.$parent.endpoint="INTERNALUSERS";$scope.service=backendInternalUsers;$scope.$parent.service=backendInternalUsers;$scope.title="Manage Internal User";$scope.service.list().then(function(response){$scope.resourcenames=Object.keys(response.data).sort();$scope.resources=response.data;$scope.numresources=response.total;$scope.loaded=true});$scope.sortTable={byKey:"resourcename",descending:false};$scope.onSortChange=function(key){if($scope.sortTable.byKey===key){$scope.sortTable.descending=!$scope.sortTable.descending}else{$scope.sortTable.byKey=key}}});app.controller("securityEditInternalUsersController",function($scope,$element,$route,$location,$routeParams,createNotifier,backendInternalUsers,kbnUrl){$scope.endpoint="INTERNALUSERS";$scope.$parent.endpoint="INTERNALUSERS";$scope.service=backendInternalUsers;$scope.$parent.service=backendInternalUsers;$scope.resourcelabel="Internal User";$scope.resource={};$scope.resourcename="";$scope.resourcenames=[];$scope.isNew=false;$scope.title=function(){return $scope.isNew?"New Internal User":"Edit Internal User '"+$scope.resourcename+"'"};$scope.service.list().then(function(response){$scope.resourcenames=Object.keys(response.data);var username=$routeParams.resourcename;if(username){$scope.service.get(username).then(function(response){$scope.service.postFetch(response);$scope.resource=response;$scope.resourcename=username;if($location.path().indexOf("clone")==-1){$scope.isNew=false}else{$scope.resourcename=$scope.resourcename+" (COPY)";$scope.isNew=true;delete $scope.resource.reserved}})}else{$scope.resource=$scope.service.emptyModel();if($routeParams.name){$scope.resourcename=$routeParams.name}$scope.isNew=true}$scope.loaded=true});$scope.saveObject=function(event){if(event){event.preventDefault()}var form=$element.find('form[name="objectForm"]');if($scope.isNew&&$scope.resourcename.length<3){$scope.errorMessage="Username needs to have at least 3 characters.";return}if($scope.isNew&&$scope.resourcenames.indexOf($scope.resourcename)!=-1){$scope.errorMessage="Username already exists, please choose another one.";return}if($scope.resourcename.indexOf("*")!=-1){$scope.errorMessage="Username must not contain '*'";return}if(form.hasClass("ng-invalid-required")){$scope.errorMessage="Please fill in all the required parameters.";return}if(!form.hasClass("ng-valid")){$scope.errorMessage="Please correct all errors and try again.";return}if(!$scope.isNew){if($scope.resource.password.trim().length==0){$scope.resource.passwordConfirmation=""}}if($scope.resource.password!==$scope.resource.passwordConfirmation){$scope.errorMessage="Passwords do not match.";return}$scope.service.save($scope.resourcename,$scope.resource).then(function(){return kbnUrl.change("/internalusers/")},function(error){$scope.errorMessage=error.data.message});$scope.errorMessage=null}})},2685:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);var _client=_interopRequireDefault(__webpack_require__(272));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/opendistro_security/configuration",[]).service("backendInternalUsers",function(backendAPI,Promise,$http){var _this=this;var RESOURCE="internalusers";this.title={singular:"internal user",plural:"internal users"};this.newLabel="Username";this.list=function(){return backendAPI.list(RESOURCE)};this.get=function(username){return backendAPI.get(RESOURCE,username)};this.save=function(username,data){var dataToSave=(0,_lodash.cloneDeep)(data);dataToSave=_this.preSave(dataToSave);return backendAPI.save(RESOURCE,username,dataToSave,false)};this.delete=function(username){return backendAPI.delete(RESOURCE,username)};this.emptyModel=function(){var user={};user["password"]="";user["passwordConfirmation"]="";user.backend_roles=[];user.attributesArray=[];return user};this.preSave=function(user){delete user.hidden;delete user.reserved;delete user.static;delete user["passwordConfirmation"];user.backend_roles=user.backend_roles.filter(function(e){return String(e).trim()});user.backend_roles=(0,_lodash.uniq)(user.backend_roles);user["attributes"]={};for(var i=0,l=user.attributesArray.length;i<l;i++){var entry=user.attributesArray[i];if(entry&&entry.key!=""){user.attributes[entry.key]=entry.value}}delete user["attributesArray"];return user};this.postFetch=function(user){user=backendAPI.cleanArraysFromDuplicates(user);delete user["hash"];user["password"]="";user["passwordConfirmation"]="";if(!user.backend_roles){user.backend_roles=[]}user["attributesArray"]=[];if(user.attributes){var attributeNames=Object.keys(user.attributes).sort();attributeNames.forEach(function(attributeName){user.attributesArray.push({key:attributeName,value:user.attributes[attributeName]})})}return user}})},2686:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("securitycEditHeader",function(){return{template:__webpack_require__(2687),replace:true,restrict:"E"}})},2687:function(module,exports){module.exports='<div class="euiSpacer euiSpacer--l"></div>\n\x3c!--\n<div class="kuiLocalNav">\n    <div class="kuiLocalNavRow">\n        <div class="kuiLocalNavRow__section">\n            <div class="kuiLocalTitle">\n                {{title()}}\n            </div>\n        </div>\n    </div>\n</div>\n--\x3e'},2688:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("securitycFilterBar",function(){return{template:__webpack_require__(2689),replace:true,restrict:"E"}})},2689:function(module,exports){module.exports='<div>\n    <div class="kuiToolBar">\n        <div class="kuiToolBarSearch">\n            <div class="kuiToolBarSearchBox">\n                <div class="kuiToolBarSearchBox__icon kuiIcon fa-search"></div>\n                <input class="kuiToolBarSearchBox__input ng-pristine ng-untouched ng-valid" type="text" placeholder="Search..." ng-model="query">\n            </div>\n        </div>\n\n        <div class="kuiToolBarSection">\n            <button id="opendistro_security.button.toolbar.new" type="button" tooltip="Add a new {{service.title.singular}}" ng-click="new(query)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                <span class="kuiButton__icon kuiIcon fa-plus"></span>\n            </button>\n\n            <a ng-href="#/" class="kuiButton kuiButton--basic kuiButton--iconText" tooltip="Back to overview">\n                <span class="kuiButton__icon kuiIcon fa-chevron-left" id="opendistro_security.button.toolbar.back"></span>\n                Back\n            </a>\n\n        </div>\n\n        <div class="kuiToolBarSection">\n            \x3c!-- We need an empty section for the buttons to be positioned consistently. --\x3e\n        </div>\n    </div>\n\n    \x3c!-- No Results --\x3e\n    <div class="kuiPanel kuiPanel--centered kuiPanel--withToolBar" ng-show="!(resourcenames | filter:query).length && loaded">\n        <div class="kuiEmptyTablePrompt">\n            <div class="kuiEmptyTablePrompt__message">No {{service.title.plural}} found. Would you like to add one?</div>\n            <div class="kuiEmptyTablePrompt__actions">\n                <div class="kuiButtonGroup">\n                    <button id="opendistro_security.button.tableprompt.new" type="button" ng-click="new(query)" class="kuiButton kuiButton--primary kuiButton--iconText" aria-label="Add a new {{service.title.singular}}">\n                        <span class="kuiButton__inner">\n                            <span aria-hidden="true" class="kuiButton__icon kuiIcon fa-plus"></span>\n                            <span>Add a new {{service.title.singular}}</span>\n                        </span>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    \x3c!-- Loading --\x3e\n    <div class="kuiPanel kuiPanel--centered kuiPanel--withToolBar" ng-show="!loaded">\n        <div class="kuiEmptyTablePrompt">\n            <div class="kuiEmptyTablePrompt__message">Loading ...</div>\n        </div>\n    </div>\n\n</div>\n'},2690:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("securitycFormResourceName",function(){return{template:__webpack_require__(2691),replace:true,restrict:"E"}})},2691:function(module,exports){module.exports='<div>\n\n    <table class="fullwidth" ng-show="!isNew" style="margin-bottom:10px;">\n        <tr>\n            <td>\n                <h3 class="resourcename euiTitle euiTitle--medium" id="opendistro_security.label.resource.resourcename">\n                    {{resourcelabel}}: {{resourcename}}\n                    <div class="kuiBadge kuiBadge--default" ng-if="resource.reserved">\n                        <span class="euiBadge euiBadge--default">\n                            <span class="euiBadge__content">\n                                <span class="euiIcon euiIcon--small euiBadge__icon kuiIcon fa-lock"></span>\n                                <span class="euiBadge__text" id="opendistro_security.label.resource.reserved">reserved</span>\n                            </span>\n                        </span>\n                    </div>\n                </h3>\n            </td>\n            <td class="actions">\n                <button id="opendistro_security.button.resource.json.refresh" ng-if="showEditor" type="button" class="kuiButton kuiButton--secondary kuiButton--iconText" ng-click="loadJSON(resource)">\n                    <span class="kuiButton__icon kuiIcon fa-refresh" ng-bind></span>\n                    Refresh\n                </button>\n                <button id="opendistro_security.button.resource.json.toggle" type="button" class="kuiButton kuiButton--secondary kuiButton--iconText" ng-click="toggleEditor(resource)">\n                    <span class="kuiButton__icon kuiIcon fa-code" ng-bind></span>\n                    {{toggleEditorLabel}}\n                </button>\n            </td>\n        </tr>\n    </table>\n\n    <div style="margin-bottom:10px;"\n            id="object-form-json-raw"\n            name="jsonRaw"\n            ui-ace="{ onLoad: aceLoaded, mode: \'json\' }"\n            readonly\n            ng-model="resourceAsJson"\n            ng-if="showEditor"\n            >\n    </div>\n</div>\n'},2692:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("securitycFormNewResourceField",function(){return{template:__webpack_require__(2693),replace:true,restrict:"E"}})},2693:function(module,exports){module.exports='<div>\n    <div ng-show="isNew" style="margin-bottom:20px;">\n        <h3 class=" euiTitle euiTitle--medium" style="margin-top:0px;">{{service.newLabel}}:</h3>\n        <input\n                id="object-form-id-new"\n                name="objectId"\n                type="text"\n                ng-model="resourcename"\n                class="form-control kuiTextInput"\n                autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"\n\n                />\n    </div>\n</div>\n'},2694:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("securitycListHeader",function(){return{template:__webpack_require__(2695),replace:true,restrict:"E"}})},2695:function(module,exports){module.exports='<div class="euiSpacer euiSpacer--l"></div>\n\x3c!--\n<div>\n    <div class="euiPanel euiPanel--paddingMedium">\n        <div class="headerHeadline" id="opendistro_security.label.header.title">\n            <div class="headerHeadline">\n                <span id="opendistro_security.label.header.title">{{title}}</span><br/>\n                <span id="opendistro_security.label.header.numresources">{{numresources}} entries found.</span>\n            </div>\n        </div>\n    </div>\n</div>\n'},2696:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _accordeon=_interopRequireDefault(__webpack_require__(2697));__webpack_require__(2698);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("accordeon",function(){var _temp;return{restrict:"E",replace:true,transclude:true,template:_accordeon.default,scope:{accordeonId:"@",title:"@",testid:"@",isCollapsed:"=",additionalClass:"@"},controllerAs:"accordeon",bindToController:true,controller:(_temp=function AccordeonController(){var _this=this;_classCallCheck(this,AccordeonController);_defineProperty(this,"toggle",function(){_this.isCollapsed=!_this.isCollapsed})},_temp)}})},2697:function(module,exports){module.exports='<div>\n  <div class="kuiTogglePanelHeader">\n    <accordeon-header additional-class="{{accordeon.additionalClass}}" testid="{{ accordeon.testid }}" title="{{ accordeon.title }}" is-collapsed="accordeon.isCollapsed" on-click="accordeon.toggle">\n    </accordeon-header>\n  </div>\n  <div\n    ng-if="!accordeon.isCollapsed"\n    ng-transclude\n  ></div>\n</div>\n'},2698:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _accordeon_header=_interopRequireDefault(__webpack_require__(2699));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("accordeonHeader",function(){return{restrict:"E",replace:true,template:_accordeon_header.default,scope:{testid:"@",title:"@",isCollapsed:"=",onClick:"=",additionalClass:"@"},controllerAs:"accordeonHeader",bindToController:true,controller:function ToggleButtonController(){_classCallCheck(this,ToggleButtonController)}}})},2699:function(module,exports){module.exports='<button type="button" class="kuiToggleButton" ng-click="accordeonHeader.onClick()" id="{{ accordeonHeader.testid }}">\n  <h5>\n    <span style="margin-right:10px;" ng-class="{\'kuiIcon fa-caret-down\': !accordeonHeader.isCollapsed, \'kuiIcon fa-caret-right\': accordeonHeader.isCollapsed}" class="fa {{accordeonHeader.additionalClass}}"></span>\n    <span class="{{accordeonHeader.additionalClass}}">{{ accordeonHeader.title }}</span>\n  </h5>\n</button>\n'},2700:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("securitycPermissions",function(){return{template:__webpack_require__(2701),restrict:"EA",scope:{permissionsResource:"=permissionsresource",actiongroupType:"&",onShouldConfirm:"&"},controller:"securityBaseController",link:function link(scope,elem,attr){scope.showAdvanced=null;scope.actiongroupItems=[];if(!scope.actiongroupType||scope.actiongroupType.length==0){scope.actiongroupType="all"}scope.$watch("permissionsResource",function(newValue,oldValue){if(newValue&&scope.showAdvanced==null){if(scope.permissionsResource.permissions&&scope.permissionsResource.permissions.length>0){scope.showAdvanced=true}}},true);scope.getActiongroupItems=function(){if(scope.actiongroupItems.length){return scope.actiongroupItems}if(scope.actiongroupsAutoComplete&&scope.actiongroupsAutoComplete.map){scope.actiongroupItems=scope.actiongroupsAutoComplete.map(function(item){return item.name})}return scope.actiongroupItems};scope.permissionItems=scope.allpermissionsAutoComplete.map(function(item){return item});scope.onCloseNewSinglePermission=function(isOpen,$select,index){if(isOpen||!$select.select||!$select.selected){return}if($select.selected.name){$select.select($select.selected.name)}};scope.refreshNewSinglePermission=function($select){var search=$select.search,list=angular.copy($select.items),FLAG=-1;list=list.filter(function(item){return item.id!==FLAG});if(!search){$select.items=list}else{if(typeof scope.application==="undefined"){if(search.indexOf("cluster:")!==0&&search.indexOf("indices:")!==0){return}}var customItem={id:FLAG,name:search};$select.items=[customItem].concat(list);$select.selected=customItem}};scope.confirmDeletePermission=function(source,item){scope.onShouldConfirm()(source,item)}}}})},2701:function(module,exports){module.exports='<div>\n    <table class="kuiTable tableIndexGroups">\n        <thead>\n        <tr>\n            <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n                <span class="kuiTableHeaderCell__liner">\n                    Permissions: Action Groups\n                </span>\n            </th>\n\n            <th class="kuiTableHeaderCell tableHeaderCellIndexGroups actions">\n                <span class="kuiTableHeaderCell__liner">\n                    <input type="checkbox" data-ng-model="showAdvanced"> Show Advanced</td>\n            </span>\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr class="kuiTableRow" ng-show="!permissionsResource.actiongroups.length">\n            <td colspan="2" class="kuiTableRowCell">\n                <div class="kuiPanel--centered">\n                    <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                        <div class="kuiEmptyTablePrompt__message ng-binding">No Action Groups found.</div>\n                    </div>\n                </div>\n            </td>\n        </tr>\n        <tr class="kuiTableRow" data-ng-repeat="actiongroup in permissionsResource.actiongroups track by $index" >\n            <td class="kuiTableRowCell cellAlignTop">\n                <fieldset class="marginbottom--small" id="object-form-actiongroups">\n                    <ui-select ng-model="permissionsResource.actiongroups[$index]">\n                        <ui-select-match placeholder="Action Group name">\n                            {{permissionsResource.actiongroups[$index]}}\n                        </ui-select-match>\n                        <ui-select-choices repeat="item in (getActiongroupItems() | filter: $select.search) track by $index">\n                            <span ng-bind="item"></span>\n                        </ui-select-choices>\n                    </ui-select>\n                </fieldset>\n            </td>\n            <td class="kuiTableRowCell cellAlignTop actions">\n                <button style="display:inline-block" type="button" ng-click="confirmDeletePermission(permissionsResource.actiongroups, actiongroup)" class="kuiButton kuiButton--danger kuiButton--iconText">\n                    <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                </button>\n            </td>\n        </tr>\n        <tr class="kuiTableRow">\n            <td class="kuiTableRowCell cellAlignTop ">\n\n            </td>\n            <td class="kuiTableRowCell cellAlignTop actions">\n                <button type="button" ng-click="addArrayEntry(permissionsResource, \'actiongroups\', \'\')" ng-disabled="lastArrayEntryEmpty(permissionsResource.actiongroups)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                    <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                    Add Action Group\n                </button>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n\n    \x3c!-- Permissions Table --\x3e\n    <table class="kuiTable tableIndexGroups" ng-if="showAdvanced">\n        <thead>\n        <tr>\n            <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n                <span class="kuiTableHeaderCell__liner">\n                    Permissions: Single Permissions\n                </span>\n            </th>\n\n            <th class="kuiTableHeaderCell">\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr class="kuiTableRow" ng-show="!permissionsResource.permissions.length">\n            <td colspan="2" class="kuiTableRowCell">\n                <div class="kuiPanel--centered">\n                    <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                        <div class="kuiEmptyTablePrompt__message ng-binding">No Single Permissions found.</div>\n                    </div>\n                </div>\n            </td>\n        </tr>\n        <tr class="kuiTableRow" data-ng-repeat="permission in permissionsResource.permissions track by $index">\n            <td class="kuiTableRowCell cellAlignTop">\n                <fieldset class="marginbottom--small" id="object-form-actiongroups">\n                    <ui-select\n                            uis-open-close="onCloseNewSinglePermission(isOpen, $select)"\n                            ng-model="permissionsResource.permissions[$index]">\n                        <ui-select-match placeholder="Start with cluster: or indices:">\n                            {{permission.name || permission}}\n                        </ui-select-match>\n                        <ui-select-choices\n                                refresh="refreshNewSinglePermission($select)"\n                                refresh-delay="0"\n                                repeat="item in (permissionItems | filter: $select.search) track by $index">\n                            <span ng-bind="item.name"></span>\n                        </ui-select-choices>\n                    </ui-select>\n                </fieldset>\n            </td>\n            <td class="kuiTableRowCell cellAlignTop actions">\n                <a ng-click="confirmDeletePermission(permissionsResource.permissions, permission)" class="kuiButton kuiButton--danger kuiButton--iconText">\n                    <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                </a>\n            </td>\n        </tr>\n        <tr class="kuiTableRow">\n            <td class="kuiTableRowCell cellAlignTop actions"></td>\n            <td class="kuiTableRowCell cellAlignTop actions">\n                <button type="button" ng-click="addArrayEntry(permissionsResource, \'permissions\', \'\')" ng-disabled="lastArrayEntryEmpty(permissionsResource.permissions)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                    <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                    Add Single Permission\n                </button>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</div>'},2702:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("fileModel",["$parse",function($parse){return{restrict:"A",link:function link(scope,element,attrs){var reader=new FileReader;var model=$parse(attrs.fileModel);var modelSetter=model.assign;element.bind("change",function(){scope.$apply(function(){var file=element[0].files[0];reader.readAsText(file);reader.onload=function(evt){modelSetter(scope,reader.result)}})})}}}])},2703:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("securitycHeader",function(){return{template:__webpack_require__(2704),replace:true,restrict:"E"}})},2704:function(module,exports){module.exports='<div class="euiSpacer euiSpacer--l"></div>\n\x3c!--\n<div class="euiPanel euiPanel--paddingSmall">\n    <div class="headerHeadline" id="opendistro_security.label.header.title">\n        {{title}}\n    </div>\n</div>\n--\x3e'},2705:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("securitycErrorMessage",function(){return{template:__webpack_require__(2706),replace:true,restrict:"E"}})},2706:function(module,exports){module.exports='<div class="kuiInfoPanel kuiInfoPanel--error" ng-show="errorMessage" style="margin-bottom:10px;">\n    <div class="kuiInfoPanelHeader">\n        <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n        <span class="kuiInfoPanelHeader__title" ng-bind-html="errorMessage" id="opendistro_security.label.form.errormessage"></span>\n    </div>\n</div>\n'},2707:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("securitycConfirmationModal",function(){return{template:__webpack_require__(2708),restrict:"E",scope:{},controllerAs:"vm",bindToController:{header:"@",body:"@",params:"=",onConfirm:"&",onClose:"&",extendConfig:"="},controller:function controller($scope,$timeout){var _this=this;this.config={buttons:{confirm:{label:"Confirm",classes:"kuiButton--primary"},cancel:{label:"Cancel",classes:"kuiButton--hollow"}}};this.$onInit=function(){if(this.extendConfig){this.config=angular.merge({},this.config,this.extendConfig)}document.addEventListener("keydown",handleCloseOnEsc)};this.confirm=function(){if(this.onConfirm()){this.onConfirm()({params:this.params})}};this.closeModal=function(reason){if(this.onClose()){this.onClose()(reason)}};var handleCloseOnEsc=function handleCloseOnEsc(event){if(event.keyCode===27){$timeout(function(){_this.closeModal("esc")})}};this.closeOnOverlay=function(event){if(!angular.element(event.target).hasClass("js-confirmOverlay")){return}this.closeModal("overlay")};this.$onDestroy=function(){document.removeEventListener("keydown",handleCloseOnEsc)}}}})},2708:function(module,exports){module.exports='<div class="kuiModalOverlay js-confirmOverlay" ng-click="vm.closeOnOverlay($event)">\n    <div class="kuiModal" style="width: 450px;">\n        <div class="kuiModalHeader">\n            <div class="kuiModalHeader__title">\n                {{::vm.header}}\n            </div>\n        </div>\n        <div class="kuiModalBody">\n            <div class="kuiModalBodyText">\n                {{::vm.body}}\n            </div>\n        </div>\n        <div class="kuiModalFooter">\n            <button type="button" ng-click="vm.closeModal(\'cancel\')" class="kuiButton {{::vm.config.buttons.cancel.classes}}"><span\n                    class="kuiButton__inner"><span>Cancel</span></span></button>\n            <button type="button" ng-click="vm.confirm()" class="kuiButton {{::vm.config.buttons.confirm.classes}}" id="opendistro_security.button.deletemodal.confirm"><span>Confirm</span></span></button>\n        </div>\n    </div>\n</div>'},2709:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("securitycFormFocusAddedField",function($timeout){return{restrict:"A",link:function link(scope,el){var observer=null;var config={childList:true,subtree:true};var observerCallback=function observerCallback(mutationsList){var mutationsWithAdditions=mutationsList.filter(function(mutation){return mutation.addedNodes.length});if(mutationsWithAdditions.length===0){return}var mutation=mutationsWithAdditions[0];if(mutation.addedNodes[0].nodeType===1){var focusable=mutation.addedNodes[0].querySelector("input[type='text']");if(focusable&&focusable.value===""){focusable.focus()}}};if("MutationObserver"in window){$timeout(function(){observer=new MutationObserver(observerCallback);observer.observe(el[0],config)})}el.on("$destroy",function(){if(observer!==null){observer.disconnect()}})}}})},2710:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.directive("securitycFormFocusField",function($timeout){return{restrict:"A",scope:{focusWhen:"="},link:function link(scope,el){scope.$watch("focusWhen",function(current,previous){if(current===true&&!previous){$timeout(function(){if(el[0].nodeName.toLowerCase()!=="input"){var focusable=el[0].querySelector("input[type='text']");if(focusable){focusable.focus()}}else{el[0].focus()}})}})}}})},2711:function(module,exports,__webpack_require__){"use strict";var _angular=_interopRequireDefault(__webpack_require__(18));var _routes=_interopRequireDefault(__webpack_require__(19));var _index=_interopRequireDefault(__webpack_require__(2712));var _edit=_interopRequireDefault(__webpack_require__(2713));__webpack_require__(2714);__webpack_require__(593);__webpack_require__(273);__webpack_require__(63);__webpack_require__(271);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes.default.when("/actiongroups",{template:_index.default}).when("/actiongroups/edit/:resourcename",{template:_edit.default}).when("/actiongroups/clone/:resourcename",{template:_edit.default}).when("/actiongroups/new",{template:_edit.default})},2712:function(module,exports){module.exports='<div ng-controller="securityBaseController">\n    <div class="security ng-scope" id="section-editor" ng-controller="securityActionGroupsController">\n\n        <securityc-list-header></securityc-list-header>\n\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12">\n                    <div style="margin-bottom: 10px;">\n                        <div style="display: inline;">\n                            <span class="kuiInfoButton help" tooltip="Action Groups are named groups of permissions. You can assign Action Groups to Roles to configure their access permissions to indices and document types.">\n                                <svg class="euiIcon euiIcon--large" focusable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="help-a" d="M13.6 12.186l-1.357-1.358c-.025-.025-.058-.034-.084-.056.53-.794.84-1.746.84-2.773a4.977 4.977 0 0 0-.84-2.772c.026-.02.059-.03.084-.056L13.6 3.813a6.96 6.96 0 0 1 0 8.373zM8 15A6.956 6.956 0 0 1 3.814 13.6l1.358-1.358c.025-.025.034-.057.055-.084C6.02 12.688 6.974 13 8 13a4.978 4.978 0 0 0 2.773-.84c.02.026.03.058.056.083l1.357 1.358A6.956 6.956 0 0 1 8 15zm-5.601-2.813a6.963 6.963 0 0 1 0-8.373l1.359 1.358c.024.025.057.035.084.056A4.97 4.97 0 0 0 3 8c0 1.027.31 1.98.842 2.773-.027.022-.06.031-.084.056l-1.36 1.358zm5.6-.187A4 4 0 1 1 8 4a4 4 0 0 1 0 8zM8 1c1.573 0 3.019.525 4.187 1.4l-1.357 1.358c-.025.025-.035.057-.056.084A4.979 4.979 0 0 0 8 3a4.979 4.979 0 0 0-2.773.842c-.021-.027-.03-.059-.055-.084L3.814 2.4A6.957 6.957 0 0 1 8 1zm0-1a8.001 8.001 0 1 0 .003 16.002A8.001 8.001 0 0 0 8 0z"></path></defs><use xlink:href="#help-a" fill-rule="evenodd"></use></svg>\n                            </span>\n                        </div>\n                        <h3 class="indexheading euiTitle euiTitle--medium" style="display: inline;">Action Groups</h3>\n                    </div>\n\n                    <div class="kuiControlledTable">\n\n                        <securityc-filter-bar></securityc-filter-bar>\n\n                        \x3c!-- Table --\x3e\n                        <table class="kuiTable" ng-show="(resourcenames | filter:query).length">\n                            <thead>\n                                <tr>\n\n                                    <th class="kuiTableHeaderCell" ng-click="onSortChange(\'resourcename\')">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Action Group Name\n                                        </span>\n                                        <span ng-show="sortTable.byKey === \'resourcename\'"\n                                              class="kuiIcon"\n                                              ng-class="{\'fa-long-arrow-down\': sortTable.descending, \'fa-long-arrow-up\': ! sortTable.descending}">\n                                        </span>\n                                    </th>\n\n                                    <th class="kuiTableHeaderCell">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Permissions\n                                        </span>\n                                    </th>\n\n                                    <th class="kuiTableHeaderCell">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Action Groups\n                                        </span>\n                                    </th>\n\n                                    <th class="kuiTableHeaderCell kuiTableHeaderCell">\n                                    </th>\n\n                                </tr>\n                            </thead>\n\n                            <tbody>\n                                <tr ng-repeat="actiongroupname in resourcenames | filter:query | orderBy:\'toString()\':sortTable.descending" class="kuiTableRow">\n\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            <a class="kuiLink" ng-click="edit(actiongroupname)" title="{{actiongroupname}}">\n                                                {{actiongroupname}}\n                                            </a>\n                                            <div ng-if="resources[actiongroupname].reserved">\n                                                <span class="euiBadge euiBadge--default">\n                                                  <span class="euiBadge__content">\n                                                        <span class="euiIcon euiIcon--small euiBadge__icon kuiIcon fa-lock"></span>\n                                                    <span class="euiBadge__text">reserved</span>\n                                                  </span>\n                                                </span>\n                                            </div>\n                                        </div>\n                                    </td>\n\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            <span title="{{permission}}" ng-repeat="permission in resources[actiongroupname].permissions">{{permission}}<br/></span>\n                                        </div>\n                                    </td>\n\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            <span title="{{actiongroup}}" ng-repeat="actiongroup in resources[actiongroupname].actiongroups">{{actiongroup}}<br/></span>\n                                        </div>\n                                    </td>\n\n                                    <td class="kuiTableRowCell actions cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            <a tooltip="Edit" ng-click="edit(actiongroupname)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                                <span class="kuiButton__icon kuiIcon fa-edit"></span>\n                                            </a>\n                                            <a tooltip="Clone" ng-click="clone(actiongroupname)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                                <span class="kuiButton__icon kuiIcon fa-copy"></span>\n                                            </a>\n                                            <button tooltip="Delete" type="button" ng-disabled="!endpointAndMethodEnabled(\'ACTIONGROUPS\', \'DELETE\') || resources[actiongroupname].reserved" ng-click="confirmDelete(actiongroupname)" class="kuiButton kuiButton--danger kuiButton--iconText">\n                                                <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                            </button>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <securityc-confirmation-modal ng-if="displayModal === true"\n            header="Confirm Delete"\n            body="Do you really want to delete \'{{deleteModalResourceName}}\'"\n            on-close="closeDeleteModal"\n            on-confirm="delete">\n        </securityc-confirmation-modal>\n\n    </div>\n</div>\n'},2713:function(module,exports){module.exports='<div ng-controller="securityBaseController">\n    <div class="security app-container ng-scope" id="section-editor" ng-controller="securityEditActionGroupsController">\n\n        <securityc-edit-header></securityc-edit-header>\n\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12">\n                    <div class="">\n                        <form securityc-form-focus-added-field name="objectForm" id="object-form" method="post" ng-submit="saveObject($event)" novalidate style="width:70%">\n\n                            <securityc-error-message></securityc-error-message>\n\n                            <securityc-form-resource-name></securityc-form-resource-name>\n\n                            <securityc-form-new-resource-field></securityc-form-new-resource-field>\n\n                            <securityc-permissions on-should-confirm="confirmRemoveArrayEntry" permissionsResource="resource"></securityc-permissions>\n\n                            <div class="formsubmit">\n                                <button id="opendistro_security.button.submit" ng-disabled="!endpointAndMethodEnabled(\'ACTIONGROUPS\', \'PUT\') || resource.reserved" class="kuiButton kuiButton--primary kuiButton--text" type="submit">Submit</button>\n                                <button id="opendistro_security.button.cancel" class="kuiButton kuiButton--basic kuiButton--text" type="button" ng-click="cancel()">Cancel</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <securityc-confirmation-modal ng-if="deleteFromEditModal.displayModal"\n            header="{{deleteFromEditModal.header}}"\n            body="{{deleteFromEditModal.body}}"\n            params="deleteFromEditModal.params"\n            on-confirm="deleteFromEditModal.onConfirm"\n            on-close="deleteFromEditModal.onClose"\n        ></securityc-confirmation-modal>\n    </div>\n</div>\n'},2714:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);__webpack_require__(592);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.controller("securityActionGroupsController",function($scope,$element,$route,backendActionGroups,kbnUrl){$scope.endpoint="ACTIONGROUPS";$scope.$parent.endpoint="ACTIONGROUPS";$scope.service=backendActionGroups;$scope.$parent.service=backendActionGroups;$scope.resources={};$scope.title="Manage Action Groups";$scope.service.list().then(function(response){$scope.resourcenames=Object.keys(response.data).sort();$scope.resourcenames.forEach(function(entry){$scope.resources[entry]=$scope.service.postFetch(response.data[entry])});$scope.numresources=response.total;$scope.loaded=true});$scope.sortTable={byKey:"resourcename",descending:false};$scope.onSortChange=function(key){if($scope.sortTable.byKey===key){$scope.sortTable.descending=!$scope.sortTable.descending}else{$scope.sortTable.byKey=key}}});app.controller("securityEditActionGroupsController",function($scope,$element,$route,$location,$routeParams,createNotifier,backendActionGroups,backendAPI,kbnUrl){$scope.endpoint="ACTIONGROUPS";$scope.$parent.endpoint="ACTIONGROUPS";$scope.service=backendActionGroups;$scope.$parent.service=backendActionGroups;$scope.resourcelabel="Action Group";$scope.loaded=false;$scope.resource={};$scope.resourcename="";$scope.resourcenames=[];$scope.isNew=false;$scope.query="";$scope.title=function(){return $scope.isNew?"New Action Groups":"Edit Action Group '"+$scope.resourcename+"'"};$scope.service.list().then(function(response){$scope.resourcenames=Object.keys(response.data);var actiongroupname=$routeParams.resourcename;if(actiongroupname){$scope.service.get(actiongroupname).then(function(response){$scope.resource=$scope.service.postFetch(response);$scope.resourcename=actiongroupname;if($location.path().indexOf("clone")==-1){$scope.isNew=false}else{$scope.resourcename=$scope.resourcename+" (COPY)";$scope.isNew=true;delete $scope.resource.reserved}})}else{$scope.resource=$scope.service.emptyModel();if($routeParams.name){$scope.resourcename=$routeParams.name}$scope.isNew=true}$scope.loaded=true});$scope.saveObject=function(event){if(event){event.preventDefault()}if($scope.resourcename.indexOf(".")!=-1){$scope.errorMessage="Please do not use dots in the action group name.";return}var form=$element.find('form[name="objectForm"]');if(form.hasClass("ng-invalid-required")){$scope.errorMessage="Please fill in all the required parameters.";return}if(!form.hasClass("ng-valid")){$scope.errorMessage="Please correct all errors and try again.";return}if($scope.isNew&&$scope.resourcenames.indexOf($scope.resourcename)!=-1){$scope.errorMessage="Action Group name already exists, please choose another one.";return}if($scope.resource.actiongroups.indexOf($scope.resourcename)!=-1){$scope.errorMessage='An Action Group can not reference itself, please remove entry with name "'+$scope.resourcename+'".';return}$scope.resource.actiongroups=backendAPI.cleanArray($scope.resource.actiongroups);$scope.resource.permissions=backendAPI.cleanArray($scope.resource.permissions);if($scope.resource.actiongroups.length==0&&$scope.resource.permissions.length==0){$scope.errorMessage="Please configure at least one Action Group or Permission";return}$scope.service.save($scope.resourcename,$scope.resource).then(function(){return kbnUrl.change("/actiongroups/")});$scope.errorMessage=null}})},2715:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _default=[{name:"cluster:admin/ingest/pipeline/delete"},{name:"cluster:admin/ingest/pipeline/get"},{name:"cluster:admin/ingest/pipeline/put"},{name:"cluster:admin/ingest/pipeline/simulate"},{name:"cluster:admin/ingest/processor/grok/get"},{name:"cluster:admin/reindex/rethrottle"},{name:"cluster:admin/repository/delete"},{name:"cluster:admin/repository/get"},{name:"cluster:admin/repository/put"},{name:"cluster:admin/repository/verify"},{name:"cluster:admin/reroute"},{name:"cluster:admin/script/delete"},{name:"cluster:admin/script/get"},{name:"cluster:admin/script/put"},{name:"cluster:admin/settings/update"},{name:"cluster:admin/snapshot/create"},{name:"cluster:admin/snapshot/delete"},{name:"cluster:admin/snapshot/get"},{name:"cluster:admin/snapshot/restore"},{name:"cluster:admin/snapshot/status"},{name:"cluster:admin/snapshot/status*"},{name:"cluster:admin/tasks/cancel"},{name:"cluster:admin/tasks/test"},{name:"cluster:admin/tasks/testunblock"},{name:"cluster:monitor/allocation/explain"},{name:"cluster:monitor/health"},{name:"cluster:monitor/main"},{name:"cluster:monitor/nodes/hot_threads"},{name:"cluster:monitor/nodes/info"},{name:"cluster:monitor/nodes/liveness"},{name:"cluster:monitor/nodes/stats"},{name:"cluster:monitor/nodes/usage"},{name:"cluster:monitor/remote/info"},{name:"cluster:monitor/state"},{name:"cluster:monitor/stats"},{name:"cluster:monitor/task"},{name:"cluster:monitor/task/get"},{name:"cluster:monitor/tasks/list"}];exports.default=_default;module.exports=exports.default},2716:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _default=[{name:"indices:admin/aliases"},{name:"indices:admin/aliases/exists"},{name:"indices:admin/aliases/get"},{name:"indices:admin/analyze"},{name:"indices:admin/cache/clear"},{name:"indices:admin/close"},{name:"indices:admin/create"},{name:"indices:admin/delete"},{name:"indices:admin/exists"},{name:"indices:admin/flush"},{name:"indices:admin/flush*"},{name:"indices:admin/forcemerge"},{name:"indices:admin/get"},{name:"indices:admin/mapping/put"},{name:"indices:admin/mappings/fields/get"},{name:"indices:admin/mappings/fields/get*"},{name:"indices:admin/mappings/get"},{name:"indices:admin/open"},{name:"indices:admin/refresh"},{name:"indices:admin/refresh*"},{name:"indices:admin/rollover"},{name:"indices:admin/seq_no/global_checkpoint_sync"},{name:"indices:admin/settings/update"},{name:"indices:admin/shards/search_shards"},{name:"indices:admin/shrink"},{name:"indices:admin/synced_flush"},{name:"indices:admin/template/delete"},{name:"indices:admin/template/get"},{name:"indices:admin/template/put"},{name:"indices:admin/types/exists"},{name:"indices:admin/upgrade"},{name:"indices:admin/validate/query"},{name:"indices:data/read/explain"},{name:"indices:data/read/field_caps"},{name:"indices:data/read/field_caps*"},{name:"indices:data/read/get"},{name:"indices:data/read/mget"},{name:"indices:data/read/mget*"},{name:"indices:data/read/msearch"},{name:"indices:data/read/msearch/template"},{name:"indices:data/read/mtv"},{name:"indices:data/read/mtv*"},{name:"indices:data/read/scroll"},{name:"indices:data/read/scroll/clear"},{name:"indices:data/read/search"},{name:"indices:data/read/search*"},{name:"indices:data/read/search/template"},{name:"indices:data/read/tv"},{name:"indices:data/write/bulk"},{name:"indices:data/write/bulk*"},{name:"indices:data/write/delete"},{name:"indices:data/write/delete/byquery"},{name:"indices:data/write/index"},{name:"indices:data/write/reindex"},{name:"indices:data/write/update"},{name:"indices:data/write/update/byquery"},{name:"indices:monitor/recovery"},{name:"indices:monitor/segments"},{name:"indices:monitor/settings/get"},{name:"indices:monitor/shard_stores"},{name:"indices:monitor/stats"},{name:"indices:monitor/upgrade"}];exports.default=_default;module.exports=exports.default},2717:function(module,exports,__webpack_require__){__webpack_require__(2718);module.exports="ui.select"},2718:function(module,exports){
/*!
 * ui-select
 * http://github.com/angular-ui/ui-select
 * Version: 0.19.8 - 2017-04-18T05:43:43.673Z
 * License: MIT
 */
(function(){"use strict";var KEY={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(e){var k=e.which;switch(k){case KEY.COMMAND:case KEY.SHIFT:case KEY.CTRL:case KEY.ALT:return true}if(e.metaKey||e.ctrlKey||e.altKey)return true;return false},isFunctionKey:function(k){k=k.which?k.which:k;return k>=112&&k<=123},isVerticalMovement:function(k){return~[KEY.UP,KEY.DOWN].indexOf(k)},isHorizontalMovement:function(k){return~[KEY.LEFT,KEY.RIGHT,KEY.BACKSPACE,KEY.DELETE].indexOf(k)},toSeparator:function(k){var sep={ENTER:"\n",TAB:"\t",SPACE:" "}[k];if(sep)return sep;return KEY[k]?undefined:k}};function isNil(value){return angular.isUndefined(value)||value===null}if(angular.element.prototype.querySelectorAll===undefined){angular.element.prototype.querySelectorAll=function(selector){return angular.element(this[0].querySelectorAll(selector))}}if(angular.element.prototype.closest===undefined){angular.element.prototype.closest=function(selector){var elem=this[0];var matchesSelector=elem.matches||elem.webkitMatchesSelector||elem.mozMatchesSelector||elem.msMatchesSelector;while(elem){if(matchesSelector.bind(elem)(selector)){return elem}else{elem=elem.parentElement}}return false}}var latestId=0;var uis=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:true,sortable:false,placeholder:"",refreshDelay:1e3,closeOnSelect:true,skipFocusser:false,dropdownPosition:"auto",removeSelected:true,resetSearchInput:true,generateId:function(){return latestId++},appendToBody:false,spinnerEnabled:false,spinnerClass:"glyphicon glyphicon-refresh ui-select-spin",backspaceReset:true}).service("uiSelectMinErr",function(){var minErr=angular.$$minErr("ui.select");return function(){var error=minErr.apply(this,arguments);var message=error.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(message)}}).directive("uisTranscludeAppend",function(){return{link:function(scope,element,attrs,ctrl,transclude){transclude(scope,function(clone){element.append(clone)})}}}).filter("highlight",function(){function escapeRegexp(queryToEscape){return(""+queryToEscape).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(matchItem,query){return query&&matchItem?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),'<span class="ui-select-highlight">$&</span>'):matchItem}}).factory("uisOffset",["$document","$window",function($document,$window){return function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}}}]);uis.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(uiSelectConfig,RepeatParser,uiSelectMinErr,$compile,$window){return{restrict:"EA",require:"^uiSelect",replace:true,transclude:true,templateUrl:function(tElement){tElement.addClass("ui-select-choices");var theme=tElement.parent().attr("theme")||uiSelectConfig.theme;return theme+"/choices.tpl.html"},compile:function(tElement,tAttrs){if(!tAttrs.repeat)throw uiSelectMinErr("repeat","Expected 'repeat' expression.");var groupByExp=tAttrs.groupBy;var groupFilterExp=tAttrs.groupFilter;if(groupByExp){var groups=tElement.querySelectorAll(".ui-select-choices-group");if(groups.length!==1)throw uiSelectMinErr("rows","Expected 1 .ui-select-choices-group but got '{0}'.",groups.length);groups.attr("ng-repeat",RepeatParser.getGroupNgRepeatExpression())}var parserResult=RepeatParser.parse(tAttrs.repeat);var choices=tElement.querySelectorAll(".ui-select-choices-row");if(choices.length!==1){throw uiSelectMinErr("rows","Expected 1 .ui-select-choices-row but got '{0}'.",choices.length)}choices.attr("ng-repeat",parserResult.repeatExpression(groupByExp)).attr("ng-if","$select.open");var rowsInner=tElement.querySelectorAll(".ui-select-choices-row-inner");if(rowsInner.length!==1){throw uiSelectMinErr("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",rowsInner.length)}rowsInner.attr("uis-transclude-append","");var clickTarget=$window.document.addEventListener?choices:rowsInner;clickTarget.attr("ng-click","$select.select("+parserResult.itemName+",$select.skipFocusser,$event)");return function link(scope,element,attrs,$select){$select.parseRepeatAttr(attrs.repeat,groupByExp,groupFilterExp);$select.disableChoiceExpression=attrs.uiDisableChoice;$select.onHighlightCallback=attrs.onHighlight;$select.minimumInputLength=parseInt(attrs.minimumInputLength)||0;$select.dropdownPosition=attrs.position?attrs.position.toLowerCase():uiSelectConfig.dropdownPosition;scope.$watch("$select.search",function(newValue){if(newValue&&!$select.open&&$select.multiple)$select.activate(false,true);$select.activeIndex=$select.tagging.isActivated?-1:0;if(!attrs.minimumInputLength||$select.search.length>=attrs.minimumInputLength){$select.refresh(attrs.refresh)}else{$select.items=[]}});attrs.$observe("refreshDelay",function(){var refreshDelay=scope.$eval(attrs.refreshDelay);$select.refreshDelay=refreshDelay!==undefined?refreshDelay:uiSelectConfig.refreshDelay});scope.$watch("$select.open",function(open){if(open){tElement.attr("role","listbox");$select.refresh(attrs.refresh)}else{element.removeAttr("role")}})}}}}]);uis.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","$$uisDebounce","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector","$window",function($scope,$element,$timeout,$filter,$$uisDebounce,RepeatParser,uiSelectMinErr,uiSelectConfig,$parse,$injector,$window){var ctrl=this;var EMPTY_SEARCH="";ctrl.placeholder=uiSelectConfig.placeholder;ctrl.searchEnabled=uiSelectConfig.searchEnabled;ctrl.sortable=uiSelectConfig.sortable;ctrl.refreshDelay=uiSelectConfig.refreshDelay;ctrl.paste=uiSelectConfig.paste;ctrl.resetSearchInput=uiSelectConfig.resetSearchInput;ctrl.refreshing=false;ctrl.spinnerEnabled=uiSelectConfig.spinnerEnabled;ctrl.spinnerClass=uiSelectConfig.spinnerClass;ctrl.removeSelected=uiSelectConfig.removeSelected;ctrl.closeOnSelect=true;ctrl.skipFocusser=false;ctrl.search=EMPTY_SEARCH;ctrl.activeIndex=0;ctrl.items=[];ctrl.open=false;ctrl.focus=false;ctrl.disabled=false;ctrl.selected=undefined;ctrl.dropdownPosition="auto";ctrl.focusser=undefined;ctrl.multiple=undefined;ctrl.disableChoiceExpression=undefined;ctrl.tagging={isActivated:false,fct:undefined};ctrl.taggingTokens={isActivated:false,tokens:undefined};ctrl.lockChoiceExpression=undefined;ctrl.clickTriggeredSelect=false;ctrl.$filter=$filter;ctrl.$element=$element;ctrl.$animate=function(){try{return $injector.get("$animate")}catch(err){return null}}();ctrl.searchInput=$element.querySelectorAll("input.ui-select-search");if(ctrl.searchInput.length!==1){throw uiSelectMinErr("searchInput","Expected 1 input.ui-select-search but got '{0}'.",ctrl.searchInput.length)}ctrl.isEmpty=function(){return isNil(ctrl.selected)||ctrl.selected===""||ctrl.multiple&&ctrl.selected.length===0};function _findIndex(collection,predicate,thisArg){if(collection.findIndex){return collection.findIndex(predicate,thisArg)}else{var list=Object(collection);var length=list.length>>>0;var value;for(var i=0;i<length;i++){value=list[i];if(predicate.call(thisArg,value,i,list)){return i}}return-1}}function _resetSearchInput(){if(ctrl.resetSearchInput){ctrl.search=EMPTY_SEARCH;if(ctrl.selected&&ctrl.items.length&&!ctrl.multiple){ctrl.activeIndex=_findIndex(ctrl.items,function(item){return angular.equals(this,item)},ctrl.selected)}}}function _groupsFilter(groups,groupNames){var i,j,result=[];for(i=0;i<groupNames.length;i++){for(j=0;j<groups.length;j++){if(groups[j].name==[groupNames[i]]){result.push(groups[j])}}}return result}ctrl.activate=function(initSearchValue,avoidReset){if(!ctrl.disabled&&!ctrl.open){if(!avoidReset)_resetSearchInput();$scope.$broadcast("uis:activate");ctrl.open=true;ctrl.activeIndex=ctrl.activeIndex>=ctrl.items.length?0:ctrl.activeIndex;if(ctrl.activeIndex===-1&&ctrl.taggingLabel!==false){ctrl.activeIndex=0}var container=$element.querySelectorAll(".ui-select-choices-content");var searchInput=$element.querySelectorAll(".ui-select-search");if(ctrl.$animate&&ctrl.$animate.on&&ctrl.$animate.enabled(container[0])){var animateHandler=function(elem,phase){if(phase==="start"&&ctrl.items.length===0){ctrl.$animate.off("removeClass",searchInput[0],animateHandler);$timeout(function(){ctrl.focusSearchInput(initSearchValue)})}else if(phase==="close"){ctrl.$animate.off("enter",container[0],animateHandler);$timeout(function(){ctrl.focusSearchInput(initSearchValue)})}};if(ctrl.items.length>0){ctrl.$animate.on("enter",container[0],animateHandler)}else{ctrl.$animate.on("removeClass",searchInput[0],animateHandler)}}else{$timeout(function(){ctrl.focusSearchInput(initSearchValue);if(!ctrl.tagging.isActivated&&ctrl.items.length>1){_ensureHighlightVisible()}})}}else if(ctrl.open&&!ctrl.searchEnabled){ctrl.close()}};ctrl.focusSearchInput=function(initSearchValue){ctrl.search=initSearchValue||ctrl.search;ctrl.searchInput[0].focus()};ctrl.findGroupByName=function(name){return ctrl.groups&&ctrl.groups.filter(function(group){return group.name===name})[0]};ctrl.parseRepeatAttr=function(repeatAttr,groupByExp,groupFilterExp){function updateGroups(items){var groupFn=$scope.$eval(groupByExp);ctrl.groups=[];angular.forEach(items,function(item){var groupName=angular.isFunction(groupFn)?groupFn(item):item[groupFn];var group=ctrl.findGroupByName(groupName);if(group){group.items.push(item)}else{ctrl.groups.push({name:groupName,items:[item]})}});if(groupFilterExp){var groupFilterFn=$scope.$eval(groupFilterExp);if(angular.isFunction(groupFilterFn)){ctrl.groups=groupFilterFn(ctrl.groups)}else if(angular.isArray(groupFilterFn)){ctrl.groups=_groupsFilter(ctrl.groups,groupFilterFn)}}ctrl.items=[];ctrl.groups.forEach(function(group){ctrl.items=ctrl.items.concat(group.items)})}function setPlainItems(items){ctrl.items=items||[]}ctrl.setItemsFn=groupByExp?updateGroups:setPlainItems;ctrl.parserResult=RepeatParser.parse(repeatAttr);ctrl.isGrouped=!!groupByExp;ctrl.itemProperty=ctrl.parserResult.itemName;var originalSource=ctrl.parserResult.source;var createArrayFromObject=function(){var origSrc=originalSource($scope);$scope.$uisSource=Object.keys(origSrc).map(function(v){var result={};result[ctrl.parserResult.keyName]=v;result.value=origSrc[v];return result})};if(ctrl.parserResult.keyName){createArrayFromObject();ctrl.parserResult.source=$parse("$uisSource"+ctrl.parserResult.filters);$scope.$watch(originalSource,function(newVal,oldVal){if(newVal!==oldVal)createArrayFromObject()},true)}ctrl.refreshItems=function(data){data=data||ctrl.parserResult.source($scope);var selectedItems=ctrl.selected;if(ctrl.isEmpty()||angular.isArray(selectedItems)&&!selectedItems.length||!ctrl.multiple||!ctrl.removeSelected){ctrl.setItemsFn(data)}else{if(data!==undefined&&data!==null){var filteredItems=data.filter(function(i){return angular.isArray(selectedItems)?selectedItems.every(function(selectedItem){return!angular.equals(i,selectedItem)}):!angular.equals(i,selectedItems)});ctrl.setItemsFn(filteredItems)}}if(ctrl.dropdownPosition==="auto"||ctrl.dropdownPosition==="up"){$scope.calculateDropdownPos()}$scope.$broadcast("uis:refresh")};$scope.$watchCollection(ctrl.parserResult.source,function(items){if(items===undefined||items===null){ctrl.items=[]}else{if(!angular.isArray(items)){throw uiSelectMinErr("items","Expected an array but got '{0}'.",items)}else{ctrl.refreshItems(items);if(angular.isDefined(ctrl.ngModel.$modelValue)){ctrl.ngModel.$modelValue=null}}}})};var _refreshDelayPromise;ctrl.refresh=function(refreshAttr){if(refreshAttr!==undefined){if(_refreshDelayPromise){$timeout.cancel(_refreshDelayPromise)}_refreshDelayPromise=$timeout(function(){if($scope.$select.search.length>=$scope.$select.minimumInputLength){var refreshPromise=$scope.$eval(refreshAttr);if(refreshPromise&&angular.isFunction(refreshPromise.then)&&!ctrl.refreshing){ctrl.refreshing=true;refreshPromise.finally(function(){ctrl.refreshing=false})}}},ctrl.refreshDelay)}};ctrl.isActive=function(itemScope){if(!ctrl.open){return false}var itemIndex=ctrl.items.indexOf(itemScope[ctrl.itemProperty]);var isActive=itemIndex==ctrl.activeIndex;if(!isActive||itemIndex<0){return false}if(isActive&&!angular.isUndefined(ctrl.onHighlightCallback)){itemScope.$eval(ctrl.onHighlightCallback)}return isActive};var _isItemSelected=function(item){return ctrl.selected&&angular.isArray(ctrl.selected)&&ctrl.selected.filter(function(selection){return angular.equals(selection,item)}).length>0};var disabledItems=[];function _updateItemDisabled(item,isDisabled){var disabledItemIndex=disabledItems.indexOf(item);if(isDisabled&&disabledItemIndex===-1){disabledItems.push(item)}if(!isDisabled&&disabledItemIndex>-1){disabledItems.splice(disabledItemIndex,1)}}function _isItemDisabled(item){return disabledItems.indexOf(item)>-1}ctrl.isDisabled=function(itemScope){if(!ctrl.open)return;var item=itemScope[ctrl.itemProperty];var itemIndex=ctrl.items.indexOf(item);var isDisabled=false;if(itemIndex>=0&&(angular.isDefined(ctrl.disableChoiceExpression)||ctrl.multiple)){if(item.isTag)return false;if(ctrl.multiple){isDisabled=_isItemSelected(item)}if(!isDisabled&&angular.isDefined(ctrl.disableChoiceExpression)){isDisabled=!!itemScope.$eval(ctrl.disableChoiceExpression)}_updateItemDisabled(item,isDisabled)}return isDisabled};ctrl.select=function(item,skipFocusser,$event){if(isNil(item)||!_isItemDisabled(item)){if(!ctrl.items&&!ctrl.search&&!ctrl.tagging.isActivated)return;if(!item||!_isItemDisabled(item)){ctrl.clickTriggeredSelect=false;if($event&&($event.type==="click"||$event.type==="touchend")&&item)ctrl.clickTriggeredSelect=true;if(ctrl.tagging.isActivated&&ctrl.clickTriggeredSelect===false){if(ctrl.taggingLabel===false){if(ctrl.activeIndex<0){if(item===undefined){item=ctrl.tagging.fct!==undefined?ctrl.tagging.fct(ctrl.search):ctrl.search}if(!item||angular.equals(ctrl.items[0],item)){return}}else{item=ctrl.items[ctrl.activeIndex]}}else{if(ctrl.activeIndex===0){if(item===undefined)return;if(ctrl.tagging.fct!==undefined&&typeof item==="string"){item=ctrl.tagging.fct(item);if(!item)return}else if(typeof item==="string"){item=item.replace(ctrl.taggingLabel,"").trim()}}}if(_isItemSelected(item)){ctrl.close(skipFocusser);return}}_resetSearchInput();$scope.$broadcast("uis:select",item);if(ctrl.closeOnSelect){ctrl.close(skipFocusser)}}}};ctrl.close=function(skipFocusser){if(!ctrl.open)return;if(ctrl.ngModel&&ctrl.ngModel.$setTouched)ctrl.ngModel.$setTouched();ctrl.open=false;_resetSearchInput();$scope.$broadcast("uis:close",skipFocusser)};ctrl.setFocus=function(){if(!ctrl.focus)ctrl.focusInput[0].focus()};ctrl.clear=function($event){ctrl.select(null);$event.stopPropagation();$timeout(function(){ctrl.focusser[0].focus()},0,false)};ctrl.toggle=function(e){if(ctrl.open){ctrl.close();e.preventDefault();e.stopPropagation()}else{ctrl.activate()}};ctrl.isLocked=function(){return false};$scope.$watch(function(){return angular.isDefined(ctrl.lockChoiceExpression)&&ctrl.lockChoiceExpression!==""},_initaliseLockedChoices);function _initaliseLockedChoices(doInitalise){if(!doInitalise)return;var lockedItems=[];function _updateItemLocked(item,isLocked){var lockedItemIndex=lockedItems.indexOf(item);if(isLocked&&lockedItemIndex===-1){lockedItems.push(item)}if(!isLocked&&lockedItemIndex>-1){lockedItems.splice(lockedItemIndex,1)}}function _isItemlocked(item){return lockedItems.indexOf(item)>-1}ctrl.isLocked=function(itemScope,itemIndex){var isLocked=false,item=ctrl.selected[itemIndex];if(item){if(itemScope){isLocked=!!itemScope.$eval(ctrl.lockChoiceExpression);_updateItemLocked(item,isLocked)}else{isLocked=_isItemlocked(item)}}return isLocked}}var sizeWatch=null;var updaterScheduled=false;ctrl.sizeSearchInput=function(){var input=ctrl.searchInput[0],container=ctrl.$element[0],calculateContainerWidth=function(){return container.clientWidth*!!input.offsetParent},updateIfVisible=function(containerWidth){if(containerWidth===0){return false}var inputWidth=containerWidth-input.offsetLeft;if(inputWidth<50)inputWidth=containerWidth;ctrl.searchInput.css("width",inputWidth+"px");return true};ctrl.searchInput.css("width","10px");$timeout(function(){if(sizeWatch===null&&!updateIfVisible(calculateContainerWidth())){sizeWatch=$scope.$watch(function(){if(!updaterScheduled){updaterScheduled=true;$scope.$$postDigest(function(){updaterScheduled=false;if(updateIfVisible(calculateContainerWidth())){sizeWatch();sizeWatch=null}})}},angular.noop)}})};function _handleDropDownSelection(key){var processed=true;switch(key){case KEY.DOWN:if(!ctrl.open&&ctrl.multiple)ctrl.activate(false,true);else if(ctrl.activeIndex<ctrl.items.length-1){var idx=++ctrl.activeIndex;while(_isItemDisabled(ctrl.items[idx])&&idx<ctrl.items.length){ctrl.activeIndex=++idx}}break;case KEY.UP:var minActiveIndex=ctrl.search.length===0&&ctrl.tagging.isActivated?-1:0;if(!ctrl.open&&ctrl.multiple)ctrl.activate(false,true);else if(ctrl.activeIndex>minActiveIndex){var idxmin=--ctrl.activeIndex;while(_isItemDisabled(ctrl.items[idxmin])&&idxmin>minActiveIndex){ctrl.activeIndex=--idxmin}}break;case KEY.TAB:if(!ctrl.multiple||ctrl.open)ctrl.select(ctrl.items[ctrl.activeIndex],true);break;case KEY.ENTER:if(ctrl.open&&(ctrl.tagging.isActivated||ctrl.activeIndex>=0)){ctrl.select(ctrl.items[ctrl.activeIndex],ctrl.skipFocusser)}else{ctrl.activate(false,true)}break;case KEY.ESC:ctrl.close();break;default:processed=false}return processed}ctrl.searchInput.on("keydown",function(e){var key=e.which;if(~[KEY.ENTER,KEY.ESC].indexOf(key)){e.preventDefault();e.stopPropagation()}$scope.$apply(function(){var tagged=false;if(ctrl.items.length>0||ctrl.tagging.isActivated){if(!_handleDropDownSelection(key)&&!ctrl.searchEnabled){e.preventDefault();e.stopPropagation()}if(ctrl.taggingTokens.isActivated){for(var i=0;i<ctrl.taggingTokens.tokens.length;i++){if(ctrl.taggingTokens.tokens[i]===KEY.MAP[e.keyCode]){if(ctrl.search.length>0){tagged=true}}}if(tagged){$timeout(function(){ctrl.searchInput.triggerHandler("tagged");var newItem=ctrl.search.replace(KEY.MAP[e.keyCode],"").trim();if(ctrl.tagging.fct){newItem=ctrl.tagging.fct(newItem)}if(newItem)ctrl.select(newItem,true)})}}}});if(KEY.isVerticalMovement(key)&&ctrl.items.length>0){_ensureHighlightVisible()}if(key===KEY.ENTER||key===KEY.ESC){e.preventDefault();e.stopPropagation()}});ctrl.searchInput.on("paste",function(e){var data;if(window.clipboardData&&window.clipboardData.getData){data=window.clipboardData.getData("Text")}else{data=(e.originalEvent||e).clipboardData.getData("text/plain")}data=ctrl.search+data;if(data&&data.length>0){if(ctrl.taggingTokens.isActivated){var items=[];for(var i=0;i<ctrl.taggingTokens.tokens.length;i++){var separator=KEY.toSeparator(ctrl.taggingTokens.tokens[i])||ctrl.taggingTokens.tokens[i];if(data.indexOf(separator)>-1){items=data.split(separator);break}}if(items.length===0){items=[data]}var oldsearch=ctrl.search;angular.forEach(items,function(item){var newItem=ctrl.tagging.fct?ctrl.tagging.fct(item):item;if(newItem){ctrl.select(newItem,true)}});ctrl.search=oldsearch||EMPTY_SEARCH;e.preventDefault();e.stopPropagation()}else if(ctrl.paste){ctrl.paste(data);ctrl.search=EMPTY_SEARCH;e.preventDefault();e.stopPropagation()}}});ctrl.searchInput.on("tagged",function(){$timeout(function(){_resetSearchInput()})});function _ensureHighlightVisible(){var container=$element.querySelectorAll(".ui-select-choices-content");var choices=container.querySelectorAll(".ui-select-choices-row");if(choices.length<1){throw uiSelectMinErr("choices","Expected multiple .ui-select-choices-row but got '{0}'.",choices.length)}if(ctrl.activeIndex<0){return}var highlighted=choices[ctrl.activeIndex];var posY=highlighted.offsetTop+highlighted.clientHeight-container[0].scrollTop;var height=container[0].offsetHeight;if(posY>height){container[0].scrollTop+=posY-height}else if(posY<highlighted.clientHeight){if(ctrl.isGrouped&&ctrl.activeIndex===0)container[0].scrollTop=0;else container[0].scrollTop-=highlighted.clientHeight-posY}}var onResize=$$uisDebounce(function(){ctrl.sizeSearchInput()},50);angular.element($window).bind("resize",onResize);$scope.$on("$destroy",function(){ctrl.searchInput.off("keyup keydown tagged blur paste");angular.element($window).off("resize",onResize)});$scope.$watch("$select.activeIndex",function(activeIndex){if(activeIndex)$element.find("input").attr("aria-activedescendant","ui-select-choices-row-"+ctrl.generatedId+"-"+activeIndex)});$scope.$watch("$select.open",function(open){if(!open)$element.find("input").removeAttr("aria-activedescendant")})}]);uis.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function($document,uiSelectConfig,uiSelectMinErr,uisOffset,$compile,$parse,$timeout){return{restrict:"EA",templateUrl:function(tElement,tAttrs){var theme=tAttrs.theme||uiSelectConfig.theme;return theme+(angular.isDefined(tAttrs.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:true,transclude:true,require:["uiSelect","^ngModel"],scope:true,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(tElement,tAttrs){var match=/{(.*)}\s*{(.*)}/.exec(tAttrs.ngClass);if(match){var combined="{"+match[1]+", "+match[2]+"}";tAttrs.ngClass=combined;tElement.attr("ng-class",combined)}if(angular.isDefined(tAttrs.multiple))tElement.append("<ui-select-multiple/>").removeAttr("multiple");else tElement.append("<ui-select-single/>");if(tAttrs.inputId)tElement.querySelectorAll("input.ui-select-search")[0].id=tAttrs.inputId;return function(scope,element,attrs,ctrls,transcludeFn){var $select=ctrls[0];var ngModel=ctrls[1];$select.generatedId=uiSelectConfig.generateId();$select.baseTitle=attrs.title||"Select box";$select.focusserTitle=$select.baseTitle+" focus";$select.focusserId="focusser-"+$select.generatedId;$select.closeOnSelect=function(){if(angular.isDefined(attrs.closeOnSelect)){return $parse(attrs.closeOnSelect)()}else{return uiSelectConfig.closeOnSelect}}();scope.$watch("skipFocusser",function(){var skipFocusser=scope.$eval(attrs.skipFocusser);$select.skipFocusser=skipFocusser!==undefined?skipFocusser:uiSelectConfig.skipFocusser});$select.onSelectCallback=$parse(attrs.onSelect);$select.onRemoveCallback=$parse(attrs.onRemove);$select.ngModel=ngModel;$select.choiceGrouped=function(group){return $select.isGrouped&&group&&group.name};if(attrs.tabindex){attrs.$observe("tabindex",function(value){$select.focusInput.attr("tabindex",value);element.removeAttr("tabindex")})}scope.$watch(function(){return scope.$eval(attrs.searchEnabled)},function(newVal){$select.searchEnabled=newVal!==undefined?newVal:uiSelectConfig.searchEnabled});scope.$watch("sortable",function(){var sortable=scope.$eval(attrs.sortable);$select.sortable=sortable!==undefined?sortable:uiSelectConfig.sortable});attrs.$observe("backspaceReset",function(){var backspaceReset=scope.$eval(attrs.backspaceReset);$select.backspaceReset=backspaceReset!==undefined?backspaceReset:true});attrs.$observe("limit",function(){$select.limit=angular.isDefined(attrs.limit)?parseInt(attrs.limit,10):undefined});scope.$watch("removeSelected",function(){var removeSelected=scope.$eval(attrs.removeSelected);$select.removeSelected=removeSelected!==undefined?removeSelected:uiSelectConfig.removeSelected});attrs.$observe("disabled",function(){$select.disabled=attrs.disabled!==undefined?attrs.disabled:false});attrs.$observe("resetSearchInput",function(){var resetSearchInput=scope.$eval(attrs.resetSearchInput);$select.resetSearchInput=resetSearchInput!==undefined?resetSearchInput:true});attrs.$observe("paste",function(){$select.paste=scope.$eval(attrs.paste)});attrs.$observe("tagging",function(){if(attrs.tagging!==undefined){var taggingEval=scope.$eval(attrs.tagging);$select.tagging={isActivated:true,fct:taggingEval!==true?taggingEval:undefined}}else{$select.tagging={isActivated:false,fct:undefined}}});attrs.$observe("taggingLabel",function(){if(attrs.tagging!==undefined){if(attrs.taggingLabel==="false"){$select.taggingLabel=false}else{$select.taggingLabel=attrs.taggingLabel!==undefined?attrs.taggingLabel:"(new)"}}});attrs.$observe("taggingTokens",function(){if(attrs.tagging!==undefined){var tokens=attrs.taggingTokens!==undefined?attrs.taggingTokens.split("|"):[",","ENTER"];$select.taggingTokens={isActivated:true,tokens:tokens}}});attrs.$observe("spinnerEnabled",function(){var spinnerEnabled=scope.$eval(attrs.spinnerEnabled);$select.spinnerEnabled=spinnerEnabled!==undefined?spinnerEnabled:uiSelectConfig.spinnerEnabled});attrs.$observe("spinnerClass",function(){var spinnerClass=attrs.spinnerClass;$select.spinnerClass=spinnerClass!==undefined?attrs.spinnerClass:uiSelectConfig.spinnerClass});if(angular.isDefined(attrs.autofocus)){$timeout(function(){$select.setFocus()})}if(angular.isDefined(attrs.focusOn)){scope.$on(attrs.focusOn,function(){$timeout(function(){$select.setFocus()})})}function onDocumentClick(e){if(!$select.open)return;var contains=false;if(window.jQuery){contains=window.jQuery.contains(element[0],e.target)}else{contains=element[0].contains(e.target)}if(!contains&&!$select.clickTriggeredSelect){var skipFocusser;if(!$select.skipFocusser){var focusableControls=["input","button","textarea","select"];var targetController=angular.element(e.target).controller("uiSelect");skipFocusser=targetController&&targetController!==$select;if(!skipFocusser)skipFocusser=~focusableControls.indexOf(e.target.tagName.toLowerCase())}else{skipFocusser=true}$select.close(skipFocusser);scope.$digest()}$select.clickTriggeredSelect=false}$document.on("click",onDocumentClick);scope.$on("$destroy",function(){$document.off("click",onDocumentClick)});transcludeFn(scope,function(clone){var transcluded=angular.element("<div>").append(clone);var transcludedMatch=transcluded.querySelectorAll(".ui-select-match");transcludedMatch.removeAttr("ui-select-match");transcludedMatch.removeAttr("data-ui-select-match");if(transcludedMatch.length!==1){throw uiSelectMinErr("transcluded","Expected 1 .ui-select-match but got '{0}'.",transcludedMatch.length)}element.querySelectorAll(".ui-select-match").replaceWith(transcludedMatch);var transcludedChoices=transcluded.querySelectorAll(".ui-select-choices");transcludedChoices.removeAttr("ui-select-choices");transcludedChoices.removeAttr("data-ui-select-choices");if(transcludedChoices.length!==1){throw uiSelectMinErr("transcluded","Expected 1 .ui-select-choices but got '{0}'.",transcludedChoices.length)}element.querySelectorAll(".ui-select-choices").replaceWith(transcludedChoices);var transcludedNoChoice=transcluded.querySelectorAll(".ui-select-no-choice");transcludedNoChoice.removeAttr("ui-select-no-choice");transcludedNoChoice.removeAttr("data-ui-select-no-choice");if(transcludedNoChoice.length==1){element.querySelectorAll(".ui-select-no-choice").replaceWith(transcludedNoChoice)}});var appendToBody=scope.$eval(attrs.appendToBody);if(appendToBody!==undefined?appendToBody:uiSelectConfig.appendToBody){scope.$watch("$select.open",function(isOpen){if(isOpen){positionDropdown()}else{resetDropdown()}});scope.$on("$destroy",function(){resetDropdown()})}var placeholder=null,originalWidth="";function positionDropdown(){var offset=uisOffset(element);placeholder=angular.element('<div class="ui-select-placeholder"></div>');placeholder[0].style.width=offset.width+"px";placeholder[0].style.height=offset.height+"px";element.after(placeholder);originalWidth=element[0].style.width;$document.find("body").append(element);element[0].style.position="absolute";element[0].style.left=offset.left+"px";element[0].style.top=offset.top+"px";element[0].style.width=offset.width+"px"}function resetDropdown(){if(placeholder===null){return}placeholder.replaceWith(element);placeholder=null;element[0].style.position="";element[0].style.left="";element[0].style.top="";element[0].style.width=originalWidth;$select.setFocus()}var dropdown=null,directionUpClassName="direction-up";scope.$watch("$select.open",function(){if($select.dropdownPosition==="auto"||$select.dropdownPosition==="up"){scope.calculateDropdownPos()}});var setDropdownPosUp=function(offset,offsetDropdown){offset=offset||uisOffset(element);offsetDropdown=offsetDropdown||uisOffset(dropdown);dropdown[0].style.position="absolute";dropdown[0].style.top=offsetDropdown.height*-1+"px";element.addClass(directionUpClassName)};var setDropdownPosDown=function(offset,offsetDropdown){element.removeClass(directionUpClassName);offset=offset||uisOffset(element);offsetDropdown=offsetDropdown||uisOffset(dropdown);dropdown[0].style.position="";dropdown[0].style.top=""};var calculateDropdownPosAfterAnimation=function(){$timeout(function(){if($select.dropdownPosition==="up"){setDropdownPosUp()}else{element.removeClass(directionUpClassName);var offset=uisOffset(element);var offsetDropdown=uisOffset(dropdown);var scrollTop=$document[0].documentElement.scrollTop||$document[0].body.scrollTop;if(offset.top+offset.height+offsetDropdown.height>scrollTop+$document[0].documentElement.clientHeight){setDropdownPosUp(offset,offsetDropdown)}else{setDropdownPosDown(offset,offsetDropdown)}}dropdown[0].style.opacity=1})};var opened=false;scope.calculateDropdownPos=function(){if($select.open){dropdown=angular.element(element).querySelectorAll(".ui-select-dropdown");if(dropdown.length===0){return}if($select.search===""&&!opened){dropdown[0].style.opacity=0;opened=true}if(!uisOffset(dropdown).height&&$select.$animate&&$select.$animate.on&&$select.$animate.enabled(dropdown)){var needsCalculated=true;$select.$animate.on("enter",dropdown,function(elem,phase){if(phase==="close"&&needsCalculated){calculateDropdownPosAfterAnimation();needsCalculated=false}})}else{calculateDropdownPosAfterAnimation()}}else{if(dropdown===null||dropdown.length===0){return}dropdown[0].style.opacity=0;dropdown[0].style.position="";dropdown[0].style.top="";element.removeClass(directionUpClassName)}}}}}}]);uis.directive("uiSelectMatch",["uiSelectConfig",function(uiSelectConfig){return{restrict:"EA",require:"^uiSelect",replace:true,transclude:true,templateUrl:function(tElement){tElement.addClass("ui-select-match");var parent=tElement.parent();var theme=getAttribute(parent,"theme")||uiSelectConfig.theme;var multi=angular.isDefined(getAttribute(parent,"multiple"));return theme+(multi?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(scope,element,attrs,$select){$select.lockChoiceExpression=attrs.uiLockChoice;attrs.$observe("placeholder",function(placeholder){$select.placeholder=placeholder!==undefined?placeholder:uiSelectConfig.placeholder});function setAllowClear(allow){$select.allowClear=angular.isDefined(allow)?allow===""?true:allow.toLowerCase()==="true":false}attrs.$observe("allowClear",setAllowClear);setAllowClear(attrs.allowClear);if($select.multiple){$select.sizeSearchInput()}}};function getAttribute(elem,attribute){if(elem[0].hasAttribute(attribute))return elem.attr(attribute);if(elem[0].hasAttribute("data-"+attribute))return elem.attr("data-"+attribute);if(elem[0].hasAttribute("x-"+attribute))return elem.attr("x-"+attribute)}}]);uis.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(uiSelectMinErr,$timeout){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function($scope,$timeout){var ctrl=this,$select=$scope.$select,ngModel;if(angular.isUndefined($select.selected))$select.selected=[];$scope.$evalAsync(function(){ngModel=$scope.ngModel});ctrl.activeMatchIndex=-1;ctrl.updateModel=function(){ngModel.$setViewValue(Date.now());ctrl.refreshComponent()};ctrl.refreshComponent=function(){if($select.refreshItems){$select.refreshItems()}if($select.sizeSearchInput){$select.sizeSearchInput()}};ctrl.removeChoice=function(index){if($select.isLocked(null,index))return false;var removedChoice=$select.selected[index];var locals={};locals[$select.parserResult.itemName]=removedChoice;$select.selected.splice(index,1);ctrl.activeMatchIndex=-1;$select.sizeSearchInput();$timeout(function(){$select.onRemoveCallback($scope,{$item:removedChoice,$model:$select.parserResult.modelMapper($scope,locals)})});ctrl.updateModel();return true};ctrl.getPlaceholder=function(){if($select.selected&&$select.selected.length)return;return $select.placeholder}}],controllerAs:"$selectMultiple",link:function(scope,element,attrs,ctrls){var $select=ctrls[0];var ngModel=scope.ngModel=ctrls[1];var $selectMultiple=scope.$selectMultiple;$select.multiple=true;$select.focusInput=$select.searchInput;ngModel.$isEmpty=function(value){return!value||value.length===0};ngModel.$parsers.unshift(function(){var locals={},result,resultMultiple=[];for(var j=$select.selected.length-1;j>=0;j--){locals={};locals[$select.parserResult.itemName]=$select.selected[j];result=$select.parserResult.modelMapper(scope,locals);resultMultiple.unshift(result)}return resultMultiple});ngModel.$formatters.unshift(function(inputValue){var data=$select.parserResult&&$select.parserResult.source(scope,{$select:{search:""}}),locals={},result;if(!data)return inputValue;var resultMultiple=[];var checkFnMultiple=function(list,value){if(!list||!list.length)return;for(var p=list.length-1;p>=0;p--){locals[$select.parserResult.itemName]=list[p];result=$select.parserResult.modelMapper(scope,locals);if($select.parserResult.trackByExp){var propsItemNameMatches=/(\w*)\./.exec($select.parserResult.trackByExp);var matches=/\.([^\s]+)/.exec($select.parserResult.trackByExp);if(propsItemNameMatches&&propsItemNameMatches.length>0&&propsItemNameMatches[1]==$select.parserResult.itemName){if(matches&&matches.length>0&&result[matches[1]]==value[matches[1]]){resultMultiple.unshift(list[p]);return true}}}if(angular.equals(result,value)){resultMultiple.unshift(list[p]);return true}}return false};if(!inputValue)return resultMultiple;for(var k=inputValue.length-1;k>=0;k--){if(!checkFnMultiple($select.selected,inputValue[k])){if(!checkFnMultiple(data,inputValue[k])){resultMultiple.unshift(inputValue[k])}}}return resultMultiple});scope.$watchCollection(function(){return ngModel.$modelValue},function(newValue,oldValue){if(oldValue!=newValue){if(angular.isDefined(ngModel.$modelValue)){ngModel.$modelValue=null}$selectMultiple.refreshComponent()}});ngModel.$render=function(){if(!angular.isArray(ngModel.$viewValue)){if(isNil(ngModel.$viewValue)){ngModel.$viewValue=[]}else{throw uiSelectMinErr("multiarr","Expected model value to be array but got '{0}'",ngModel.$viewValue)}}$select.selected=ngModel.$viewValue;$selectMultiple.refreshComponent();scope.$evalAsync()};scope.$on("uis:select",function(event,item){if($select.selected.length>=$select.limit){return}$select.selected.push(item);var locals={};locals[$select.parserResult.itemName]=item;$timeout(function(){$select.onSelectCallback(scope,{$item:item,$model:$select.parserResult.modelMapper(scope,locals)})});$selectMultiple.updateModel()});scope.$on("uis:activate",function(){$selectMultiple.activeMatchIndex=-1});scope.$watch("$select.disabled",function(newValue,oldValue){if(oldValue&&!newValue)$select.sizeSearchInput()});$select.searchInput.on("keydown",function(e){var key=e.which;scope.$apply(function(){var processed=false;if(KEY.isHorizontalMovement(key)){processed=_handleMatchSelection(key)}if(processed&&key!=KEY.TAB){e.preventDefault();e.stopPropagation()}})});function _getCaretPosition(el){if(angular.isNumber(el.selectionStart))return el.selectionStart;else return el.value.length}function _handleMatchSelection(key){var caretPosition=_getCaretPosition($select.searchInput[0]),length=$select.selected.length,first=0,last=length-1,curr=$selectMultiple.activeMatchIndex,next=$selectMultiple.activeMatchIndex+1,prev=$selectMultiple.activeMatchIndex-1,newIndex=curr;if(caretPosition>0||$select.search.length&&key==KEY.RIGHT)return false;$select.close();function getNewActiveMatchIndex(){switch(key){case KEY.LEFT:if(~$selectMultiple.activeMatchIndex)return prev;else return last;break;case KEY.RIGHT:if(!~$selectMultiple.activeMatchIndex||curr===last){$select.activate();return false}else return next;break;case KEY.BACKSPACE:if(~$selectMultiple.activeMatchIndex){if($selectMultiple.removeChoice(curr)){return prev}else{return curr}}else{return last}break;case KEY.DELETE:if(~$selectMultiple.activeMatchIndex){$selectMultiple.removeChoice($selectMultiple.activeMatchIndex);return curr}else return false}}newIndex=getNewActiveMatchIndex();if(!$select.selected.length||newIndex===false)$selectMultiple.activeMatchIndex=-1;else $selectMultiple.activeMatchIndex=Math.min(last,Math.max(first,newIndex));return true}$select.searchInput.on("keyup",function(e){if(!KEY.isVerticalMovement(e.which)){scope.$evalAsync(function(){$select.activeIndex=$select.taggingLabel===false?-1:0})}if($select.tagging.isActivated&&$select.search.length>0){if(e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.ESC||KEY.isVerticalMovement(e.which)){return}$select.activeIndex=$select.taggingLabel===false?-1:0;if($select.taggingLabel===false)return;var items=angular.copy($select.items);var stashArr=angular.copy($select.items);var newItem;var item;var hasTag=false;var dupeIndex=-1;var tagItems;var tagItem;if($select.tagging.fct!==undefined){tagItems=$select.$filter("filter")(items,{isTag:true});if(tagItems.length>0){tagItem=tagItems[0]}if(items.length>0&&tagItem){hasTag=true;items=items.slice(1,items.length);stashArr=stashArr.slice(1,stashArr.length)}newItem=$select.tagging.fct($select.search);if(stashArr.some(function(origItem){return angular.equals(origItem,newItem)})||$select.selected.some(function(origItem){return angular.equals(origItem,newItem)})){scope.$evalAsync(function(){$select.activeIndex=0;$select.items=items});return}if(newItem)newItem.isTag=true}else{tagItems=$select.$filter("filter")(items,function(item){return item.match($select.taggingLabel)});if(tagItems.length>0){tagItem=tagItems[0]}item=items[0];if(item!==undefined&&items.length>0&&tagItem){hasTag=true;items=items.slice(1,items.length);stashArr=stashArr.slice(1,stashArr.length)}newItem=$select.search+" "+$select.taggingLabel;if(_findApproxDupe($select.selected,$select.search)>-1){return}if(_findCaseInsensitiveDupe(stashArr.concat($select.selected))){if(hasTag){items=stashArr;scope.$evalAsync(function(){$select.activeIndex=0;$select.items=items})}return}if(_findCaseInsensitiveDupe(stashArr)){if(hasTag){$select.items=stashArr.slice(1,stashArr.length)}return}}if(hasTag)dupeIndex=_findApproxDupe($select.selected,newItem);if(dupeIndex>-1){items=items.slice(dupeIndex+1,items.length-1)}else{items=[];if(newItem)items.push(newItem);items=items.concat(stashArr)}scope.$evalAsync(function(){$select.activeIndex=0;$select.items=items;if($select.isGrouped){var itemsWithoutTag=newItem?items.slice(1):items;$select.setItemsFn(itemsWithoutTag);if(newItem){$select.items.unshift(newItem);$select.groups.unshift({name:"",items:[newItem],tagging:true})}}})}});function _findCaseInsensitiveDupe(arr){if(arr===undefined||$select.search===undefined){return false}var hasDupe=arr.filter(function(origItem){if($select.search.toUpperCase()===undefined||origItem===undefined){return false}return origItem.toUpperCase()===$select.search.toUpperCase()}).length>0;return hasDupe}function _findApproxDupe(haystack,needle){var dupeIndex=-1;if(angular.isArray(haystack)){var tempArr=angular.copy(haystack);for(var i=0;i<tempArr.length;i++){if($select.tagging.fct===undefined){if(tempArr[i]+" "+$select.taggingLabel===needle){dupeIndex=i}}else{var mockObj=tempArr[i];if(angular.isObject(mockObj)){mockObj.isTag=true}if(angular.equals(mockObj,needle)){dupeIndex=i}}}}return dupeIndex}$select.searchInput.on("blur",function(){$timeout(function(){$selectMultiple.activeMatchIndex=-1})})}}}]);uis.directive("uiSelectNoChoice",["uiSelectConfig",function(uiSelectConfig){return{restrict:"EA",require:"^uiSelect",replace:true,transclude:true,templateUrl:function(tElement){tElement.addClass("ui-select-no-choice");var theme=tElement.parent().attr("theme")||uiSelectConfig.theme;return theme+"/no-choice.tpl.html"}}}]);uis.directive("uiSelectSingle",["$timeout","$compile",function($timeout,$compile){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(scope,element,attrs,ctrls){var $select=ctrls[0];var ngModel=ctrls[1];ngModel.$parsers.unshift(function(inputValue){if(isNil(inputValue)){return inputValue}var locals={},result;locals[$select.parserResult.itemName]=inputValue;result=$select.parserResult.modelMapper(scope,locals);return result});ngModel.$formatters.unshift(function(inputValue){if(isNil(inputValue)){return inputValue}var data=$select.parserResult&&$select.parserResult.source(scope,{$select:{search:""}}),locals={},result;if(data){var checkFnSingle=function(d){locals[$select.parserResult.itemName]=d;result=$select.parserResult.modelMapper(scope,locals);return result===inputValue};if($select.selected&&checkFnSingle($select.selected)){return $select.selected}for(var i=data.length-1;i>=0;i--){if(checkFnSingle(data[i]))return data[i]}}return inputValue});scope.$watch("$select.selected",function(newValue){if(ngModel.$viewValue!==newValue){ngModel.$setViewValue(newValue)}});ngModel.$render=function(){$select.selected=ngModel.$viewValue};scope.$on("uis:select",function(event,item){$select.selected=item;var locals={};locals[$select.parserResult.itemName]=item;$timeout(function(){$select.onSelectCallback(scope,{$item:item,$model:isNil(item)?item:$select.parserResult.modelMapper(scope,locals)})})});scope.$on("uis:close",function(event,skipFocusser){$timeout(function(){$select.focusser.prop("disabled",false);if(!skipFocusser)$select.focusser[0].focus()},0,false)});scope.$on("uis:activate",function(){focusser.prop("disabled",true)});var focusser=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");$compile(focusser)(scope);$select.focusser=focusser;$select.focusInput=focusser;element.parent().append(focusser);focusser.bind("focus",function(){scope.$evalAsync(function(){$select.focus=true})});focusser.bind("blur",function(){scope.$evalAsync(function(){$select.focus=false})});focusser.bind("keydown",function(e){if(e.which===KEY.BACKSPACE&&$select.backspaceReset!==false){e.preventDefault();e.stopPropagation();$select.select(undefined);scope.$apply();return}if(e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.ESC){return}if(e.which==KEY.DOWN||e.which==KEY.UP||e.which==KEY.ENTER||e.which==KEY.SPACE){e.preventDefault();e.stopPropagation();$select.activate()}scope.$digest()});focusser.bind("keyup input",function(e){if(e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.ESC||e.which==KEY.ENTER||e.which===KEY.BACKSPACE){return}$select.activate(focusser.val());focusser.val("");scope.$digest()})}}}]);uis.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function($timeout,uiSelectConfig,uiSelectMinErr){return{require:["^^uiSelect","^ngModel"],link:function(scope,element,attrs,ctrls){if(scope[attrs.uiSelectSort]===null){throw uiSelectMinErr("sort","Expected a list to sort")}var $select=ctrls[0];var $ngModel=ctrls[1];var options=angular.extend({axis:"horizontal"},scope.$eval(attrs.uiSelectSortOptions));var axis=options.axis;var draggingClassName="dragging";var droppingClassName="dropping";var droppingBeforeClassName="dropping-before";var droppingAfterClassName="dropping-after";scope.$watch(function(){return $select.sortable},function(newValue){if(newValue){element.attr("draggable",true)}else{element.removeAttr("draggable")}});element.on("dragstart",function(event){element.addClass(draggingClassName);(event.dataTransfer||event.originalEvent.dataTransfer).setData("text",scope.$index.toString())});element.on("dragend",function(){removeClass(draggingClassName)});var move=function(from,to){this.splice(to,0,this.splice(from,1)[0])};var removeClass=function(className){angular.forEach($select.$element.querySelectorAll("."+className),function(el){angular.element(el).removeClass(className)})};var dragOverHandler=function(event){event.preventDefault();var offset=axis==="vertical"?event.offsetY||event.layerY||(event.originalEvent?event.originalEvent.offsetY:0):event.offsetX||event.layerX||(event.originalEvent?event.originalEvent.offsetX:0);if(offset<this[axis==="vertical"?"offsetHeight":"offsetWidth"]/2){removeClass(droppingAfterClassName);element.addClass(droppingBeforeClassName)}else{removeClass(droppingBeforeClassName);element.addClass(droppingAfterClassName)}};var dropTimeout;var dropHandler=function(event){event.preventDefault();var droppedItemIndex=parseInt((event.dataTransfer||event.originalEvent.dataTransfer).getData("text"),10);$timeout.cancel(dropTimeout);dropTimeout=$timeout(function(){_dropHandler(droppedItemIndex)},20)};var _dropHandler=function(droppedItemIndex){var theList=scope.$eval(attrs.uiSelectSort);var itemToMove=theList[droppedItemIndex];var newIndex=null;if(element.hasClass(droppingBeforeClassName)){if(droppedItemIndex<scope.$index){newIndex=scope.$index-1}else{newIndex=scope.$index}}else{if(droppedItemIndex<scope.$index){newIndex=scope.$index}else{newIndex=scope.$index+1}}move.apply(theList,[droppedItemIndex,newIndex]);$ngModel.$setViewValue(Date.now());scope.$apply(function(){scope.$emit("uiSelectSort:change",{array:theList,item:itemToMove,from:droppedItemIndex,to:newIndex})});removeClass(droppingClassName);removeClass(droppingBeforeClassName);removeClass(droppingAfterClassName);element.off("drop",dropHandler)};element.on("dragenter",function(){if(element.hasClass(draggingClassName)){return}element.addClass(droppingClassName);element.on("dragover",dragOverHandler);element.on("drop",dropHandler)});element.on("dragleave",function(event){if(event.target!=element){return}removeClass(droppingClassName);removeClass(droppingBeforeClassName);removeClass(droppingAfterClassName);element.off("dragover",dragOverHandler);element.off("drop",dropHandler)})}}}]);uis.factory("$$uisDebounce",["$timeout",function($timeout){return function(callback,debounceTime){var timeoutPromise;return function(){var self=this;var args=Array.prototype.slice.call(arguments);if(timeoutPromise){$timeout.cancel(timeoutPromise)}timeoutPromise=$timeout(function(){callback.apply(self,args)},debounceTime)}}}]);uis.directive("uisOpenClose",["$parse","$timeout",function($parse,$timeout){return{restrict:"A",require:"uiSelect",link:function(scope,element,attrs,$select){$select.onOpenCloseCallback=$parse(attrs.uisOpenClose);scope.$watch("$select.open",function(isOpen,previousState){if(isOpen!==previousState){$timeout(function(){$select.onOpenCloseCallback(scope,{isOpen:isOpen})})}})}}}]);uis.service("uisRepeatParser",["uiSelectMinErr","$parse",function(uiSelectMinErr,$parse){var self=this;self.parse=function(expression){var match;match=expression.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match){throw uiSelectMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression)}var source=match[5],filters="";if(match[3]){source=match[5].replace(/(^\()|(\)$)/g,"");var filterMatch=match[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);if(filterMatch&&filterMatch[1].trim()){filters=filterMatch[1];source=source.replace(filters,"")}}return{itemName:match[4]||match[2],keyName:match[3],source:$parse(source),filters:filters,trackByExp:match[6],modelMapper:$parse(match[1]||match[4]||match[2]),repeatExpression:function(grouped){var expression=this.itemName+" in "+(grouped?"$group.items":"$select.items");if(this.trackByExp){expression+=" track by "+this.trackByExp}return expression}}};self.getGroupNgRepeatExpression=function(){return"$group in $select.groups track by $group.name"}}])})();angular.module("ui.select").run(["$templateCache",function($templateCache){$templateCache.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" ng-show="$select.open && $select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><span class="ui-select-choices-row-inner"></span></div></li></ul>');$templateCache.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected track by $index"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>');$templateCache.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>');$templateCache.put("bootstrap/no-choice.tpl.html",'<ul class="ui-select-no-choice dropdown-menu" ng-show="$select.items.length == 0"><li ng-transclude=""></li></ul>');$templateCache.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-expanded="{{$select.open}}" aria-label="{{$select.baseTitle}}" ng-class="{\'spinner\': $select.refreshing}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>');$templateCache.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><span ng-show="$select.open && $select.refreshing && $select.spinnerEnabled" class="ui-select-refreshing {{$select.spinnerClass}}"></span> <input type="search" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" class="form-control ui-select-search" ng-class="{ \'ui-select-search-hidden\' : !$select.searchEnabled }" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.open"><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>');$templateCache.put("select2/choices.tpl.html",'<ul tabindex="-1" class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>');$templateCache.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected track by $index" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>');$templateCache.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>');$templateCache.put("select2/no-choice.tpl.html",'<div class="ui-select-no-choice dropdown" ng-show="$select.items.length == 0"><div class="dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>');$templateCache.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open || $select.items.length === 0}"><div class="ui-select-choices"></div></div></div>');$templateCache.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="search-container" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled, \'select2-search\':$select.searchEnabled}"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-class="{\'select2-active\': $select.refreshing}" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div></div>');$templateCache.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown" ng-class="{\'single\': !$select.multiple, \'multi\': $select.multiple}"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>');$templateCache.put("selectize/match-multiple.tpl.html",'<div class="ui-select-match" data-value="" ng-repeat="$item in $select.selected track by $index" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'active\':$selectMultiple.activeMatchIndex === $index}" ui-select-sort="$select.selected"><span class="ui-select-match-item" ng-class="{\'select-locked\':$select.isLocked(this, $index)}"><span uis-transclude-append=""></span> <span class="remove ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&times;</span></span></div>');$templateCache.put("selectize/match.tpl.html",'<div ng-hide="$select.searchEnabled && ($select.open || $select.isEmpty())" class="ui-select-match"><span ng-show="!$select.searchEnabled && ($select.isEmpty() || $select.open)" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty() || $select.open" ng-transclude=""></span></div>');$templateCache.put("selectize/no-choice.tpl.html",'<div class="ui-select-no-choice selectize-dropdown" ng-show="$select.items.length == 0"><div class="selectize-dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>');$templateCache.put("selectize/select-multiple.tpl.html",'<div class="ui-select-container selectize-control multi plugin-remove_button" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-model="$select.search" ng-disabled="$select.disabled" aria-expanded="{{$select.open}}" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>');$templateCache.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.isEmpty() && !$select.open" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>')}])},2719:function(module,exports,__webpack_require__){},272:function(module,exports,__webpack_require__){"use strict";var _notify=__webpack_require__(13);var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);var _chrome=_interopRequireDefault(__webpack_require__(11));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}_modules.uiModules.get("apps/opendistro_security/configuration",[]).service("backendAPI",function(Promise,$http,$window,kbnUrl,securityAccessControl){var _this=this;var AUTH_BACKEND_API_ROOT=_chrome.default.addBasePath("/api/v1");this.testConnection=function(){return $http.post("".concat(AUTH_BACKEND_API_ROOT,"/get/config")).then(function(response){return 200}).catch(function(error){if(error.status){return error.status}else{return 500}})};this.get=function(resourceName,id){return $http.get("".concat(AUTH_BACKEND_API_ROOT,"/configuration/").concat(resourceName,"/").concat(id)).then(function(response){return response.data}).catch(function(error){if(error.status==403){securityAccessControl.logout()}else{_notify.toastNotifications.addDanger({title:"Unable to load data.",text:error.data.message||error.statusText})}throw error})};this.getSilent=function(resourceName,id,showError){showError=typeof showError!=="undefined"?showError:true;return $http.get("".concat(AUTH_BACKEND_API_ROOT,"/configuration/").concat(resourceName,"/").concat(id)).then(function(response){return response.data}).catch(function(error){})};this.save=function(resourceName,id,data){var showToastOnError=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var url="".concat(AUTH_BACKEND_API_ROOT,"/configuration/").concat(resourceName,"/").concat(id);return $http.post(url,data).then(function(response){_notify.toastNotifications.addSuccess({title:"'".concat(decodeURIComponent(id),"' saved.")})}).catch(function(error){if(error.status==403){securityAccessControl.logout()}else if(showToastOnError){_notify.toastNotifications.addDanger({text:error.data.message||error.statusText})}throw error})};this.delete=function(resourceName,id){return $http.delete("".concat(AUTH_BACKEND_API_ROOT,"/configuration/").concat(resourceName,"/").concat(id)).then(function(response){_notify.toastNotifications.addSuccess({title:"'".concat(decodeURIComponent(id),"' deleted.")})}).catch(function(error){if(error.status==403){securityAccessControl.logout()}else{_notify.toastNotifications.addDanger({title:"Unable to delete data.",text:error.data.message||error.statusText})}throw error})};this.list=function(resourceName){return $http.get("".concat(AUTH_BACKEND_API_ROOT,"/configuration/").concat(resourceName)).then(function(response){return response.data}).catch(function(error){if(error.status==403){securityAccessControl.logout()}else{_notify.toastNotifications.addDanger({title:"Unable to load data.",text:error.data.message||error.statusText})}throw error})};this.listSilent=function(resourceName){return $http.get("".concat(AUTH_BACKEND_API_ROOT,"/configuration/").concat(resourceName)).then(function(response){return response.data}).catch(function(error){})};this.listAutocomplete=function(names){var completeList=[];names.sort().forEach(function(name){var autocomplete={};autocomplete["name"]=name;completeList.push(autocomplete)});return completeList};this.clearCache=function(){return $http.delete("".concat(AUTH_BACKEND_API_ROOT,"/configuration/cache")).then(function(response){_notify.toastNotifications.addSuccess({title:response.data.message})}).catch(function(error){if(error.status==403){securityAccessControl.logout()}else{_notify.toastNotifications.addDanger({title:"Unable to clear cache.",text:error.data.message||error.statusText})}throw error})};this.cleanArraysFromDuplicates=function(theobject){if(Array.isArray(theobject)&&!(0,_lodash.isEmpty)(theobject)){var firstEntry=theobject[0];if(isString(firstEntry)){return this.cleanArray(theobject)}if((0,_lodash.isPlainObject)(firstEntry)){for(var i=0;i<theobject.length;i++){theobject[i]=this.cleanArraysFromDuplicates(theobject[i])}}return theobject}if((0,_lodash.isPlainObject)(theobject)){var keys=Object.keys(theobject);for(var i=0;i<keys.length;i++){theobject[keys[i]]=this.cleanArraysFromDuplicates(theobject[keys[i]])}}return theobject};this.mergeCleanArray=function(array1,array2){var merged=[];if(array1){merged=merged.concat(array1)}if(array2){merged=merged.concat(array2)}merged=_this.cleanArray(merged);return merged};this.cleanArray=function(thearray){if(!thearray){return[]}if(!Array.isArray(thearray)){return}thearray=thearray.filter(function(e){return String(e).trim()});thearray=(0,_lodash.uniq)(thearray);return thearray};this.sortPermissions=function(permissionsArray){var actiongroups=[];var permissions=[];if(permissionsArray&&Array.isArray(permissionsArray)){permissionsArray.forEach(function(entry){if(entry.startsWith("cluster:")||entry.startsWith("indices:")){permissions.push(entry)}else{actiongroups.push(entry)}})}return{actiongroups:actiongroups,permissions:permissions}};var isString=function isString(val){return typeof val==="string"||!!val&&_typeof(val)==="object"&&Object.prototype.toString.call(val)==="[object String]"}})},2720:function(module,exports,__webpack_require__){"use strict";var _angular=_interopRequireDefault(__webpack_require__(18));var _routes=_interopRequireDefault(__webpack_require__(19));var _index=_interopRequireDefault(__webpack_require__(2721));var _edit=_interopRequireDefault(__webpack_require__(2722));__webpack_require__(2723);__webpack_require__(273);__webpack_require__(63);__webpack_require__(271);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes.default.when("/rolesmapping",{template:_index.default}).when("/rolesmapping/edit/:resourcename",{template:_edit.default}).when("/rolesmapping/clone/:resourcename",{template:_edit.default}).when("/rolesmapping/new",{template:_edit.default})},2721:function(module,exports){module.exports='<div ng-controller="securityBaseController">\n    <div class="security app-container ng-scope" id="section-editor" ng-controller="securityRoleMappingsController">\n\n        <securityc-list-header></securityc-list-header>\n\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12">\n\n                    <div style="margin-bottom: 10px;">\n                        <div style="display: inline;">\n                            <span class="help" tooltip="Use Role Mappings to configure the members of a Open Distro Security Role. You can use usernames, backend roles and host names to assign users to a Open Distro Security Role.">\n                                <svg class="euiIcon euiIcon--large" focusable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="help-a" d="M13.6 12.186l-1.357-1.358c-.025-.025-.058-.034-.084-.056.53-.794.84-1.746.84-2.773a4.977 4.977 0 0 0-.84-2.772c.026-.02.059-.03.084-.056L13.6 3.813a6.96 6.96 0 0 1 0 8.373zM8 15A6.956 6.956 0 0 1 3.814 13.6l1.358-1.358c.025-.025.034-.057.055-.084C6.02 12.688 6.974 13 8 13a4.978 4.978 0 0 0 2.773-.84c.02.026.03.058.056.083l1.357 1.358A6.956 6.956 0 0 1 8 15zm-5.601-2.813a6.963 6.963 0 0 1 0-8.373l1.359 1.358c.024.025.057.035.084.056A4.97 4.97 0 0 0 3 8c0 1.027.31 1.98.842 2.773-.027.022-.06.031-.084.056l-1.36 1.358zm5.6-.187A4 4 0 1 1 8 4a4 4 0 0 1 0 8zM8 1c1.573 0 3.019.525 4.187 1.4l-1.357 1.358c-.025.025-.035.057-.056.084A4.979 4.979 0 0 0 8 3a4.979 4.979 0 0 0-2.773.842c-.021-.027-.03-.059-.055-.084L3.814 2.4A6.957 6.957 0 0 1 8 1zm0-1a8.001 8.001 0 1 0 .003 16.002A8.001 8.001 0 0 0 8 0z"></path></defs><use xlink:href="#help-a" fill-rule="evenodd"></use></svg>\n                            </span>\n                        </div>\n                        <h3 class="indexheading euiTitle euiTitle--medium" style="display: inline;">Role Mappings</h3>\n                    </div>\n\n                    <div class="kuiControlledTable">\n\n                        <securityc-filter-bar></securityc-filter-bar>\n\n                        \x3c!-- Table --\x3e\n                        <table class="kuiTable" ng-show="(resourcenames | filter:query).length">\n                            <thead>\n                            <tr>\n\n                                <th class="kuiTableHeaderCell" ng-click="onSortChange(\'resourcename\')">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Open Distro Security Role\n                                        </span>\n                                    <span ng-show="sortTable.byKey === \'resourcename\'"\n                                          class="kuiIcon"\n                                          ng-class="{\'fa-long-arrow-down\': sortTable.descending, \'fa-long-arrow-up\': ! sortTable.descending}">\n                                        </span>\n                                </th>\n\n                                <th class="kuiTableHeaderCell">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Users\n                                        </span>\n                                </th>\n\n                                <th class="kuiTableHeaderCell">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Backend Roles\n                                        </span>\n                                </th>\n\n                                <th class="kuiTableHeaderCell">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Hosts\n                                        </span>\n                                </th>\n\n                                <th class="kuiTableHeaderCell">\n                                </th>\n\n                            </tr>\n                            </thead>\n\n                            <tbody>\n                            <tr ng-repeat="rolemappingname in resourcenames | filter:query | orderBy:\'toString()\':sortTable.descending" class="kuiTableRow">\n\n                                <td class="kuiTableRowCell cellAlignTop">\n                                    <div class="kuiTableRowCell__liner">\n                                        <span ng-click="newRole(rolemappingname)" class="kuiStatusText__icon kuiStatusText--error kuiIcon fa-warning" ng-if="securityRoleMissing(rolemappingname)" tooltip="No corresponding Open Distro Security role for mapping \'{{rolemappingname}}\' found. Click to create it."></span>\n                                        <a class="kuiLink" ng-click="edit(rolemappingname)" title="{{rolemappingname}}">\n                                            {{rolemappingname}}\n                                        </a>\n                                        <div ng-if="resources[rolemappingname].reserved">\n                                                <span class="euiBadge euiBadge--default">\n                                                  <span class="euiBadge__content">\n                                                        <span class="euiIcon euiIcon--small euiBadge__icon kuiIcon fa-lock"></span>\n                                                    <span class="euiBadge__text">reserved</span>\n                                                  </span>\n                                                </span>\n                                        </div>\n                                    </div>\n                                </td>\n\n                                <td class="kuiTableRowCell cellAlignTop">\n                                    <div class="kuiTableRowCell__liner">\n                                        <span title="{{user}}" ng-repeat="user in resources[rolemappingname].users">{{user}}<br/></span>\n                                    </div>\n                                </td>\n\n                                <td class="kuiTableRowCell cellAlignTop">\n                                    <div class="kuiTableRowCell__liner">\n                                        <span title="{{backendrole}}" ng-repeat="backendrole in resources[rolemappingname].backend_roles">{{backendrole}}<br/></span>\n                                    </div>\n                                </td>\n\n                                <td class="kuiTableRowCell cellAlignTop">\n                                    <div class="kuiTableRowCell__liner">\n                                        <span title="{{host}}" ng-repeat="host in resources[rolemappingname].hosts">{{host}}<br/></span>\n                                    </div>\n                                </td>\n\n                                <td class="kuiTableRowCell actions cellAlignTop">\n                                    <div class="kuiTableRowCell__liner">\n                                        <a tooltip="Edit" ng-click="edit(rolemappingname)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                            <span class="kuiButton__icon kuiIcon fa-edit"></span>\n                                        </a>\n                                        <a tooltip="Clone" ng-click="clone(rolemappingname)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                            <span class="kuiButton__icon kuiIcon fa-copy"></span>\n                                        </a>\n                                        <button tooltip="Delete"\n                                                type="button"\n                                                ng-disabled="!endpointAndMethodEnabled(\'ROLESMAPPING\', \'DELETE\') || resources[rolemappingname].reserved"\n                                                ng-click="confirmDelete(rolemappingname)"\n                                                class="kuiButton kuiButton--danger kuiButton--iconText"\n                                                id="opendistro_security.button.rolesmapping.delete.{{rolemappingname}}">\n                                            <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                        </button>\n                                    </div>\n                                </td>\n\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <securityc-confirmation-modal ng-if="displayModal === true"\n                                header="Confirm Delete"\n                                body="Do you really want to delete \'{{deleteModalResourceName}}\'"\n                                on-close="closeDeleteModal"\n                                on-confirm="delete">\n        </securityc-confirmation-modal>\n\n\n    </div>\n</div>'},2722:function(module,exports){module.exports='<div ng-controller="securityBaseController">\n    <div class="security app-container ng-scope" id="section-editor" ng-controller="securityEditRoleMappingsController">\n\n        <securityc-edit-header></securityc-edit-header>\n\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12">\n                    <div class="">\n                        <form securityc-form-focus-added-field name="objectForm" id="object-form" method="post" ng-submit="saveObject($event)" novalidate style="width:70%">\n\n                            <securityc-error-message></securityc-error-message>\n\n                            <securityc-form-resource-name></securityc-form-resource-name>\n\n                            <div>\n                                <div ng-show="isNew" style="margin-bottom:20px;">\n                                    <h3 class=" euiTitle euiTitle--medium" style="margin-top:0px;">{{service.newLabel}}:</h3>\n                                    <ui-select ng-if="rolesAutoComplete.length && loaded"\n                                               ng-model="newResourceName"\n                                               on-select="onSelectedNewResourceName({item: $item})">\n                                        <ui-select-match placeholder="Role">\n                                            {{newResourceName.name}}\n                                        </ui-select-match>\n                                        <ui-select-choices repeat="item in rolesAutoComplete | filter: $select.search track by $index"\n                                                           ui-disable-choice="resourcenames.indexOf(item.name) > -1">\n                                            <span ng-bind="item.name"></span>\n                                        </ui-select-choices>\n                                    </ui-select>\n                                </div>\n\n                            </div>\n\n                            \x3c!-- User mapping --\x3e\n                            <table class="kuiTable tableIndexGroups">\n                                <thead>\n                                <tr>\n                                    <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Users\n                                        </span>\n                                    </th>\n\n                                    <th class="kuiTableHeaderCell">\n                                    </th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                <tr class="kuiTableRow" ng-show="resourceloaded && (!resource.users || resource.users.length == 0)">\n                                    <td colspan="2" class="kuiTableRowCell">\n                                        <div class="kuiPanel kuiPanel--centered kuiPanel--noborder">\n                                            <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                                                <div class="kuiEmptyTablePrompt__message ng-binding">No user mappings found.</div>\n                                            </div>\n                                        </div>\n                                    </td>\n                                </tr>\n                                <tr class="kuiTableRow" data-ng-repeat="user in resource.users track by $index">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <fieldset class="marginbottom--small" id="object-form-backendroles">\n                                            <input type="text" required class="kuiTextInput fullwidth" ng-model="resource.users[$index]" name="">\n                                        </fieldset>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop actions">\n                                        <a ng-click="confirmRemoveArrayEntry(resource.users, user)" class="kuiButton kuiButton--danger kuiButton--iconText">\n                                            <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                        </a>\n                                    </td>\n                                </tr>\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop actions"></td>\n                                    <td class="kuiTableRowCell cellAlignTop actions">\n                                        <button ng-click="addArrayEntry(resource, \'users\', \'\')" ng-disabled="lastArrayEntryEmpty(resource.users)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                            <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                                            Add User\n                                        </button>\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n\n                            \x3c!-- Backend roles --\x3e\n                            <table class="kuiTable tableIndexGroups">\n                                <thead>\n                                <tr>\n                                    <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Backend roles\n                                        </span>\n                                    </th>\n\n                                    <th class="kuiTableHeaderCell">\n                                    </th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                <tr class="kuiTableRow" ng-show="resourceloaded && (!resource.backend_roles || resource.backend_roles.length == 0)">\n                                    <td colspan="2" class="kuiTableRowCell">\n                                        <div class="kuiPanel kuiPanel--centered kuiPanel--noborder">\n                                            <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                                                <div class="kuiEmptyTablePrompt__message ng-binding">No backend role mappings found.</div>\n                                            </div>\n                                        </div>\n                                    </td>\n                                </tr>\n                                <tr class="kuiTableRow" data-ng-repeat="backendrole in resource.backend_roles track by $index">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <fieldset class="marginbottom--small" id="object-form-backendroles">\n                                            <input required type="text" class="kuiTextInput fullwidth" ng-model="resource.backend_roles[$index]" name="">\n                                        </fieldset>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop actions">\n                                        <a ng-click="confirmRemoveArrayEntry(resource.backend_roles, backendrole)" class="kuiButton kuiButton--danger kuiButton--iconText">\n                                            <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                        </a>\n                                    </td>\n                                </tr>\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop actions"></td>\n                                    <td class="kuiTableRowCell cellAlignTop actions">\n                                        <button ng-click="addArrayEntry(resource, \'backend_roles\', \'\')" ng-disabled="lastArrayEntryEmpty(resource.backend_roles)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                            <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                                            Add Backend Role\n                                        </button>\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n\n                            \x3c!-- Hosts --\x3e\n                            <table class="kuiTable tableIndexGroups">\n                                <thead>\n                                <tr>\n                                    <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Hosts\n                                        </span>\n                                    </th>\n\n                                    <th class="kuiTableHeaderCell">\n                                    </th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                <tr class="kuiTableRow" ng-show="resourceloaded && (!resource.hosts || resource.hosts.length == 0)">\n                                    <td colspan="2" class="kuiTableRowCell">\n                                        <div class="kuiPanel kuiPanel--centered kuiPanel--noborder">\n                                            <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                                                <div class="kuiEmptyTablePrompt__message ng-binding">No host mappings found.</div>\n                                            </div>\n                                        </div>\n                                    </td>\n                                </tr>\n                                <tr class="kuiTableRow" data-ng-repeat="host in resource.hosts track by $index">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <fieldset class="marginbottom--small" id="object-form-hosts">\n                                            <input required type="text" class="kuiTextInput fullwidth" ng-model="resource.hosts[$index]" name="">\n                                        </fieldset>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop actions">\n                                        <a ng-click="confirmRemoveArrayEntry(resource.hosts, host)" class="kuiButton kuiButton--danger kuiButton--iconText">\n                                            <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                        </a>\n                                    </td>\n                                </tr>\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop actions"></td>\n                                    <td class="kuiTableRowCell cellAlignTop actions">\n                                        <button ng-click="addArrayEntry(resource, \'hosts\', \'\')" ng-disabled="lastArrayEntryEmpty(resource.hosts)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                            <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                                            Add Host\n                                        </button>\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n\n                            <div class="formsubmit">\n                                <button id="opendistro_security.button.submit" ng-disabled="!endpointAndMethodEnabled(\'ROLESMAPPING\', \'PUT\')  || resource.reserved"  class="kuiButton kuiButton--primary kuiButton--text" type="submit">Submit</button>\n                                <button id="opendistro_security.button.cancel" class="kuiButton kuiButton--basic kuiButton--text" type="submit" ng-click="cancel()">Cancel</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <securityc-confirmation-modal ng-if="deleteFromEditModal.displayModal"\n            header="{{deleteFromEditModal.header}}"\n            body="{{deleteFromEditModal.body}}"\n            params="deleteFromEditModal.params"\n            on-confirm="deleteFromEditModal.onConfirm"\n            on-close="deleteFromEditModal.onClose"\n        ></securityc-confirmation-modal>\n    </div>\n</div>\n'},2723:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);__webpack_require__(2724);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.controller("securityRoleMappingsController",function($scope,$element,$route,createNotifier,backendrolesmapping,kbnUrl){$scope.endpoint="rolesmapping";$scope.$parent.endpoint="rolesmapping";$scope.service=backendrolesmapping;$scope.$parent.service=backendrolesmapping;$scope.resources={};$scope.title="Manage Role Mappings";$scope.service.list().then(function(response){$scope.resourcenames=Object.keys(response.data).sort();$scope.resources=response.data;$scope.numresources=response.total;$scope.loaded=true});$scope.securityRoleMissing=function(mappingname){if($scope.roleNames&&$scope.roleNames.length>0){return $scope.roleNames.indexOf(mappingname)==-1?true:false}return false};$scope.newRole=function(rolename){kbnUrl.change("/roles/new?name="+rolename)};$scope.sortTable={byKey:"resourcename",descending:false};$scope.onSortChange=function(key){if($scope.sortTable.byKey===key){$scope.sortTable.descending=!$scope.sortTable.descending}else{$scope.sortTable.byKey=key}}});app.controller("securityEditRoleMappingsController",function($scope,$element,$route,$location,$routeParams,createNotifier,backendrolesmapping,backendAPI,kbnUrl){$scope.endpoint="rolesmapping";$scope.$parent.endpoint="rolesmapping";$scope.service=backendrolesmapping;$scope.$parent.service=backendrolesmapping;$scope.resourcelabel="Role";$scope.resource={};$scope.resourcename="";$scope.resourcenames=[];$scope.isNew=false;$scope.query="";$scope.resourceloaded=false;$scope.title=function(){return $scope.isNew?"New Role Mapping":"Edit Role Mapping '"+$scope.resourcename+"'"};$scope.onSelectedNewResourceName=function(event){$scope.resourcename=event.item.name};$scope.service.list().then(function(response){$scope.resourcenames=Object.keys(response.data);var rolemapping=$routeParams.resourcename;if(rolemapping){$scope.service.get(rolemapping).then(function(response){$scope.resource=$scope.service.postFetch(response);$scope.resourcename=rolemapping;$scope.resourceloaded=true;if($location.path().indexOf("clone")==-1){$scope.isNew=false}else{$scope.resourcename=$scope.resourcename+" (COPY)";$scope.isNew=true;delete $scope.resource.readonly}})}else{$scope.resource=$scope.service.emptyModel();if($routeParams.name){$scope.resourcename=$routeParams.name}$scope.isNew=true}$scope.loaded=true});$scope.saveObject=function(event){if(event){event.preventDefault()}var form=$element.find('form[name="objectForm"]');if(form.hasClass("ng-invalid-required")){$scope.errorMessage="Please fill in all the required parameters.";return}if(!form.hasClass("ng-valid")){$scope.errorMessage="Please correct all errors and try again.";return}if($scope.isNew&&$scope.resourcenames.indexOf($scope.resourcename)!=-1){$scope.errorMessage='Role mapping for Security group "'+$scope.resourcename+'"already exists, please choose another one.';return}$scope.resource.users=backendAPI.cleanArray($scope.resource.users);$scope.resource.backend_roles=backendAPI.cleanArray($scope.resource.backend_roles);$scope.resource.hosts=backendAPI.cleanArray($scope.resource.hosts);if($scope.resource.users.length==0&&$scope.resource.backend_roles.length==0&&$scope.resource.hosts.length==0){$scope.errorMessage="Please configure at least one of users, backend roles or hosts.";return}$scope.service.save($scope.resourcename,$scope.resource).then(function(){return kbnUrl.change("/rolesmapping/")});$scope.errorMessage=null}})},2724:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);var _client=_interopRequireDefault(__webpack_require__(272));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/opendistro_security/configuration",[]).service("backendrolesmapping",function(backendAPI,Promise,$http){var _this=this;var RESOURCE="rolesmapping";this.title={singular:"role mapping",plural:"role mappings"};this.newLabel="Role";this.list=function(){return backendAPI.list(RESOURCE)};this.get=function(id){return backendAPI.get(RESOURCE,id)};this.getSilent=function(id){return backendAPI.getSilent(RESOURCE,id)};this.save=function(actiongroupname,data){var data=_this.preSave(data);return backendAPI.save(RESOURCE,actiongroupname,data)};this.delete=function(id){return backendAPI.delete(RESOURCE,id)};this.emptyModel=function(){var rolemapping={};rolemapping.users=[];rolemapping.hosts=[];rolemapping.backend_roles=[];return rolemapping};this.preSave=function(rolemapping){delete rolemapping.hidden;delete rolemapping.reserved;delete rolemapping.static;rolemapping.users=_this.cleanArray(rolemapping.users);rolemapping.backend_roles=_this.cleanArray(rolemapping.backend_roles);rolemapping.hosts=_this.cleanArray(rolemapping.hosts);if(rolemapping.hidden===false){delete rolemapping.hidden}if(rolemapping.reserved===false){delete rolemapping.reserved}if(typeof rolemapping.and_backend_roles!=="undefined"){delete rolemapping.and_backend_roles}return rolemapping};this.postFetch=function(rolemapping){rolemapping=backendAPI.cleanArraysFromDuplicates(rolemapping);return rolemapping};this.cleanArray=function(thearray){if(thearray&&Array.isArray(thearray)){thearray=thearray.filter(function(e){return String(e).trim()});thearray=(0,_lodash.uniq)(thearray);return thearray}}})},2725:function(module,exports,__webpack_require__){"use strict";var _angular=_interopRequireDefault(__webpack_require__(18));var _routes=_interopRequireDefault(__webpack_require__(19));var _index=_interopRequireDefault(__webpack_require__(2726));var _edit=_interopRequireDefault(__webpack_require__(2727));__webpack_require__(593);__webpack_require__(2728);__webpack_require__(273);__webpack_require__(63);__webpack_require__(271);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes.default.when("/roles",{template:_index.default}).when("/roles/new",{template:_edit.default}).when("/roles/clone/:resourcename",{template:_edit.default}).when("/roles/edit/:resourcename",{template:_edit.default}).when("/roles/edit/:resourcename/:indexname*",{template:_edit.default})},2726:function(module,exports){module.exports='<div class="security app-container ng-scope" id="main" ng-controller="securityBaseController">\n\n    <div class="security app-container ng-scope" id="section-editor" ng-controller="securityRolesController">\n\n        <securityc-list-header></securityc-list-header>\n\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12">\n\n                    <div style="margin-bottom: 10px;">\n                        <div style="display: inline;">\n                            <span class="kuiInfoButton help" tooltip="Open Distro Security Roles define access privileges to indices and document types, including Document- and Field-Level-Security and Kibana tenants. Use Role Mappings to assign users to Open Distro Security roles.">\n                                <svg class="euiIcon euiIcon--large" focusable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="help-a" d="M13.6 12.186l-1.357-1.358c-.025-.025-.058-.034-.084-.056.53-.794.84-1.746.84-2.773a4.977 4.977 0 0 0-.84-2.772c.026-.02.059-.03.084-.056L13.6 3.813a6.96 6.96 0 0 1 0 8.373zM8 15A6.956 6.956 0 0 1 3.814 13.6l1.358-1.358c.025-.025.034-.057.055-.084C6.02 12.688 6.974 13 8 13a4.978 4.978 0 0 0 2.773-.84c.02.026.03.058.056.083l1.357 1.358A6.956 6.956 0 0 1 8 15zm-5.601-2.813a6.963 6.963 0 0 1 0-8.373l1.359 1.358c.024.025.057.035.084.056A4.97 4.97 0 0 0 3 8c0 1.027.31 1.98.842 2.773-.027.022-.06.031-.084.056l-1.36 1.358zm5.6-.187A4 4 0 1 1 8 4a4 4 0 0 1 0 8zM8 1c1.573 0 3.019.525 4.187 1.4l-1.357 1.358c-.025.025-.035.057-.056.084A4.979 4.979 0 0 0 8 3a4.979 4.979 0 0 0-2.773.842c-.021-.027-.03-.059-.055-.084L3.814 2.4A6.957 6.957 0 0 1 8 1zm0-1a8.001 8.001 0 1 0 .003 16.002A8.001 8.001 0 0 0 8 0z"></path></defs><use xlink:href="#help-a" fill-rule="evenodd"></use></svg>\n                            </span>\n                        </div>\n                        <h3 class="indexheading euiTitle euiTitle--medium" style="display: inline;">Open Distro Security Roles</h3>\n                    </div>\n\n                    <div class="kuiControlledTable">\n\n                        <securityc-filter-bar></securityc-filter-bar>\n\n                        \x3c!-- Table --\x3e\n                        <table class="kuiTable" ng-show="(resourcenames | filter:query).length">\n                            <thead>\n                            <tr>\n\n                                <th class="kuiTableHeaderCell" ng-click="onSortChange(\'resourcename\')">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Open Distro Security Role\n                                        </span>\n                                    <span ng-show="sortTable.byKey === \'resourcename\'"\n                                          class="kuiIcon"\n                                          ng-class="{\'fa-long-arrow-down\': sortTable.descending, \'fa-long-arrow-up\': ! sortTable.descending}">\n                                        </span>\n                                </th>\n\n                                <th class="kuiTableHeaderCell">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Cluster permissions\n                                        </span>\n                                </th>\n\n                                <th class="kuiTableHeaderCell">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Index patterns\n                                        </span>\n                                </th>\n\n                                <th class="kuiTableHeaderCell">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Tenant patterns\n                                        </span>\n                                </th>\n\n                                <th class="kuiTableHeaderCell">\n                                </th>\n\n                            </tr>\n                            </thead>\n\n                            <tbody>\n                            <tr ng-repeat="rolename in resourcenames | filter:query | orderBy:\'toString()\':sortTable.descending" class="kuiTableRow">\n\n                                <td class="kuiTableRowCell cellAlignTop">\n                                    <div class="kuiTableRowCell__liner">\n                                        <a class="kuiLink" ng-click="edit(rolename)" title="{{rolename}}">\n                                            {{rolename}}\n                                        </a>\n                                    </div>\n                                    <div ng-if="resources[rolename].reserved">\n                                                <span class="euiBadge euiBadge--default">\n                                                  <span class="euiBadge__content">\n                                                        <span class="euiIcon euiIcon--small euiBadge__icon kuiIcon fa-lock"></span>\n                                                    <span class="euiBadge__text">reserved</span>\n                                                  </span>\n                                                </span>\n                                    </div>\n                                </td>\n\n                                <td class="kuiTableRowCell cellAlignTop">\n                                    <div class="kuiTableRowCell__liner">\n                                        <span title="{{clusterpermission}}" ng-repeat="clusterpermission in resources[rolename].cluster_permissions.actiongroups.sort()">{{clusterpermission}}<br/></span>\n                                        <span title="{{clusterpermission}}" ng-repeat="clusterpermission in resources[rolename].cluster_permissions.permissions.sort()">{{clusterpermission}}<br/></span>\n                                    </div>\n                                </td>\n\n                                <td class="kuiTableRowCell cellAlignTop">\n                                    <div class="kuiTableRowCell__liner">\n                                            <span ng-repeat="indexname in extractPatternsFromObjectArray(resources[rolename].index_permissions, \'index_patterns\')">\n                                                <a title="{{indexname}}" class="kuiLink" ng-href="#/roles/edit/{{rolename}}/{{indexname | escape}}" >\n                                                    {{indexname}}\n                                                </a>\n                                                <br/>\n                                            </span>\n                                    </div>\n                                </td>\n\n                                <td class="kuiTableRowCell cellAlignTop">\n                                    <div class="kuiTableRowCell__liner">\n                                            <span title="{{tenantname}}" ng-repeat="tenantname in extractPatternsFromObjectArray(resources[rolename].tenant_permissions, \'tenant_patterns\')">\n                                                {{tenantname}}\n                                                <br/>\n                                            </span>\n                                    </div>\n                                </td>\n\n\n                                <td class="kuiTableRowCell actions cellAlignTop">\n                                    <div class="kuiTableRowCell__liner">\n                                        <a tooltip="Edit" ng-click="edit(rolename)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                            <span class="kuiButton__icon kuiIcon fa-edit"></span>\n                                        </a>\n                                        <a tooltip="Clone" ng-click="clone(rolename)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                            <span class="kuiButton__icon kuiIcon fa-copy"></span>\n                                        </a>\n                                        <button tooltip="Delete" type="button" ng-disabled="!endpointAndMethodEnabled(\'ROLES\', \'DELETE\') || resources[rolename].readonly" ng-click="confirmDelete(rolename)" class="kuiButton kuiButton--danger kuiButton--iconText">\n                                            <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                        </button>\n                                    </div>\n                                </td>\n\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <securityc-confirmation-modal ng-if="displayModal === true"\n                                header="Confirm Delete"\n                                body="Do you really want to delete \'{{deleteModalResourceName}}\'"\n                                on-close="closeDeleteModal"\n                                on-confirm="delete">\n        </securityc-confirmation-modal>\n\n    </div>\n</div>'},2727:function(module,exports){module.exports='<div ng-controller="securityBaseController">\n\n\n    <div class="security " ng-controller="securityEditRolesController">\n\n        <div class="kuiLocalNav">\n            \x3c!--\n            <div class="kuiLocalNavRow">\n                <div class="kuiLocalNavRow__section">\n                    <div class="kuiLocalTitle">\n                        {{title()}}\n                    </div>\n                </div>\n            </div>\n            --\x3e\n            <div class="kuiLocalNavRow__section">\n                <div class="headerHeadline"><security-license-warning ></security-license-warning></div>\n            </div>\n\n            <div class="kuiLocalNavRow kuiLocalNavRow--secondary">\n                <div class="kuiLocalTabs">\n                    <a ng-click="selectTab(\'overview\')" ng-class="getTabCss(\'overview\')" id="opendistro_security.roles.tab.overview">Overview</a>\n                    <a ng-click="selectTab(\'clusterpermissions\')" ng-class="getTabCss(\'clusterpermissions\')" id="opendistro_security.roles.tab.clusterpermissions">Cluster Permissions</a>\n                    <a ng-click="selectTab(\'indexpermissions\')" ng-class="getTabCss(\'indexpermissions\')" id="opendistro_security.roles.tab.indexpermissions">Index Permissions</a>\n                    <a ng-click="selectTab(\'applicationpermissions\')" ng-class="getTabCss(\'applicationpermissions\')" id="opendistro_security.roles.tab.applicationpermissions">Tenant Permissions</a>\n                </div>\n            </div>\n        </div>\n\n\n        <div class="container">\n            <div class="row">\n\n                <form securityc-form-focus-added-field name="objectForm" id="object-form" method="post" ng-submit="saveObject($event)" novalidate style="width:70%">\n\n                    <securityc-error-message></securityc-error-message>\n\n                    <div class="col-xs-12">\n\n                        <div ng-show="selectedTab==\'overview\'">\n                            <securityc-form-resource-name></securityc-form-resource-name>\n\n                            <securityc-form-new-resource-field></securityc-form-new-resource-field>\n\n\n                            <h2 class="euiTitle euiTitle--medium">Members</h2>\n\n                            <h3 class="euiTitle euiTitle--small">Users:</h3>\n                            <ul>\n                                <li data-ng-repeat="user in rolemapping.users" ng-bind="user"></li>\n                            </ul>\n                            <div ng-show="!rolemapping.users || rolemapping.users.length == 0" style="font-style: italic">No mapped users found.</div>\n\n                            <h3 class="euiTitle euiTitle--small" style="margin-top:20px;">Backend Roles:</h3>\n                            <ul>\n                                <li data-ng-repeat="backendrole in rolemapping.backend_roles" ng-bind="backendrole"></li>\n                            </ul>\n                            <div ng-show="!rolemapping.backend_roles || rolemapping.backend_roles.length == 0" style="font-style: italic">No mapped backend roles found.</div>\n\n                            <h3 class="euiTitle euiTitle--small" style="margin-top:20px;">Hosts:</h3>\n                            <ul>\n                                <li data-ng-repeat="host in rolemapping.hosts" ng-bind="host"></li>\n                            </ul>\n                            <div ng-show="!rolemapping.hosts || rolemapping.hosts.length == 0" style="font-style: italic">No mapped hosts found.</div>\n\n                        </div>\n\n                        <div ng-show="selectedTab==\'clusterpermissions\'">\n                            <table class="fullwidth">\n                                <tr>\n                                    <td>\n                                        <h3 class="resourcename euiTitle euiTitle--medium">\n                                            {{resourcelabel}}: <span ng-class="{\'noresourcename\': !resourcename}">{{resourcename || \'(no role name defined)\'}}</span>\n                                            <div class="kuiBadge kuiBadge--default" ng-if="resource.readonly">\n                                                <span class="kuiIcon fa-lock"></span>\n                                                reserved\n                                            </div>\n                                        </h3>\n                                    </td>\n                                </tr>\n                            </table>\n                            <div class="kuiHeaderBar" style="margin-bottom: 20px; margin-top:10px;">\n                                <div class="kuiHeaderBarSection">\n                                    <h2 class="kuiSubTitle">Cluster-wide permissions</h2>\n                                </div>\n                            </div>\n                            <securityc-permissions on-should-confirm="confirmRemoveArrayEntry" permissionsResource="resource.cluster_permissions"></securityc-permissions>\n                        </div>\n\n                        \x3c!-- Header --\x3e\n                        <div ng-show="selectedTab==\'indexpermissions\'">\n                            <table class="fullwidth">\n                                <tr>\n                                    <td>\n                                        <h3 class="resourcename euiTitle euiTitle--medium">\n                                            {{resourcelabel}}: <span ng-class="{\'noresourcename\': !resourcename}">{{resourcename || \'(no role name defined)\'}}</span>\n                                            <div class="kuiBadge kuiBadge--default" ng-if="resource.reserved">\n                                                <span class="euiBadge euiBadge--default">\n                                                  <span class="euiBadge__content">\n                                                        <span class="euiIcon euiIcon--small euiBadge__icon kuiIcon fa-lock"></span>\n                                                    <span class="euiBadge__text">reserved</span>\n                                                  </span>\n                                                </span>\n                                            </div>\n                                        </h3>\n                                    </td>\n                                </tr>\n                            </table>\n\n                            \x3c!-- Add index permissions --\x3e\n                            <div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--directionRow euiFlexGroup--responsive">\n                                <div class="euiFlexItem">\n                                    <h2 ng-show="indicesEmpty()" class="euiTitle euiTitle--xsmall topBottomMargin ng-cloak" >No index permissions configured.</h2>\n                                </div>\n                                <div class="euiFlexItem euiFlexItem--flexGrowZero ">\n                                    <button class="euiButton euiButton--primary eui-alignMiddle" type="button" style="margin-top:15px;"\n                                            id="opendistro_security.button.roles.index_permissions.add"\n                                            ng-click="addEmptyIndexPermissions()"\n                                    >\n                                    <span class="euiButton__content">\n                                        <span class="euiButton__text">Add index permissions</span>\n                                    </span>\n                                    </button>\n                                </div>\n                            </div>\n\n                            <div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--directionRow euiFlexGroup--responsive" data-ng-repeat="indexpermission in resource.index_permissions track by $index">\n                                <div class="euiFlexItem">\n                                    <accordeon title="Index patterns: {{getAccordeonTitle(indexpermission.index_patterns, \'(No index patterns configured)\')}}" is-collapsed="indexpermission.collapsed" testid="opendistro_security.roles.indexpermissions-{{$index}}" additional-class="euiTitle euiTitle--xsmall">\n\n                                        \x3c!-- Delete index permissions --\x3e\n                                        <div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--directionRow euiFlexGroup--responsive">\n                                            <div class="euiFlexItem">\n                                                <h2 class="euiTitle euiTitle--xsmall topBottomMargin" ></h2>\n                                            </div>\n                                            <div class="euiFlexItem euiFlexItem--flexGrowZero ">\n                                                <button class="euiButton euiButton--danger eui-alignMiddle" type="button" style="margin-bottom:15px;"\n                                                        id="opendistro_security.button.roles.index_permissions.delete"\n                                                        ng-click="confirmRemoveFromObjectArray(resource.index_permissions, $index, getAccordeonTitle(indexpermission.index_patterns, \'\'))">\n                                                    <span class="euiButton__content">\n                                                        <span class="euiButton__text">Delete index permissions</span>\n                                                    </span>\n                                                </button>\n                                            </div>\n                                        </div>\n\n                                        \x3c!-- Index patterns table --\x3e\n                                        <table class="kuiTable tableIndexGroups">\n                                            <thead>\n                                            <tr>\n                                                <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n                                                    <div class="kuiTableHeaderCell__liner">\n                                                        Index patterns:\n                                                        <div style="display: inline;">\n                                                <span class="kuiInfoButton help" tooltip=\'The index patterns the permissions apply to.\'>\n                                                    <span class="kuiIcon fa-info-circle"></span>\n                                                </span>\n                                                        </div>\n                                                    </div>\n                                                </th>\n                                                <th class="kuiTableHeaderCell tableHeaderCellIndexGroups actions">\n                                                    <div class="kuiTableHeaderCell__liner">\n                                                    </div>\n                                                </th>\n                                            </tr>\n                                            </thead>\n                                            <tbody>\n                                            <tr class="kuiTableRow" ng-if="!indexpermission.index_patterns.length">\n                                                <td class="kuiTableRowCell" colspan="2" >\n                                                    <div class="kuiPanel--centered">\n                                                        <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                                                            <div class="kuiEmptyTablePrompt__message ng-binding">No index patterns configured.</div>\n                                                        </div>\n                                                    </div>\n                                                </td>\n                                            </tr>\n\n                                            <tr data-ng-repeat="indexpattern in indexpermission.index_patterns track by $index">\n                                                <td class="kuiTableRowCell cellAlignTop">\n                                                    <fieldset class="marginbottom--small" id="" >\n                                                        <input\n                                                                type="text"\n                                                                class="kuiTextInput fullwidth"\n                                                                ng-model="indexpermission.index_patterns[$index]"\n                                                                name=""\n                                                                autoFocus\n                                                                id="opendistro_security.input.roles.indexpatterns.{{$parent.$index}}.{{$index}}">\n                                                    </fieldset>\n                                                </td>\n                                                <td class="kuiTableRowCell cellAlignTop actions">\n                                                    <a\n                                                            tooltip="Delete field {{indexpermission.index_patterns[$index]}}"\n                                                            ng-click="confirmRemoveArrayEntry(indexpermission.index_patterns, indexpattern)"\n                                                            class="kuiButton kuiButton--danger kuiButton--iconText"\n                                                            id="opendistro_security.button.roles.indexpatterns.delete.{{$index}}">\n                                                        <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                                    </a>\n                                                </td>\n                                            </tr>\n                                            <tr class="kuiTableRow">\n                                                <td class="kuiTableRowCell cellAlignTop actions"></td>\n                                                <td class="kuiTableRowCell cellAlignTop actions">\n                                                    <button type="button"\n                                                            ng-click="addArrayEntry(indexpermission, \'index_patterns\', \'\')"\n                                                            ng-disabled="lastArrayEntryEmpty(indexpermission.index_patterns)"\n                                                            class="kuiButton kuiButton--primary kuiButton--iconText"\n                                                            id="opendistro_security.button.roles.index_patterns.add">\n                                                        <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                                                        Add index pattern\n                                                    </button>\n                                                </td>\n                                            </tr>\n                                            </tbody>\n                                        </table>\n\n                                        \x3c!-- Index Permissions --\x3e\n                                        <securityc-permissions on-should-confirm="confirmRemoveArrayEntry" permissionsResource="indexpermission.allowed_actions"></securityc-permissions>\n\n                                        \x3c!-- DLS --\x3e\n                                        <table class="kuiTable tableIndexGroups">\n                                            <thead>\n                                            <tr>\n                                                <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n\n                                                    <div class="kuiTableHeaderCell__liner">\n                                                        Document Level Security Query\n                                                        <div style="display: inline;">\n                                                <span class="kuiInfoButton help" tooltip=\'Use Elasticsearch’s full Query DSL for configuring the query used for Document Level Security. The query must be a valid JSON string, e.g. {"match": {"category": "event"}}\'>\n                                                    <span class="kuiIcon fa-info-circle"></span>\n                                                </span>\n                                                        </div>\n                                                    </div>\n                                                </th>\n\n                                                <th class="kuiTableHeaderCell">\n                                                </th>\n                                            </tr>\n                                            </thead>\n                                            <tbody>\n                                            <tr class="kuiTableRow">\n                                                <td class="kuiTableRowCell cellAlignTop">\n                                                    <fieldset class="marginbottom--small" id="object-form-actiongroups-dls">\n                                                        <div\n                                                                id="object-form-dls-json-raw-{{$index}}"\n                                                                name="jsonRaw"\n                                                                ui-ace="{ onLoad: aceRwLoaded, mode: \'json\' }"\n                                                                ng-model="indexpermission.dls">\n                                                        </div\n                                                    </fieldset>\n                                                </td>\n                                                <td class="kuiTableRowCell cellAlignTop actions">\n                                                    <a tooltip="Test DLS query syntax" ng-click="testDls($index, indexpermission.dls, indexpermission.index_patterns[0])" class="kuiButton kuiButton--secondary kuiButton--iconText" title="Check Syntax">\n                                                        <span class="kuiButton__icon kuiIcon fa-check"></span>\n                                                    </a>\n                                                    <a tooltip="Delete DLS query" ng-click="indexpermission.dls=\'\'" class="kuiButton kuiButton--danger kuiButton--iconText" title="Delete DLS query">\n                                                        <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                                    </a>\n                                                </td>\n                                            </tr>\n                                            </tbody>\n                                        </table>\n\n                                        \x3c!-- FLS --\x3e\n                                        <table class="kuiTable tableIndexGroups">\n                                            <thead>\n                                            <tr>\n                                                <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n                                                    <div class="kuiTableHeaderCell__liner">\n                                                        Include or exclude fields\n                                                        <div style="display: inline;">\n                                                <span class="kuiInfoButton help" tooltip=\'Include or exclude fields from documents returned by Elasticsearch.\'>\n                                                    <span class="kuiIcon fa-info-circle"></span>\n                                                </span>\n                                                        </div>\n                                                    </div>\n                                                </th>\n                                                <th class="kuiTableHeaderCell tableHeaderCellIndexGroups actions">\n                                                    <div class="kuiTableHeaderCell__liner">\n                                                        <select class="kuiSelect" name="flsModeSelect" ng-model="indexpermission.flsmode">\n                                                            <option value="whitelist" id="opendistro_security.option.roles.fls.whitelist">Include fields</option>\n                                                            <option value="blacklist" id="opendistro_security.option.roles.fls.blacklist">Exclude fields</option>\n                                                        </select>\n                                                    </div>\n                                                </th>\n                                            </tr>\n                                            </thead>\n                                            <tbody>\n                                            <tr class="kuiTableRow" ng-if="!indexpermission.fls.length">\n                                                <td colspan="2" class="kuiTableRowCell">\n                                                    <div class="kuiPanel--centered">\n                                                        <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                                                            <div class="kuiEmptyTablePrompt__message ng-binding">No fields configured.</div>\n                                                        </div>\n                                                    </div>\n                                                </td>\n                                            </tr>\n\n                                            <tr data-ng-repeat="flsfield in indexpermission.fls track by $index">\n                                                <td class="kuiTableRowCell cellAlignTop">\n                                                    <fieldset class="marginbottom--small" id="" >\n                                                        <input\n                                                                type="text"\n                                                                class="kuiTextInput fullwidth"\n                                                                ng-model="indexpermission.fls[$index]"\n                                                                name=""\n                                                                id="opendistro_security.input.roles.fls.{{indexpermission.fls[$index]}}">\n                                                    </fieldset>\n                                                </td>\n                                                <td class="kuiTableRowCell cellAlignTop actions">\n                                                    <a\n                                                            tooltip="Delete field {{indexpermission.fls[$index]}}"\n                                                            ng-click="confirmRemoveArrayEntry(indexpermission.fls, flsfield)"\n                                                            class="kuiButton kuiButton--danger kuiButton--iconText"\n                                                            id="opendistro_security.button.roles.fls.delete.{{indexpermission.fls[$index]}}">\n                                                        <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                                    </a>\n                                                </td>\n                                            </tr>\n                                            <tr class="kuiTableRow">\n                                                <td class="kuiTableRowCell cellAlignTop actions"></td>\n                                                <td class="kuiTableRowCell cellAlignTop actions">\n                                                    <button\n                                                            type="button"\n                                                            ng-click="addArrayEntry(indexpermission, \'fls\', \'\')"\n                                                            ng-disabled="lastArrayEntryEmpty(indexpermission.fls)"\n                                                            class="kuiButton kuiButton--primary kuiButton--iconText"\n                                                            id="opendistro_security.button.roles.fls.add">\n                                                        <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                                                        Add Field\n                                                    </button>\n                                                </td>\n                                            </tr>\n                                            </tbody>\n                                        </table>\n\n                                        \x3c!-- FLS Masked Fields Table --\x3e\n                                        <table class="kuiTable tableIndexGroups" ng-show="complianceFeaturesEnabled">\n                                            <thead>\n                                            <tr>\n                                                <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n                                                    <div class="kuiTableHeaderCell__liner">\n                                                        Anonymize fields:\n                                                        <div style="display: inline;">\n                                                <span class="kuiInfoButton help" tooltip=\'Replace the value of these fields with an anonymized hash.\'>\n                                                    <span class="kuiIcon fa-info-circle"></span>\n                                                </span>\n                                                        </div>\n                                                    </div>\n                                                </th>\n                                                <th class="kuiTableHeaderCell tableHeaderCellIndexGroups actions">\n                                                    <div class="kuiTableHeaderCell__liner">\n                                                    </div>\n                                                </th>\n                                            </tr>\n                                            </thead>\n                                            <tbody>\n                                            <tr class="kuiTableRow" ng-if="!indexpermission.masked_fields.length">\n                                                <td class="kuiTableRowCell" colspan="2" >\n                                                    <div class="kuiPanel--centered">\n                                                        <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                                                            <div class="kuiEmptyTablePrompt__message ng-binding">No anonymized fields configured.</div>\n                                                        </div>\n                                                    </div>\n                                                </td>\n                                            </tr>\n\n                                            <tr data-ng-repeat="maskedfield in indexpermission.masked_fields track by $index">\n                                                <td class="kuiTableRowCell cellAlignTop">\n                                                    <fieldset class="marginbottom--small" id="" >\n                                                        <input\n                                                                type="text"\n                                                                class="kuiTextInput fullwidth"\n                                                                ng-model="indexpermission.masked_fields[$index]"\n                                                                name=""\n                                                                id="opendistro_security.input.roles.maskedfields.{{$index}}">\n                                                    </fieldset>\n                                                </td>\n                                                <td class="kuiTableRowCell cellAlignTop actions">\n                                                    <a\n                                                            tooltip="Delete field {{indexpermission.masked_fields[$index]}}"\n                                                            ng-click="confirmRemoveArrayEntry(indexpermission.masked_fields, maskedfield)"\n                                                            class="kuiButton kuiButton--danger kuiButton--iconText"\n                                                            id="opendistro_security.button.roles.maskedfields.delete.{{$index}}">\n                                                        <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                                    </a>\n                                                </td>\n                                            </tr>\n                                            <tr class="kuiTableRow">\n                                                <td class="kuiTableRowCell cellAlignTop actions"></td>\n                                                <td class="kuiTableRowCell cellAlignTop actions">\n                                                    <button type="button"\n                                                            ng-click="addArrayEntry(indexpermission, \'masked_fields\', \'\')"\n                                                            ng-disabled="lastArrayEntryEmpty(indexpermission.masked_fields)"\n                                                            class="kuiButton kuiButton--primary kuiButton--iconText"\n                                                            id="opendistro_security.button.roles.maskedfields.add">\n                                                        <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                                                        Add Field\n                                                    </button>\n                                                </td>\n                                            </tr>\n                                            </tbody>\n                                        </table>\n\n                                    </accordeon>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div ng-show="selectedTab==\'applicationpermissions\'">\n                            <table class="fullwidth">\n                                <tr>\n                                    <td>\n                                        <h3 class="resourcename euiTitle euiTitle--medium">\n                                            {{resourcelabel}}: <span ng-class="{\'noresourcename\': !resourcename}">{{resourcename || \'(no role name defined)\'}}</span>\n                                            <div class="kuiBadge kuiBadge--default" ng-if="resource.reserved">\n                                                <span class="euiBadge euiBadge--default">\n                                                  <span class="euiBadge__content">\n                                                        <span class="euiIcon euiIcon--small euiBadge__icon kuiIcon fa-lock"></span>\n                                                    <span class="euiBadge__text">reserved</span>\n                                                  </span>\n                                                </span>\n                                            </div>\n                                        </h3>\n                                    </td>\n                                </tr>\n                            </table>\n\n                            \x3c!-- Global application permissions --\x3e\n                            <div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--directionRow euiFlexGroup--responsive" ng-if="globalEnabled">\n                                <div class="euiFlexItem">\n                                    <h3 class="euiTitle euiTitle--small">Global permissions</h3>\n                                </div>\n                            </div>\n\n                            \x3c!-- Application permissions --\x3e\n                            <table class="kuiTable tableIndexGroups" ng-if="globalEnabled">\n                                <thead>\n                                <tr>\n                                    <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n                                        <div class="kuiTableHeaderCell__liner">\n                                            Permissions:\n                                            <div style="display: inline;">\n                                                <span class="kuiInfoButton help" tooltip=\'The permissions that apply for globally.\'>\n                                                    <span class="kuiIcon fa-info-circle"></span>\n                                                </span>\n                                            </div>\n                                        </div>\n                                    </th>\n                                    <th class="kuiTableHeaderCell tableHeaderCellIndexGroups actions">\n                                        <div class="kuiTableHeaderCell__liner">\n                                        </div>\n                                    </th>\n                                </tr>\n                                </thead>\n                                <tbody>\n\n                                <tr class="kuiTableRow" ng-if="!resource.global_application_permissions.length">\n                                    <td class="kuiTableRowCell" colspan="2" >\n                                        <div class="kuiPanel--centered">\n                                            <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                                                <div class="kuiEmptyTablePrompt__message ng-binding">No global permissions configured.</div>\n                                            </div>\n                                        </div>\n                                    </td>\n                                </tr>\n                                <tr data-ng-repeat="permission in resource.global_application_permissions track by $index">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <fieldset class="marginbottom--small" id="object-form-actiongroupsecuritylobal">\n                                            <ui-select ng-model="resource.global_application_permissions[$index]">\n                                                <ui-select-match placeholder="Permission name">\n                                                    {{resource.global_application_permissions[$index]}}\n                                                </ui-select-match>\n                                                <ui-select-choices repeat="item in (applicationActionGroups | filter: $select.search) track by $index">\n                                                    <span ng-bind="item"></span>\n                                                </ui-select-choices>\n                                            </ui-select>\n                                        </fieldset>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop actions">\n                                        <a\n                                                tooltip="Delete field {{permission}}"\n                                                ng-click="confirmRemoveArrayEntry(resource.global_application_permissions, permission)"\n                                                class="kuiButton kuiButton--danger kuiButton--iconText"\n                                                id="opendistro_security.button.roles.applicationpermissionsglobal.delete.{{$index}}">\n                                            <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                        </a>\n                                    </td>\n                                </tr>\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop actions"></td>\n                                    <td class="kuiTableRowCell cellAlignTop actions">\n                                        <button type="button"\n                                                ng-click="addArrayEntry(resource, \'global_application_permissions\', \'\')"\n                                                ng-disabled="lastArrayEntryEmpty(resource.global_application_permissions)"\n                                                class="kuiButton kuiButton--primary kuiButton--iconText"\n                                                id="opendistro_security.button.roles.applicationpermissionsglobal.add">\n                                            <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                                            Add Field\n                                        </button>\n                                    </td>\n                                </tr>\n\n                                </tbody>\n                            </table>\n\n\n                            <hr class="euiHorizontalRule euiHorizontalRule--full euiHorizontalRule--marginLarge" ng-if="multiTenancyEnabled">\n\n                            <div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--directionRow euiFlexGroup--responsive" ng-if="multiTenancyEnabled">\n                                <div class="euiFlexItem">\n                                    <h3 class="euiTitle euiTitle--small">Tenant permissions</h3>\n                                </div>\n                            </div>\n\n                            \x3c!-- Add tenant permissions --\x3e\n                            <div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--directionRow euiFlexGroup--responsive" ng-if="multiTenancyEnabled">\n                                <div class="euiFlexItem">\n                                    <h2 ng-show="tenantPermissionsEmpty()" class="euiTitle euiTitle--xsmall topBottomMargin ng-cloak" >No tenant permissions configured.</h2>\n                                </div>\n                                <div class="euiFlexItem euiFlexItem--flexGrowZero ">\n                                    <button class="euiButton euiButton--primary eui-alignMiddle" type="button" style="margin-top:15px;"\n                                            id="opendistro_security.button.roles.index_appliicationpermissions.add"\n                                            ng-click="addEmptyTenantPermissions()"\n                                    >\n                                    <span class="euiButton__content">\n                                        <span class="euiButton__text">Add tenant permissions</span>\n                                    </span>\n                                    </button>\n                                </div>\n                            </div>\n\n                            <div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--directionRow euiFlexGroup--responsive" data-ng-repeat="tenantpermission in resource.tenant_permissions track by $index" ng-if="multiTenancyEnabled">\n                                <div class="euiFlexItem">\n                                    <accordeon title="Tenant patterns: {{getAccordeonTitle(tenantpermission.tenant_patterns, \'(no tenant patterns configured)\')}}" is-collapsed="tenantpermission.collapsed" testid="opendistro_security.roles.tenantpermissions-{{$index}}" additional-class="euiTitle euiTitle--xsmall">\n\n                                        \x3c!-- Delete index permissions --\x3e\n                                        <div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--directionRow euiFlexGroup--responsive">\n                                            <div class="euiFlexItem">\n                                                <h2 class="euiTitle euiTitle--xsmall topBottomMargin" ></h2>\n                                            </div>\n                                            <div class="euiFlexItem euiFlexItem--flexGrowZero ">\n                                                <button class="euiButton euiButton--danger eui-alignMiddle" type="button" style="margin-bottom:15px;"\n                                                        id="opendistro_security.button.roles.tenant_permissions.delete"\n                                                        ng-click="confirmRemoveFromObjectArray(resource.tenant_permissions, $index, getAccordeonTitle(tenantpermission.tenant_patterns, \'\'))">\n                                                    <span class="euiButton__content">\n                                                        <span class="euiButton__text">Delete tenant permissions</span>\n                                                    </span>\n                                                </button>\n                                            </div>\n                                        </div>\n\n                                        \x3c!-- Index patterns table --\x3e\n                                        <table class="kuiTable tableIndexGroups">\n                                            <thead>\n                                            <tr>\n                                                <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n                                                    <div class="kuiTableHeaderCell__liner">\n                                                        Tenant patterns:\n                                                        <div style="display: inline;">\n                                                <span class="kuiInfoButton help" tooltip=\'The tenants the permissions apply to. You can use wildcards here.\'>\n                                                    <span class="kuiIcon fa-info-circle"></span>\n                                                </span>\n                                                        </div>\n                                                    </div>\n                                                </th>\n                                                <th class="kuiTableHeaderCell tableHeaderCellIndexGroups actions">\n                                                    <div class="kuiTableHeaderCell__liner">\n                                                    </div>\n                                                </th>\n                                            </tr>\n                                            </thead>\n                                            <tbody>\n                                            <tr class="kuiTableRow" ng-if="!tenantpermission.tenant_patterns.length">\n                                                <td class="kuiTableRowCell" colspan="2" >\n                                                    <div class="kuiPanel--centered">\n                                                        <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                                                            <div class="kuiEmptyTablePrompt__message ng-binding">No tenant patterns configured.</div>\n                                                        </div>\n                                                    </div>\n                                                </td>\n                                            </tr>\n\n                                            <tr data-ng-repeat="tenantpattern in tenantpermission.tenant_patterns track by $index">\n                                                <td class="kuiTableRowCell cellAlignTop">\n                                                    <fieldset class="marginbottom--small">\n                                                        <input\n                                                                type="text"\n                                                                class="kuiTextInput fullwidth"\n                                                                ng-model="tenantpermission.tenant_patterns[$index]"\n                                                                name=""\n                                                                id="opendistro_security.input.roles.tenantpatterns.{{$index}}">\n                                                    </fieldset>\n                                                </td>\n                                                <td class="kuiTableRowCell cellAlignTop actions">\n                                                    <a\n                                                            tooltip="Delete field {{tenantpermission.tenant_patterns[$index]}}"\n                                                            ng-click="confirmRemoveArrayEntry(tenantpermission.tenant_patterns, tenantpattern)"\n                                                            class="kuiButton kuiButton--danger kuiButton--iconText"\n                                                            id="opendistro_security.button.roles.tenantpatterns.delete.{{$index}}">\n                                                        <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                                    </a>\n                                                </td>\n                                            </tr>\n                                            <tr class="kuiTableRow">\n                                                <td class="kuiTableRowCell cellAlignTop actions"></td>\n                                                <td class="kuiTableRowCell cellAlignTop actions">\n                                                    <button type="button"\n                                                            ng-click="addArrayEntry(tenantpermission, \'tenant_patterns\', \'\')"\n                                                            ng-disabled="lastArrayEntryEmpty(tenantpermission.tenant_patterns)"\n                                                            class="kuiButton kuiButton--primary kuiButton--iconText"\n                                                            id="opendistro_security.button.roles.tenant_patterns.add">\n                                                        <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                                                        Add tenant pattern\n                                                    </button>\n                                                </td>\n                                            </tr>\n                                            </tbody>\n                                        </table>\n\n                                        \x3c!-- Application permissions --\x3e\n                                        <table class="kuiTable tableIndexGroups">\n                                            <thead>\n                                            <tr>\n                                                <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n                                                    <div class="kuiTableHeaderCell__liner">\n                                                        Permissions:\n                                                        <div style="display: inline;">\n                                                <span class="kuiInfoButton help" tooltip=\'The permissions that apply for this tenant.\'>\n                                                    <span class="kuiIcon fa-info-circle"></span>\n                                                </span>\n                                                        </div>\n                                                    </div>\n                                                </th>\n                                                <th class="kuiTableHeaderCell tableHeaderCellIndexGroups actions">\n                                                    <div class="kuiTableHeaderCell__liner">\n                                                    </div>\n                                                </th>\n                                            </tr>\n                                            </thead>\n                                            <tbody>\n                                            <tr class="kuiTableRow" ng-if="!tenantpermission.allowed_actions.length">\n                                                <td class="kuiTableRowCell" colspan="2" >\n                                                    <div class="kuiPanel--centered">\n                                                        <div class="kuiEmptyTablePrompt kuiEmptyTablePrompt--nopadding">\n                                                            <div class="kuiEmptyTablePrompt__message ng-binding">No application permissions configured.</div>\n                                                        </div>\n                                                    </div>\n                                                </td>\n                                            </tr>\n\n                                            <tr data-ng-repeat="permission in tenantpermission.allowed_actions track by $index">\n                                                <td class="kuiTableRowCell cellAlignTop">\n                                                    <fieldset class="marginbottom--small" id="object-form-actiongroups">\n                                                        <ui-select ng-model="tenantpermission.allowed_actions[$index]">\n                                                            <ui-select-match placeholder="Permission name">\n                                                                {{tenantpermission.allowed_actions[$index]}}\n                                                            </ui-select-match>\n                                                            <ui-select-choices repeat="item in (applicationActionGroups | filter: $select.search) track by $index">\n                                                                <span ng-bind="item"></span>\n                                                            </ui-select-choices>\n                                                        </ui-select>\n                                                    </fieldset>\n                                                </td>\n                                                <td class="kuiTableRowCell cellAlignTop actions">\n                                                    <a\n                                                            tooltip="Delete field {{tenantpermission.allowed_actions[$index]}}"\n                                                            ng-click="confirmRemoveArrayEntry(tenantpermission.allowed_actions, permission)"\n                                                            class="kuiButton kuiButton--danger kuiButton--iconText"\n                                                            id="opendistro_security.button.roles.applicationpermissions.delete.{{$index}}">\n                                                        <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                                    </a>\n                                                </td>\n                                            </tr>\n                                            <tr class="kuiTableRow">\n                                                <td class="kuiTableRowCell cellAlignTop actions"></td>\n                                                <td class="kuiTableRowCell cellAlignTop actions">\n                                                    <button type="button"\n                                                            ng-click="addArrayEntry(tenantpermission, \'allowed_actions\', \'\')"\n                                                            ng-disabled="lastArrayEntryEmpty(tenantpermission.allowed_actions)"\n                                                            class="kuiButton kuiButton--primary kuiButton--iconText"\n                                                            id="opendistro_security.button.roles.applicationpermissions.add">\n                                                        <span class="kuiButton__icon kuiIcon fa-plus"></span>\n                                                        Add Field\n                                                    </button>\n                                                </td>\n                                            </tr>\n                                            </tbody>\n                                        </table>\n                                    </accordeon>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="formsubmit" style="margin-top:20px;">\n                            <button id="opendistro_security.button.submit" ng-if="!addingIndex" ng-disabled="!endpointAndMethodEnabled(\'ROLES\', \'PUT\') || resource.reserved"  class="kuiButton kuiButton--primary kuiButton--text" type="submit">Save Role Definition</button>\n                            <button id="opendistro_security.button.cancel" ng-if="!addingIndex" class="kuiButton kuiButton--basic kuiButton--text" type="button" ng-click="cancel()">Cancel</button>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n        <securityc-confirmation-modal ng-if="deleteFromEditModal.displayModal"\n                                header="{{deleteFromEditModal.header}}"\n                                body="{{deleteFromEditModal.body}}"\n                                params="deleteFromEditModal.params"\n                                on-confirm="deleteFromEditModal.onConfirm"\n                                on-close="deleteFromEditModal.onClose"\n        ></securityc-confirmation-modal>\n    </div>\n</div>'},2728:function(module,exports,__webpack_require__){"use strict";var _notify=__webpack_require__(13);var _chrome=_interopRequireDefault(__webpack_require__(11));var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);__webpack_require__(2729);__webpack_require__(592);__webpack_require__(433);__webpack_require__(1028);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.controller("securityRolesController",function($scope,$element,$route,backendRoles,kbnUrl){$scope.endpoint="ROLES";$scope.$parent.endpoint="ROLES";$scope.service=backendRoles;$scope.$parent.service=backendRoles;$scope.resources={};$scope.title="Manage Roles";$scope.service.list().then(function(response){$scope.resourcenames=Object.keys(response.data).sort();$scope.resourcenames.forEach(function(entry){$scope.resources[entry]=$scope.service.postFetch(response.data[entry])});$scope.resources=response.data;$scope.numresources=response.total;$scope.loaded=true});$scope.sortTable={byKey:"resourcename",descending:false};$scope.onSortChange=function(key){if($scope.sortTable.byKey===key){$scope.sortTable.descending=!$scope.sortTable.descending}else{$scope.sortTable.byKey=key}}});app.controller("securityEditRolesController",function($rootScope,$scope,$element,$route,$location,$routeParams,$http,$window,createNotifier,backendRoles,backendrolesmapping,backendAPI,backendTenants,kbnUrl,systemstate){var APP_ROOT="".concat(_chrome.default.getBasePath());var API_ROOT="".concat(APP_ROOT,"/api/v1");$scope.endpoint="ROLES";$scope.$parent.endpoint="ROLES";$scope.service=backendRoles;$scope.$parent.service=backendRoles;$scope.resourcelabel="Open Distro Security Role";$scope.loaded=false;$scope.resource={};$scope.resourcename="";$scope.resourcenames=[];$scope.rolemapping={};$scope.isNew=true;$scope.dlsFlsEnabled=true;$scope.multiTenancyEnabled=true;$scope.selectedTab="indexpermissions";$scope.indices={};$scope.indexAutoComplete=[];$scope.doctypeAutoComplete=[];$scope.globalEnabled=_chrome.default.getInjected("multitenancy.tenants.enable_global");$scope.applicationActionGroups=["kibana_all_read","kibana_all_write"];$scope.title=function(){return $scope.isNew?"New Role ":"Edit Role '"+$scope.resourcename+"'"};$scope.loadIndices=function(){$scope.indices={};$scope.indexAutoComplete=[];$scope.doctypeAutoComplete=[];$http.get("".concat(API_ROOT,"/configuration/indices")).then(function(response){Object.keys(response.data).sort().forEach(function(indexname){var index={};index["name"]=indexname;var doctypesList=[];Object.keys(response.data[indexname].mappings).sort().forEach(function(doctypename){var doctype={};doctype["name"]=doctypename;doctypesList.push(doctype)});index["doctypes"]=doctypesList;$scope.indices[indexname]=index;$scope.indexAutoComplete.push(index)})},function(error){_notify.toastNotifications.addDanger({title:"Unable to load indices.",text:error.data.message})})};$scope.getTabCss=function(tabId){var css="";if($scope.selectedTab==tabId){css=" kuiLocalTab kuiLocalTab-isSelected"}else{css=" kuiLocalTab"}if(tabId!="indexpermissions"&&$scope.addingIndex){css+=" tab-inactive"}return css};$scope.selectTab=function(tabId){if($scope.addingIndex){return}$scope.selectedTab=tabId};$scope.indicesEmpty=function(){if($scope.resource.index_permissions){return $scope.resource.index_permissions.length==0}return true};$scope.tenantPermissionsEmpty=function(){if($scope.resource.tenant_permissions){return $scope.resource.tenant_permissions.length==0}return true};$scope.addEmptyIndexPermissions=function(){for(var i=0;i<$scope.resource.index_permissions.length;i++){var indexpermission=$scope.resource.index_permissions[i];indexpermission["collapsed"]=true}if(!$scope.resource.index_permissions){$scope.resource["index_permissions"]=[]}$scope.resource.index_permissions.unshift($scope.service.emptyIndexPermissions());angular.element("#security.input.roles.indexpatterns.0.0").focus()};$scope.addEmptyTenantPermissions=function(){if(!$scope.resource.tenant_permissions){$scope.resource["tenant_permissions"]=[]}$scope.resource.tenant_permissions.unshift($scope.service.emptyTenantPermissions())};$scope.getAccordeonTitle=function(patternsArray,defaultText){if(!patternsArray||patternsArray.length==0){return defaultText}return patternsArray.join(", ")};$scope.onCloseNewIndexAutocompletes=function(isOpen,$select){if(isOpen||!$select.select||!$select.selected){return}$select.select($select.selected)};$scope.refreshNewIndexName=function($select){var search=$select.search,list=angular.copy($select.items),FLAG=-1;list=list.filter(function(item){return item.id!==FLAG});if(!search){$select.items=list}else{var customItem={id:FLAG,name:search};$select.items=[customItem].concat(list);$select.selected=customItem}};$scope.loadRoleMapping=function(){backendrolesmapping.getSilent($scope.resourcename,false).then(function(response){$scope.rolemapping=response})};$scope.testDls=function(index,rawquery,indexname){var editor=ace.edit("object-form-dls-json-raw-"+index);var code=editor.getSession().getValue();try{var codeAsJson=JSON.parse(code);editor.getSession().setValue(JSON.stringify(codeAsJson,null,2))}catch(exception){_notify.toastNotifications.addDanger({title:"Invalid JSON.",text:"The query you provided is invalid JSON."});return}var encodedIndex=$window.encodeURIComponent(indexname);var query='{"query": '+rawquery+"}";$http.post("".concat(API_ROOT,"/configuration/validatedls/")+encodedIndex,query).then(function(response){console.log(response);if(!response.data.valid){_notify.toastNotifications.addDanger({title:"DLS query syntax not valid.",text:response.data.error})}else{$scope.errorMessage="";_notify.toastNotifications.addSuccess({title:"DLS query syntax valid."})}},function(error){_notify.toastNotifications.addDanger({text:error.data.message})})};$scope.saveObject=function(event){if(event){event.preventDefault()}var form=$element.find('form[name="objectForm"]');if($scope.objectForm.objectId.$error.required){$scope.displayErrorOnTab("Please provide a role name.","overview");return}if($scope.isNew&&$scope.resourcenames.indexOf($scope.resourcename)!=-1){$scope.displayErrorOnTab("Role with same name already exists, please choose another one.","overview");return}if(form.hasClass("ng-invalid-required")){$scope.errorMessage="Please fill in all the required parameters.";return}backendAPI.cleanArraysFromDuplicates($scope.resource);$scope.service.save($scope.resourcename,$scope.resource).then(function(){return kbnUrl.change("/roles/")});$scope.errorMessage=null};$scope.displayErrorOnTab=function(error,tab){$scope.errorMessage=error;$scope.selectedTab=tab};$scope.initialiseStates();$scope.loadIndices();$scope.service.list().then(function(response){$scope.resourcenames=Object.keys(response.data);var rolename=$routeParams.resourcename;var indexname=$routeParams.indexname;if(rolename){$scope.service.get(rolename).then(function(response){$scope.resource=$scope.service.postFetch(response);$scope.resourcename=rolename;if($location.path().indexOf("clone")==-1){$scope.isNew=false}else{$scope.resourcename=$scope.resourcename+" (COPY)";$scope.isNew=true;delete $scope.resource.reserved;$scope.selectedTab="overview"}$scope.indexname=$routeParams.indexname;$scope.loadRoleMapping();if(indexname){$scope.selectedIndex=indexname;$scope.selectedTab="indexpermissions"}else{if($scope.resource.indices&&Object.keys($scope.resource.indices).length>0){$scope.selectedIndex=Object.keys($scope.resource.indices).sort()[0]}$scope.selectedTab="overview"}if($scope.resource.indices&&$scope.resource.indices[$scope.selectedIndex]){$scope.selectedDocumentType=Object.keys($scope.resource.indices[$scope.selectedIndex]).sort()[0]}})}else{$scope.selectedTab="overview";$scope.resource=$scope.service.postFetch($scope.service.emptyModel());if($routeParams.name){$scope.resourcename=$routeParams.name}$scope.isNew=true}$scope.loaded=true})})},2729:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);var _client=_interopRequireDefault(__webpack_require__(272));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/opendistro_security/configuration",[]).service("backendRoles",function(backendAPI,Promise,$http){var _this=this;var RESOURCE="roles";this.title={singular:"role",plural:"roles"};this.newLabel="Role name";this.list=function(){return backendAPI.list(RESOURCE)};this.listSilent=function(){return backendAPI.listSilent(RESOURCE)};this.listAutocomplete=function(names){return backendAPI.listAutocomplete(names)};this.get=function(id){return backendAPI.get(RESOURCE,id)};this.save=function(rolename,data){sessionStorage.removeItem("rolesautocomplete");sessionStorage.removeItem("rolenames");var resourceCopy=JSON.parse(JSON.stringify(data));var data=_this.preSave(resourceCopy);return backendAPI.save(RESOURCE,rolename,data)};this.delete=function(id){sessionStorage.removeItem("rolesautocomplete");sessionStorage.removeItem("rolenames");return backendAPI.delete(RESOURCE,id)};this.emptyModel=function(){var role={};role["cluster_permissions"]=[];role["index_permissions"]=[];role["tenant_permissions"]=[];return role};this.emptyIndexPermissions=function(){var indexPermissions={};indexPermissions["index_patterns"]=[""];indexPermissions["allowed_actions"]={};indexPermissions.allowed_actions["actiongroups"]=[];indexPermissions.allowed_actions["permissions"]=[];indexPermissions["dls"]="";indexPermissions["fls"]=[];indexPermissions["flsmode"]="blacklist";indexPermissions["masked_fields"]=[];indexPermissions["collapsed"]=false;return indexPermissions};this.emptyTenantPermissions=function(){var tenantPermissions={};tenantPermissions["tenant_patterns"]=[];tenantPermissions["allowed_actions"]=[];tenantPermissions["collapsed"]=false;return tenantPermissions};this.emptyGlobalPermissions=function(){var globalPermissions={};tenantPermissions["tenant_patterns"]=["global_tenant"];tenantPermissions["allowed_actions"]=[""];return globalPermissions};this.preSave=function(role){delete role.hidden;delete role.reserved;delete role.static;var cluster_permissions=backendAPI.mergeCleanArray(role.cluster_permissions.actiongroups,role.cluster_permissions.permissions);delete role.cluster_permissions;role.cluster_permissions=cluster_permissions;if(role.index_permissions){for(var i=0;i<role.index_permissions.length;i++){var indexpermission=role.index_permissions[i];delete indexpermission["collapsed"];var permissions=backendAPI.mergeCleanArray(indexpermission.allowed_actions.actiongroups,indexpermission.allowed_actions.permissions);indexpermission["allowed_actions"]=permissions;_this.setFlsModeToFields(indexpermission);delete indexpermission["flsmode"]}}if(role.tenant_permissions){for(var i=0;i<role.tenant_permissions.length;i++){var tenantpermission=role.tenant_permissions[i];delete tenantpermission["collapsed"]}}else{role["tenant_permission"]=[]}if(role.global_application_permissions&&role.global_application_permissions.length>0){role.tenant_permissions.push({tenant_patterns:["global_tenant"],allowed_actions:role.global_application_permissions})}delete role["global_application_permissions"];return role};this.postFetch=function(role){role=backendAPI.cleanArraysFromDuplicates(role);var clusterpermissions=backendAPI.sortPermissions(role.cluster_permissions);role["cluster_permissions"]={};role.cluster_permissions["actiongroups"]=clusterpermissions.actiongroups;role.cluster_permissions["permissions"]=clusterpermissions.permissions;if(role.index_permissions){for(var i=0;i<role.index_permissions.length;i++){var indexpermission=role.index_permissions[i];indexpermission["collapsed"]=true;if(indexpermission.allowed_actions){var permissions=backendAPI.sortPermissions(role.index_permissions[i].allowed_actions);indexpermission["allowed_actions"]={};indexpermission.allowed_actions["actiongroups"]=permissions.actiongroups;indexpermission.allowed_actions["permissions"]=permissions.permissions}else{indexpermission["allowed_actions"]={};indexpermission.allowed_actions["actiongroups"]=[];indexpermission.allowed_actions["permissions"]=[]}_this.determineFlsMode(indexpermission)}}else{role.index_permissions=[]}role["global_application_permissions"]=[];var globalPermissionsIndex=-1;if(role.tenant_permissions){for(var i=0;i<role.tenant_permissions.length;i++){var tenantpermission=role.tenant_permissions[i];tenantpermission["collapsed"]=true;var tenantPatterns=tenantpermission.tenant_patterns;if(tenantPatterns&&tenantPatterns.length>0&&tenantPatterns[0]=="global_tenant"){role["global_application_permissions"]=tenantpermission.allowed_actions;globalPermissionsIndex=i}}}if(globalPermissionsIndex>-1){role.tenant_permissions.splice(globalPermissionsIndex,1)}return role};this.determineFlsMode=function(indexpermission){indexpermission["flsmode"]="whitelist";var flsFields=indexpermission["fls"];if((0,_lodash.isEmpty)(flsFields)||!Array.isArray(flsFields)){return}for(var index=0;index<flsFields.length;++index){var field=flsFields[index];if(field.startsWith("~")){flsFields[index]=field.replace(/^\~+/,"");indexpermission["flsmode"]="blacklist"}}};this.setFlsModeToFields=function(indexpermission){var flsFields=indexpermission["fls"];if((0,_lodash.isEmpty)(flsFields)||!Array.isArray(flsFields)){return}for(var index=0;index<flsFields.length;++index){var field=flsFields[index];field=field.replace(/^\~+/,"");if(!field.startsWith("~")&&indexpermission["flsmode"]=="blacklist"){flsFields[index]="~"+field}}};this.isRoleEmpty=function(role){role.cluster.actiongroups=backendAPI.cleanArray(role.cluster.actiongroups);role.cluster.permissions=backendAPI.cleanArray(role.cluster.permissions);var clusterPermsEmpty=role.cluster.actiongroups.length==0&&role.cluster.permissions.length==0;var indicesEmpty=this.checkIndicesStatus(role).allEmpty;return clusterPermsEmpty&&indicesEmpty}})},273:function(module,exports,__webpack_require__){"use strict";__webpack_require__(2686);__webpack_require__(2688);__webpack_require__(2690);__webpack_require__(2692);__webpack_require__(2694);__webpack_require__(2696);__webpack_require__(2700);__webpack_require__(2702);__webpack_require__(2703);__webpack_require__(2705);__webpack_require__(2707);__webpack_require__(2709);__webpack_require__(2710)},2730:function(module,exports,__webpack_require__){"use strict";var _routes=_interopRequireDefault(__webpack_require__(19));var _index=_interopRequireDefault(__webpack_require__(2731));var _edit=_interopRequireDefault(__webpack_require__(2732));__webpack_require__(2733);__webpack_require__(273);__webpack_require__(63);__webpack_require__(271);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes.default.when("/tenants",{template:_index.default}).when("/tenants/edit/:resourcename",{template:_edit.default}).when("/tenants/clone/:resourcename",{template:_edit.default}).when("/tenants/new",{template:_edit.default})},2731:function(module,exports){module.exports='<div ng-controller="securityBaseController">\n    <div class="security app-container ng-scope" id="section-editor" ng-controller="securityTenantsController">\n\n        <securityc-list-header></securityc-list-header>\n\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12">\n\n                    <div style="margin-bottom: 10px;">\n                        <div style="display: inline;">\n                            <span class="help" tooltip="Use tenants to control access to Kibana.">\n                                <svg class="euiIcon euiIcon--large" focusable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="help-a" d="M13.6 12.186l-1.357-1.358c-.025-.025-.058-.034-.084-.056.53-.794.84-1.746.84-2.773a4.977 4.977 0 0 0-.84-2.772c.026-.02.059-.03.084-.056L13.6 3.813a6.96 6.96 0 0 1 0 8.373zM8 15A6.956 6.956 0 0 1 3.814 13.6l1.358-1.358c.025-.025.034-.057.055-.084C6.02 12.688 6.974 13 8 13a4.978 4.978 0 0 0 2.773-.84c.02.026.03.058.056.083l1.357 1.358A6.956 6.956 0 0 1 8 15zm-5.601-2.813a6.963 6.963 0 0 1 0-8.373l1.359 1.358c.024.025.057.035.084.056A4.97 4.97 0 0 0 3 8c0 1.027.31 1.98.842 2.773-.027.022-.06.031-.084.056l-1.36 1.358zm5.6-.187A4 4 0 1 1 8 4a4 4 0 0 1 0 8zM8 1c1.573 0 3.019.525 4.187 1.4l-1.357 1.358c-.025.025-.035.057-.056.084A4.979 4.979 0 0 0 8 3a4.979 4.979 0 0 0-2.773.842c-.021-.027-.03-.059-.055-.084L3.814 2.4A6.957 6.957 0 0 1 8 1zm0-1a8.001 8.001 0 1 0 .003 16.002A8.001 8.001 0 0 0 8 0z"></path></defs><use xlink:href="#help-a" fill-rule="evenodd"></use></svg>\n                            </span>\n                        </div>\n                        <h3 class="indexheading euiTitle euiTitle--medium" style="display: inline;">Tenants</h3>\n                    </div>\n\n                    <div class="kuiControlledTable">\n\n                        <securityc-filter-bar></securityc-filter-bar>\n\n                        \x3c!-- Table --\x3e\n                        <table class="kuiTable" ng-show="(resourcenames | filter:query).length">\n                            <thead>\n                                <tr>\n\n                                    <th class="kuiTableHeaderCell" ng-click="onSortChange(\'resourcename\')">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Tenants\n                                        </span>\n                                        <span ng-show="sortTable.byKey === \'resourcename\'"\n                                              class="kuiIcon"\n                                              ng-class="{\'fa-long-arrow-down\': sortTable.descending, \'fa-long-arrow-up\': ! sortTable.descending}">\n                                        </span>\n                                    </th>\n\n                                    <th class="kuiTableHeaderCell">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Description\n                                        </span>\n                                    </th>\n\n                                </tr>\n                            </thead>\n\n                            <tbody>\n                                <tr ng-repeat="tenantname in resourcenames | filter:query | orderBy:\'toString()\':sortTable.descending" class="kuiTableRow">\n\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            <a class="kuiLink" ng-click="edit(tenantname)" title="{{tenantname}}" id="{{tenantname}}">\n                                                {{tenantname}}\n                                            </a>\n                                            <div ng-if="resources[tenantname].reserved">\n                                                <span class="euiBadge euiBadge--default">\n                                                  <span class="euiBadge__content">\n                                                        <span class="euiIcon euiIcon--small euiBadge__icon kuiIcon fa-lock"></span>\n                                                    <span class="euiBadge__text">reserved</span>\n                                                  </span>\n                                                </span>\n                                            </div>\n                                        </div>\n                                    </td>\n\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            <span>{{resources[tenantname].description}}<br/></span>\n                                        </div>\n                                    </td>\n\n                                    <td class="kuiTableRowCell actions cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            <a tooltip="Edit" ng-click="edit(tenantname)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                                <span class="kuiButton__icon kuiIcon fa-edit"></span>\n                                            </a>\n                                            <a tooltip="Clone" ng-click="clone(tenantname)" class="kuiButton kuiButton--primary kuiButton--iconText">\n                                                <span class="kuiButton__icon kuiIcon fa-copy"></span>\n                                            </a>\n                                            <button tooltip="Delete"\n                                                    type="button"\n                                                    ng-disabled="!endpointAndMethodEnabled(\'TENANTS\', \'DELETE\') || resources[tenantname].reserved"\n                                                    ng-click="confirmDelete(tenantname)"\n                                                    class="kuiButton kuiButton--danger kuiButton--iconText"\n                                                    id="opendistro_security.button.tenants.delete.{{tenantname}}">\n                                                <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n                                            </button>\n                                        </div>\n                                    </td>\n\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <securityc-confirmation-modal ng-if="displayModal === true"\n            header="Confirm Delete"\n            body="Do you really want to delete \'{{deleteModalResourceName}}\'"\n            on-close="closeDeleteModal"\n            on-confirm="delete">\n        </securityc-confirmation-modal>\n\n\n    </div>\n</div>\n'},2732:function(module,exports){module.exports='<div ng-controller="securityBaseController">\n    <div class="security app-container ng-scope" id="section-editor" ng-controller="securityEditTenantsController">\n\n        <securityc-edit-header></securityc-edit-header>\n\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12">\n                    <div class="">\n                        <form securityc-form-focus-added-field name="objectForm" id="object-form" method="post" ng-submit="saveObject($event)" novalidate style="width:70%">\n\n                            <securityc-error-message></securityc-error-message>\n\n                            <securityc-form-resource-name></securityc-form-resource-name>\n\n                            <securityc-form-new-resource-field></securityc-form-new-resource-field>\n\n\n                            <table class="kuiTable tableIndexGroups">\n                                <thead>\n                                <tr>\n                                    <th class="kuiTableHeaderCell tableHeaderCellIndexGroups">\n                                        <span class="kuiTableHeaderCell__liner">\n                                            Description\n                                        </span>\n                                    </th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <fieldset class="marginbottom--small" id="object-form-backendroles">\n                                            <input type="text" class="kuiTextInput fullwidth" id="object-form-description" ng-model="resource.description" name="">\n                                        </fieldset>\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n\n                            <div class="formsubmit">\n                                <button id="opendistro_security.button.submit" ng-disabled="!endpointAndMethodEnabled(\'TENANTS\', \'PUT\')  || resource.reserved"  class="kuiButton kuiButton--primary kuiButton--text" type="submit">Submit</button>\n                                <button id="opendistro_security.button.cancel" class="kuiButton kuiButton--basic kuiButton--text" type="submit" ng-click="cancel()">Cancel</button>\n                            </div>\n\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},2733:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);__webpack_require__(1028);var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.controller("securityTenantsController",function($scope,$element,$route,createNotifier,backendTenants,kbnUrl){$scope.endpoint="tenants";$scope.$parent.endpoint="tenants";$scope.service=backendTenants;$scope.$parent.service=backendTenants;$scope.resources={};$scope.title="Manage Tenants";$scope.service.list().then(function(response){$scope.resourcenames=Object.keys(response.data).sort();$scope.resources=response.data;$scope.numresources=response.total;$scope.loaded=true});$scope.newRole=function(tenantname){kbnUrl.change("/tenants/new?name="+tenantname)};$scope.sortTable={byKey:"resourcename",descending:false};$scope.onSortChange=function(key){if($scope.sortTable.byKey===key){$scope.sortTable.descending=!$scope.sortTable.descending}else{$scope.sortTable.byKey=key}}});app.controller("securityEditTenantsController",function($scope,$element,$route,$location,$routeParams,createNotifier,backendTenants,backendAPI,kbnUrl){$scope.endpoint="tenants";$scope.$parent.endpoint="tenants";$scope.service=backendTenants;$scope.$parent.service=backendTenants;$scope.resourcelabel="Tenant";$scope.resource={};$scope.resourcename="";$scope.resourcenames=[];$scope.isNew=false;$scope.query="";$scope.resourceloaded=false;$scope.title=function(){return $scope.isNew?"New Tenant":"Edit Tenant '"+$scope.resourcename+"'"};$scope.onSelectedNewResourceName=function(event){$scope.resourcename=event.item.name};$scope.service.list().then(function(response){$scope.resourcenames=Object.keys(response.data);var tenant=$routeParams.resourcename;if(tenant){$scope.service.get(tenant).then(function(response){$scope.resource=$scope.service.postFetch(response);$scope.resourcename=tenant;$scope.resourceloaded=true;if($location.path().indexOf("clone")==-1){$scope.isNew=false}else{$scope.resourcename=$scope.resourcename+" (COPY)";$scope.isNew=true;delete $scope.resource.reserved}})}else{$scope.resource=$scope.service.emptyModel();if($routeParams.name){$scope.resourcename=$routeParams.name}$scope.isNew=true}$scope.loaded=true});$scope.saveObject=function(event){if(event){event.preventDefault()}var form=$element.find('form[name="objectForm"]');if(!$scope.resourcename||$scope.resourcename.length==0){$scope.errorMessage="Please provide a tenant name";return}if($scope.isNew&&$scope.resourcenames.indexOf($scope.resourcename)!=-1){$scope.errorMessage='Tenant "'+$scope.resourcename+'"already exists, please choose another one.';return}$scope.service.save($scope.resourcename,$scope.resource).then(function(){return kbnUrl.change("/tenants/")});$scope.errorMessage=null}})},2734:function(module,exports,__webpack_require__){"use strict";var _angular=_interopRequireDefault(__webpack_require__(18));var _routes=_interopRequireDefault(__webpack_require__(19));var _index=_interopRequireDefault(__webpack_require__(2735));__webpack_require__(593);__webpack_require__(2736);__webpack_require__(273);__webpack_require__(63);__webpack_require__(271);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes.default.when("/securityconfiguration",{template:_index.default})},2735:function(module,exports){module.exports='<div ng-controller="securityBaseController">\n    <div class="security app-container ng-scope" ng-controller="securityConfigController">\n\n        <securityc-header></securityc-header>\n\n        <div class="container">\n            <div class="row">\n\n                <div style="margin-bottom: 10px;">\n                    <div style="display: inline;">\n                            <span class="kuiInfoButton help" tooltip="Displays the currently configured authentication and authorization modules and their settings. Use the securityadmin command line tool to change this configuration.">\n                                <svg class="euiIcon euiIcon--large" focusable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="help-a" d="M13.6 12.186l-1.357-1.358c-.025-.025-.058-.034-.084-.056.53-.794.84-1.746.84-2.773a4.977 4.977 0 0 0-.84-2.772c.026-.02.059-.03.084-.056L13.6 3.813a6.96 6.96 0 0 1 0 8.373zM8 15A6.956 6.956 0 0 1 3.814 13.6l1.358-1.358c.025-.025.034-.057.055-.084C6.02 12.688 6.974 13 8 13a4.978 4.978 0 0 0 2.773-.84c.02.026.03.058.056.083l1.357 1.358A6.956 6.956 0 0 1 8 15zm-5.601-2.813a6.963 6.963 0 0 1 0-8.373l1.359 1.358c.024.025.057.035.084.056A4.97 4.97 0 0 0 3 8c0 1.027.31 1.98.842 2.773-.027.022-.06.031-.084.056l-1.36 1.358zm5.6-.187A4 4 0 1 1 8 4a4 4 0 0 1 0 8zM8 1c1.573 0 3.019.525 4.187 1.4l-1.357 1.358c-.025.025-.035.057-.056.084A4.979 4.979 0 0 0 8 3a4.979 4.979 0 0 0-2.773.842c-.021-.027-.03-.059-.055-.084L3.814 2.4A6.957 6.957 0 0 1 8 1zm0-1a8.001 8.001 0 1 0 .003 16.002A8.001 8.001 0 0 0 8 0z"></path></defs><use xlink:href="#help-a" fill-rule="evenodd"></use></svg>\n                            </span>\n                        <h3 class="indexheading euiTitle euiTitle--medium" style="display: inline;">Auhentication and Authorization</h3>\n                        <a ng-href="#/" class="kuiButton kuiButton--basic kuiButton--iconText" style="display: inline; float: right;">\n                            <span class="kuiButton__icon kuiIcon fa-chevron-left"></span>\n                            Back\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="container">\n\n            <h2 class="euiTitle euiTitle--small" style="margin-bottom: 20px;">Authentication</h2>\n\n            <div class="container">\n                <div class="row" data-ng-repeat="authc in sortedAuthc">\n                    <div class="col-xs-12" style="color: red">\n\n                        <accordeon additional-class="{{authcclass(authc)}}" title="{{authctitle(authc)}}" is-collapsed="true">\n\n                            <table class="kuiTable">\n                                <tbody>\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            Enabled on REST?\n                                        </div>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        {{authc.http_enabled}}\n                                    </td>\n                                </tr>\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            Enabled on Transport?\n                                        </div>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        {{authc.transport_enabled}}\n                                    </td>\n                                </tr>\n\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            HTTP Authenticator Type\n                                        </div>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        {{authc.http_authenticator.type}}\n                                    </td>\n                                </tr>\n\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            HTTP Challenge\n                                        </div>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        {{authc.http_authenticator.challenge}}\n                                    </td>\n                                </tr>\n\n                                <tr class="kuiTableRow" ng-if="authc.http_authenticator.config">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            HTTP Authenticator Configuration\n                                        </div>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop"><pre>{{stringifyJson(authc.http_authenticator.config)}}</pre>\n                                    </td>\n                                </tr>\n\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            Authentication Backend Type\n                                        </div>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        {{authc.authentication_backend.type}}\n                                    </td>\n                                </tr>\n\n\n                                <tr data-test-subj="userRow" class="kuiTableRow" ng-if="authc.authentication_backend.config">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            Authentication Backend Configuration\n                                        </div>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <pre>{{stringifyJson(authc.authentication_backend.config)}}</pre></td>\n                                </tr>\n\n                                </tbody>\n                            </table>\n\n\n                        </accordeon>\n                    </div>\n                </div>\n            </div>\n\n            <h2 class="euiTitle euiTitle--small" style="margin-bottom: 20px;">Authorization</h2>\n\n            <div class="container">\n                <div class="row" data-ng-repeat="authz in sortedAuthz">\n                    <div class="col-xs-12">\n                        <accordeon additional-class="{{authzlass(authz)}}" title="{{authztitle(authz)}}" is-collapsed="true">\n                            <table class="kuiTable">\n                                <tbody>\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            Enabled on REST?\n                                        </div>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        {{authz.http_enabled}}\n                                    </td>\n                                </tr>\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            Enabled on Transport?\n                                        </div>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        {{authz.transport_enabled}}\n                                    </td>\n                                </tr>\n\n                                <tr class="kuiTableRow">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            Authorization Backend Type\n                                        </div>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        {{authz.authorization_backend.type}}\n                                    </td>\n                                </tr>\n                                <tr class="kuiTableRow" ng-if="authz.authorization_backend.config">\n                                    <td class="kuiTableRowCell cellAlignTop">\n                                        <div class="kuiTableRowCell__liner">\n                                            Authorization Backend Configuration\n                                        </div>\n                                    </td>\n                                    <td class="kuiTableRowCell cellAlignTop"><pre>{{stringifyJson(authz.authorization_backend.config)}}</pre>\n\n                                    </td>\n                                </tr>\n\n                                </tbody>\n                            </table>\n\n\n                        </accordeon>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},2736:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);var _securityconfiguration=_interopRequireDefault(__webpack_require__(2737));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("apps/opendistro_security/configuration",[]);app.controller("securityConfigController",function($scope,$element,$route,createNotifier,securityConfiguration,kbnUrl){$scope.endpoint="SECURITYCONFIG";$scope.service=securityConfiguration;$scope.sortedAuthc=[];$scope.sortedAuthz=[];$scope.resource={};$scope.title="Authentication / Authorization configuration";$scope.service.list().then(function(response){$scope.resource=$scope.service.postFetch(response.data);(0,_lodash.forEach)(response.data.config.dynamic.authc,function(value,key){value["name"]=key;$scope.sortedAuthc.push(value)});(0,_lodash.forEach)(response.data.config.dynamic.authz,function(value,key){value["name"]=key;$scope.sortedAuthz.push(value)});$scope.sortedAuthc=$scope.sortedAuthc.sort(function(a,b){return a.order-b.order});$scope.sortedAuthz=$scope.sortedAuthz.sort(function(a,b){return a.order-b.order})});$scope.authctitle=function(authc){var title=authc.order+": "+authc.name;var enabled=$scope.authczEnabled(authc);if(!enabled){title+=" (disabled)"}return title};$scope.authcclass=function(authc){var enabled=$scope.authczEnabled(authc);if(!enabled){return"authc-disabled"}};$scope.authztitle=function(authz){var title=authz.name;var enabled=$scope.authczEnabled(authz);if(!enabled){title+=" (disabled)"}return title};$scope.authzlass=function(authz){var enabled=$scope.authczEnabled(authz);if(!enabled){return"authc-disabled"}};$scope.authczEnabled=function(authcz){if(authcz.enabled&&authcz.enabled===true){return true}if(authcz.http_enabled&&authcz.http_enabled===true){return true}if(authcz.transport_enabled&&authcz.transport_enabled===true){return true}return false};$scope.stringifyJson=function(config){return JSON.stringify(config,undefined,2)}})},2737:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _client=_interopRequireDefault(__webpack_require__(272));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/opendistro_security/configuration",[]).service("securityConfiguration",function(backendAPI,Promise,$http){var RESOURCE="securityconfig";this.title={singular:"Authentication / Authorization configuration",plural:"Authentication / Authorization configuration"};this.list=function(){return backendAPI.list(RESOURCE)};this.postFetch=function(securityconfig){return securityconfig}})},2738:function(module,exports,__webpack_require__){},2739:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);var _client=_interopRequireDefault(__webpack_require__(272));__webpack_require__(273);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("apps/opendistro_security/configuration",["ui.ace"]);app.controller("securityConfigurationController",function($scope,$element,$route,$window,$http,createNotifier,backendAPI){$scope.errorMessage="";$scope.title="Security";$scope.clearCache=function(){backendAPI.clearCache()}})},2740:function(module,exports){module.exports='<div ng-controller="securityBaseController">\n\n    <div class="security app-container" ng-controller="securityConfigurationController">\n\n        <securityc-header></securityc-header>\n\n        <div class="row">\n            <div class="col-xs-12" style="text-align: center;">\n                <img class="brand-image" kbn-src="/plugins/opendistro_security/assets/open_distro_for_elasticsearch_logo_h.svg" width="250">\n\n                <h3 ng-if="accessState==\'pending\'" style="margin-top:0px;">Please wait ...</h3>\n\n                <p id="opendistro_security.label.errormessage" class="error-message" ng-show="errorMessage">{{ errorMessage }}</p>\n\n            </div>\n        </div>\n\n\n        <div class="row" ng-if="accessState==\'forbidden\'">\n            <div class="col-xs-12" style="text-align: center;">\n                <h3>You do not have permission to access the Security configuration. Please contact your System\n                    Administrator.</h3>\n            </div>\n        </div>\n\n        <div class="row" ng-if="accessState==\'notenabled\'">\n            <div class="col-xs-12" style="text-align: center;">\n                <h3>The REST API module is not installed. Please contact your System Administrator.</h3>\n            </div>\n        </div>\n\n        <div ng-if="accessState==\'ok\'">\n\n            <div class="kuiViewContent kuiViewContent--constrainedWidth">\n\n                <div class="kuiViewContentItem">\n\n                    <div class="kuiVerticalRhythm kuiVerticalRhythm--medium ">\n\n                        <h2 class="kuiSubTitle" style="margin-bottom:10px;">Permissions and Roles</h2>\n\n                        <div class="FeaturePanelList">\n\n                            <a id="opendistro_security.link.rolesmapping" ng-if="endpointAndMethodEnabled(\'ROLESMAPPING\', \'GET\')" class="FeaturePanel ng-scope"\n                               ng-href="#/rolesmapping"\n                               tooltip="Map users, backend roles and hostnames to roles."\n                               tooltip-placement="bottom" href="#/rolesmapping">\n                                <div class="FeaturePanelButton__image">\n                                    <img src="{{roleMappingsSvgURL}}" width="56" />\n                                </div>\n                                <div class="FeaturePanelButton__label">\n                                    Role Mappings\n                                </div>\n                            </a>\n\n                            <a id="opendistro_security.link.roles" ng-if="endpointAndMethodEnabled(\'ROLES\', \'GET\')" class="FeaturePanel ng-scope"\n                               ng-href="#/roles" tooltip="Configure Roles and their permissions."\n                               tooltip-placement="bottom" href="#/roles">\n                                <div class="FeaturePanelButton__image">\n                                    <img src="{{rolesSvgURL}}" width="56" />\n                                </div>\n                                <div class="FeaturePanelButton__label">\n                                    Roles\n                                </div>\n                            </a>\n\n                            <a id="opendistro_security.link.actiongroups" ng-if="endpointAndMethodEnabled(\'ACTIONGROUPS\', \'GET\')" class="FeaturePanel ng-scope"\n                               ng-href="#/actiongroups"\n                               tooltip="Configure named groups of permissions that can be applied to roles."\n                               tooltip-placement="bottom" href="#/actiongroups">\n                                <div class="FeaturePanelButton__image">\n                                    <img src="{{actionGroupsSvgURL}}" width="56" />\n                                </div>\n                                <div class="FeaturePanelButton__label">\n                                    Action Groups\n                                </div>\n                            </a>\n\n                            <a id="opendistro_security.link.tenants" ng-if="endpointAndMethodEnabled(\'TENANTS\', \'GET\')" class="FeaturePanel ng-scope"\n                               ng-href="#/tenants"\n                               tooltip="Configure tenants."\n                               tooltip-placement="bottom" href="#/tenants">\n                                <div class="FeaturePanelButton__image">\n                                    <img src="{{tenantsSvgURL}}" width="56" />\n                                </div>\n                                <div class="FeaturePanelButton__label">\n                                    Tenants\n                                </div>\n                            </a>\n\n                        </div>\n                    </div>\n\n                    <div class="kuiVerticalRhythm kuiVerticalRhythm--medium ">\n                        <h2 class="kuiSubTitle" style="margin-bottom:10px;">Authentication Backends</h2>\n\n                        <div class="FeaturePanelList">\n\n                            <a id="opendistro_security.link.internalusers" ng-if="endpointAndMethodEnabled(\'INTERNALUSERS\', \'GET\')" class="FeaturePanel"\n                               ng-href="#/internalusers"\n                               tooltip="Use the Internal Users Database if you don\'t have any external authentication systems in place."\n                               tooltip-placement="bottom" href="#/internalusers">\n                                <div class="FeaturePanelButton__image">\n                                    <img src="{{internalUserDatabaseSvgURL}}" width="56" />\n                                </div>\n                                <div class="FeaturePanelButton__label">\n                                    Internal User Database\n                                </div>\n                            </a>\n                        </div>\n\n                        <div class="kuiVerticalRhythm kuiVerticalRhythm--medium ">\n                            <h2 class="kuiSubTitle" style="margin-bottom:10px;">System</h2>\n\n                            <div class="FeaturePanelList">\n                                <a id="opendistro_security.link.securityconfig" ng-if="endpointAndMethodEnabled(\'SECURITYCONFIG\', \'GET\')" class="FeaturePanel ng-scope"\n                                   ng-href="#/securityconfiguration"\n                                   tooltip="View the configured authentication and authorization modules."\n                                   href="#/securityconfiguration">\n                                    <div class="FeaturePanelButton__image">\n                                        <img src="{{authenticationSvgURL}}" width="56" />\n                                    </div>\n                                    <div class="FeaturePanelButton__label">\n                                        Authentication & Authorisation\n                                    </div>\n                                </a>\n\n                                <a id="opendistro_security.link.cache" ng-if="endpointAndMethodEnabled(\'CACHE\', \'DELETE\')" class="FeaturePanel ng-scope"\n                                   ng-click="clearCache()" tooltip="Purge all caches"\n                                   tooltip-placement="bottom">\n                                    <div class="FeaturePanelButton__image">\n                                        <img src="{{purgeCacheSvgURL}}" width="56" />\n                                    </div>\n                                    <div class="FeaturePanelButton__label">\n                                        Purge Cache\n                                    </div>\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},592:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _lodash=__webpack_require__(62);var _client=_interopRequireDefault(__webpack_require__(272));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/opendistro_security/configuration",[]).service("backendActionGroups",function(backendAPI,Promise,$http,kbnUrl){var _this=this;var RESOURCE="actiongroups";this.title={singular:"action group",plural:"action groups"};this.newLabel="Action Group name";this.list=function(){return backendAPI.list(RESOURCE)};this.listSilent=function(){return backendAPI.listSilent(RESOURCE)};this.get=function(id){return backendAPI.get(RESOURCE,id)};this.save=function(actiongroupname,data){sessionStorage.removeItem("actiongroupsautocomplete");sessionStorage.removeItem("actiongroupnames");var data=_this.preSave(data);return backendAPI.save(RESOURCE,actiongroupname,data)};this.delete=function(id){sessionStorage.removeItem("actiongroupsautocomplete");sessionStorage.removeItem("actiongroupnames");return backendAPI.delete(RESOURCE,id)};this.listAutocomplete=function(names){return backendAPI.listAutocomplete(names)};this.emptyModel=function(){var actiongroup={};actiongroup.permissions=[];actiongroup.actiongroups=[];return actiongroup};this.preSave=function(actiongroup){delete actiongroup.hidden;delete actiongroup.reserved;delete actiongroup.static;var result={};var all=[];all=all.concat(actiongroup.actiongroups);all=all.concat(actiongroup.permissions);all=all.filter(function(e){return String(e).trim()});all=(0,_lodash.uniq)(all);result["allowed_actions"]=all;return result};this.postFetch=function(actiongroup){var permissionsArray=actiongroup;if(actiongroup.allowed_actions){permissionsArray=actiongroup.allowed_actions}permissionsArray=backendAPI.cleanArraysFromDuplicates(permissionsArray);var permissions=backendAPI.sortPermissions(permissionsArray);if(actiongroup.reserved){permissions["reserved"]=actiongroup.reserved}return permissions}})},593:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _chrome=_interopRequireDefault(__webpack_require__(11));var _saved_objects=__webpack_require__(57);var _notify=__webpack_require__(13);var _lodash=__webpack_require__(62);__webpack_require__(273);var _client=_interopRequireDefault(__webpack_require__(272));var _clusterpermissions=_interopRequireDefault(__webpack_require__(2715));var _indexpermissions=_interopRequireDefault(__webpack_require__(2716));__webpack_require__(2717);__webpack_require__(2719);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(592);__webpack_require__(433);var app=_modules.uiModules.get("apps/opendistro_security/configuration",["ui.ace","ui.select"]);app.controller("securityBaseController",function($scope,$element,$route,$window,$http,backendAPI,backendActionGroups,backendRoles,kbnUrl,systemstate){var APP_ROOT="".concat(_chrome.default.getBasePath());var API_ROOT="".concat(APP_ROOT,"/api/v1");$scope.service=null;$scope.endpoint=null;$scope.numresources="0";$scope.loaded=false;$scope.title="Security Base Controller";$scope.errorMessage="";$scope.query="";$scope.resource={};$scope.showEditor=false;$scope.toggleEditorLabel="Show JSON";$scope.resourceAsJson=null;$scope.accessState="pending";$scope.actiongroupNames=[];$scope.roleNames=[];$scope.actiongroupsAutoComplete={};$scope.rolesAutoComplete={};$scope.clusterpermissionsAutoComplete=_clusterpermissions.default;$scope.indexpermissionsAutoComplete=_indexpermissions.default;$scope.allpermissionsAutoComplete=_indexpermissions.default.concat(_clusterpermissions.default);$scope.currentuser="";$scope.displayModal=false;$scope.deleteModalResourceName="";$scope.deleteFromEditModal={displayModal:false,params:{},header:"Confirm Delete",body:"",onConfirm:null,onClose:null};$scope.roleMappingsSvgURL=APP_ROOT+"/plugins/opendistro_security/assets/role_mappings.svg";$scope.rolesSvgURL=APP_ROOT+"/plugins/opendistro_security/assets/roles.svg";$scope.actionGroupsSvgURL=APP_ROOT+"/plugins/opendistro_security/assets/action_groups.svg";$scope.internalUserDatabaseSvgURL=APP_ROOT+"/plugins/opendistro_security/assets/internal_user_database.svg";$scope.authenticationSvgURL=APP_ROOT+"/plugins/opendistro_security/assets/authentication.svg";$scope.purgeCacheSvgURL=APP_ROOT+"/plugins/opendistro_security/assets/purge_cache.svg";$scope.tenantsSvgURL=APP_ROOT+"/plugins/opendistro_security/assets/tenants.svg";$scope.title="Security Configuration";$scope.initialiseStates=function(){$scope.complianceFeaturesEnabled=systemstate.complianceFeaturesEnabled();systemstate.loadRestInfo().then(function(){$scope.accessState="ok";$scope.loadActionGroups();$scope.loadRoles();$scope.currentuser=systemstate.getRestApiInfo().user_name})};$scope.loadActionGroups=function(){var cachedActionGroups=sessionStorage.getItem("actiongroupsautocomplete");var cachedActionGroupNames=sessionStorage.getItem("actiongroupnames");if(cachedActionGroups){$scope.actiongroupsAutoComplete=JSON.parse(cachedActionGroups)}if(cachedActionGroupNames){$scope.actiongroupNames=JSON.parse(cachedActionGroupNames)}if(cachedActionGroupNames&&cachedActionGroups){return}if(systemstate.endpointAndMethodEnabled("ACTIONGROUPS","GET")){backendActionGroups.listSilent().then(function(response){$scope.actiongroupNames=Object.keys(response.data);sessionStorage.setItem("actiongroupnames",JSON.stringify($scope.actiongroupNames));$scope.actiongroupsAutoComplete=backendActionGroups.listAutocomplete($scope.actiongroupNames);sessionStorage.setItem("actiongroupsautocomplete",JSON.stringify($scope.actiongroupsAutoComplete))},function(error){_notify.toastNotifications.addDanger({title:"Unable to load action groups",text:error.data.message});$scope.accessState="forbidden"})}};$scope.loadRoles=function(){var cachedRoles=sessionStorage.getItem("rolesautocomplete");var cachedRoleNames=sessionStorage.getItem("rolenames");if(cachedRoles){$scope.rolesAutoComplete=JSON.parse(cachedRoles)}if(cachedRoleNames){$scope.roleNames=JSON.parse(cachedRoleNames)}if(cachedRoles&&cachedRoleNames){return}if(systemstate.endpointAndMethodEnabled("ROLES","GET")){backendRoles.listSilent().then(function(response){$scope.rolesAutoComplete=backendRoles.listAutocomplete(Object.keys(response.data));$scope.roleNames=Object.keys(response.data);sessionStorage.setItem("rolesautocomplete",JSON.stringify($scope.rolesAutoComplete));sessionStorage.setItem("rolenames",JSON.stringify(Object.keys(response.data)))},function(error){_notify.toastNotifications.addDanger({text:error.data.message});$scope.accessState="forbidden"})}};$scope.clearCache=function(){backendAPI.clearCache()};$scope.getDocTypeAutocomplete=function(){$scope.indexAutoComplete=backendAPI.indexAutocomplete()};$scope.endpointAndMethodEnabled=function(endpoint,method){return systemstate.endpointAndMethodEnabled(endpoint,method)};$scope.edit=function(resourcename){kbnUrl.change("/"+$scope.endpoint.toLowerCase()+"/edit/"+resourcename)};$scope.new=function(query){kbnUrl.change("/"+$scope.endpoint.toLowerCase()+"/new?name="+query)};$scope.clone=function(resourcename){kbnUrl.change("/"+$scope.endpoint.toLowerCase()+"/clone/"+resourcename)};$scope.cancel=function(){kbnUrl.change("/"+$scope.endpoint.toLowerCase())};$scope.delete=function(){$scope.displayModal=false;var name=$scope.deleteModalResourceName;$scope.deleteModalResourceName="";$scope.service.delete(name).then(function(){return $scope.cancel()})};$scope.confirmDelete=function(resourcename){$scope.deleteModalResourceName=resourcename;$scope.displayModal=true};$scope.closeDeleteModal=function(){$scope.deleteModalResourceName="";$scope.displayModal=false};$scope.aceLoaded=function(editor){editor.session.setOptions({tabSize:2,useSoftTabs:false});editor.$blockScrolling=Infinity;editor.setShowPrintMargin(false);editor.session.setMode("ace/mode/json");editor.resize();editor.renderer.updateFull();var code=editor.getSession().getValue();try{var codeAsJson=JSON.parse(code);editor.getSession().setValue(JSON.stringify(codeAsJson,null,2))}catch(exception){}};$scope.aceRwLoaded=function(editor){editor.session.setOptions({tabSize:2,useSoftTabs:false});editor.$blockScrolling=Infinity;editor.setShowPrintMargin(false);editor.session.setMode("ace/mode/json");editor.resize();editor.renderer.updateFull();var code=editor.getSession().getValue();try{var codeAsJson=JSON.parse(code);editor.getSession().setValue(JSON.stringify(codeAsJson,null,2))}catch(exception){}};$scope.toggleEditor=function(resource){if($scope.resourceAsJson==null){$scope.loadJSON(resource)}$scope.showEditor=!$scope.showEditor;$scope.toggleEditorLabel=$scope.showEditor?"Hide JSON":"Show JSON"};$scope.loadJSON=function(resource){var resourceCopy=JSON.parse(JSON.stringify(resource));$scope.resourceAsJson=JSON.stringify($scope.service.preSave(resourceCopy),null,2)};$scope.extractPatternsFromObjectArray=function(objArray,key){var result=objArray.map(function(a){return a[key]});return result.flat().sort()};$scope.extractPatternsFromObjectArray=function(objArray,key){var result=objArray.map(function(a){return a[key]});return result.flat().sort()};$scope.checkActionGroupExists=function(array,index,item){if($scope.actiongroupNames.indexOf(item)==-1){array[index]=""}};$scope.addArrayEntry=function(resource,fieldname,value){if(!resource[fieldname]||!Array.isArray(resource[fieldname])){resource[fieldname]=[]}resource[fieldname].push(value)};var removeArrayEntry=function removeArrayEntry(array,item){var index=array.indexOf(item);if(index>-1){array.splice(index,1)}};$scope.confirmRemoveArrayEntry=function(array,item){if(!Array.isArray(array)||array.indexOf(item)===-1){return}if(item&&item.length>0){$scope.deleteFromEditModal={displayModal:true,header:"Confirm Delete",body:"Are you sure you want to delete '".concat(item,"'?"),onConfirm:function onConfirm(){removeArrayEntry(array,item);$scope.closeDeleteFromEditModal()},onClose:$scope.closeDeleteFromEditModal}}else{removeArrayEntry(array,item)}};$scope.closeDeleteFromEditModal=function(){$scope.deleteFromEditModal={displayModal:false,params:null}};$scope.removeArrayEntry=function(array,item){if(!Array.isArray(array)){return}if(item&&item.length>0){if(!confirm("Are you sure you want to delete '".concat(item,"'?"))){return}}var index=array.indexOf(item);array.splice(index,1)};$scope.lastArrayEntryEmpty=function(array){if(!array||typeof array=="undefined"||array.length==0){return false}var entry=array[array.length-1];if(typeof entry==="undefined"||entry.length==0){return true}return false};$scope.removeObjectKey=function(theobject,key){if(theobject[key]){if(confirm("Are you sure you want to delete '".concat(key,"'?"))){delete theobject[key]}}};$scope.addObjectKey=function(theobject,key,value){theobject[key]=value};$scope.sortObjectArray=function(objectArray,sortProperty){return objectArray};$scope.confirmRemoveFromObjectArray=function(thearray,index,value){var body=value===""?"Are you sure you want to delete this?":"Are you sure you want to delete '".concat(value,"'?");$scope.deleteFromEditModal={displayModal:true,header:"Confirm Delete",body:body,onConfirm:function onConfirm(){thearray.splice(index,1);$scope.closeDeleteFromEditModal()},onClose:$scope.closeDeleteFromEditModal}};$scope.removeFromObjectArray=function(thearray,index,value){if(confirm("Are you sure you want to delete '".concat(value,"'?"))){thearray.splice(index,1)}};$scope.addToObjectArray=function(thearray,value){return thearray.push(value)};$scope.keys=function(object){if(object){return Object.keys(object).sort()}};$scope.flatten=function(list,textAttribute){return(0,_lodash.uniq)(list.reduce(function(result,item){var text=item[textAttribute];if(text){result.push(text)}return result},[])).sort()};$scope.initialiseStates()});app.filter("escape",function(){return window.encodeURIComponent});app.filter("unsafe",function($sce){return $sce.trustAsHtml});app.directive("autoFocus",function($timeout){return{link:function link(scope,element,attrs){attrs.$observe("autoFocus",function(newValue){if(newValue==="true")$timeout(function(){element[0].focus()})})}}});app.filter("actiongrouptype",function(){return function(actiongroups,type){var filtered=[];for(var i=0;i<actiongroups.length;i++){var actiongroup=actiongroups[i];if(type=="all"||actiongroup.type==type){filtered.push(actiongroup)}}return filtered}});app.directive("autoFocus",function($timeout){return{link:function link(scope,element,attrs){attrs.$observe("autoFocus",function(newValue){if(newValue==="true")$timeout(function(){element[0].focus()})})}}});app.filter("actiongrouptype",function(){return function(actiongroups,type){var filtered=[];for(var i=0;i<actiongroups.length;i++){var actiongroup=actiongroups[i];if(type=="all"||actiongroup.type==type){filtered.push(actiongroup)}}return filtered}})},6:function(module,exports){module.exports=vendors}})["plugin"];